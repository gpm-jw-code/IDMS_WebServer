{"version":3,"file":"js/391.0474da6f.js","mappings":"qLACOA,MAAM,oB,GACJA,MAAM,W,8EADbC,EAAAA,EAAAA,IAWM,MAXN,EAWM,EAVJC,EAAAA,EAAAA,GASM,MATN,EASM,gBARJD,EAAAA,EAAAA,IAOmBE,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJGC,EAAAA,QAAM,CAAlBC,EAAKC,M,WAHfC,EAAAA,EAAAA,IAOmBC,EAAA,CANhBC,QAASL,EAAAA,QACVL,MAAM,WAELW,IAAKJ,EACLA,GAAIA,EACJK,OAAQN,GANX,8C,wBCFCN,MAAM,iD,GACJA,MAAM,W,GAEJA,MAAM,kC,GACJA,MAAM,0C,GACTE,EAAAA,EAAAA,GAAiB,YAAX,QAAI,G,GAEVA,EAAAA,EAAAA,GAAmB,YAAb,UAAM,G,GAGTF,MAAA,I,GASFA,MAAM,+C,GAQCA,MAAM,Y,WAM4C,S,qOAjClEC,EAAAA,EAAAA,IAqCM,MArCN,EAqCM,EApCJC,EAAAA,EAAAA,GAmCM,MAnCN,EAmCM,EAjCJA,EAAAA,EAAAA,GAcM,MAdN,EAcM,EAbJA,EAAAA,EAAAA,GAKM,MALN,EAKM,CAJJW,GACAX,EAAAA,EAAAA,GAA8B,aAAAY,EAAAA,EAAAA,IAAtBC,EAAAA,OAAOC,QAAM,GACrBC,GACAf,EAAAA,EAAAA,GAAgC,aAAAY,EAAAA,EAAAA,IAAxBC,EAAAA,OAAOG,UAAQ,MAEzBhB,EAAAA,EAAAA,GAMM,MANN,EAMM,EALJA,EAAAA,EAAAA,GAAmB,aAAAY,EAAAA,EAAAA,IAAXC,EAAAA,IAAE,IACVI,EAAAA,EAAAA,IAGUC,EAAA,CAHDC,KAAK,QAAM,C,kBAClB,IAA4C,CAAzBhB,EAAAA,YAAAA,EAAAA,EAAAA,OAAnBG,EAAAA,EAAAA,IAA4Cc,EAAA,CAAAX,IAAAA,OAA5C,WACAH,EAAAA,EAAAA,IAA0Be,EAAA,CAAAZ,IAAAA,Q,WAKhCT,EAAAA,EAAAA,GAWM,MAXN,EAWM,gBAVJD,EAAAA,EAAAA,IASME,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATwCW,EAAAA,OAAOS,YAAU,CAA9BC,EAAIC,M,WAArCzB,EAAAA,EAAAA,IASM,OATDD,MAAM,cAAuDW,IAAKe,GAAvE,EACExB,EAAAA,EAAAA,GAAqB,aAAAY,EAAAA,EAAAA,IAAbY,GAAI,IACZxB,EAAAA,EAAAA,GAMM,OANDF,OAAK,SAAC,OAAqByB,EAAIE,WAAU,4BAA9C,EACER,EAAAA,EAAAA,IAGUC,EAAA,M,kBAFR,IAA8D,CAApCK,EAAIE,aAA9B,WACAnB,EAAAA,EAAAA,IAAsCoB,EAAA,CAAAjB,IAAAA,OADRgB,EAAAA,EAAAA,OAA9BnB,EAAAA,EAAAA,IAA8DqB,EAAA,CAAAlB,IAAAA,Q,KADhE,OAIAT,EAAAA,EAAAA,GAAwD,OAAxD,GAAwDY,EAAAA,EAAAA,IAA/BW,EAAIK,QAAQC,QAAO,QAL9C,QAFF,SAYF7B,EAAAA,EAAAA,GAEM,aADJiB,EAAAA,EAAAA,IAA4Ea,EAAA,CAAjEC,QAAOC,EAAAA,YAAalC,MAAM,QAAQmC,QAAQ,QAArD,C,kBAA4D,IAAK,M,KAAjE,kBAEFhB,EAAAA,EAAAA,IAA6EiB,EAAA,CAA9DC,IAAI,cAAe3B,QAASK,EAAAA,QAAUR,GAAIQ,EAAAA,IAAzD,4B,iCChCOf,MAAM,a,GAIVA,MAAM,e,GAMFA,MAAM,sD,GACNA,MAAM,2D,GAKFA,MAAM,a,GAENA,MAAM,2B,GACJA,MAAM,mB,aAEPE,EAAAA,EAAAA,GAAgB,YAAV,OAAG,G,eAETA,EAAAA,EAAAA,GAAgB,YAAV,OAAG,G,qBAINF,MAAM,gB,GACTE,EAAAA,EAAAA,GAAgB,YAAV,OAAG,G,oCASTA,EAAAA,EAAAA,GAAgB,YAAV,OAAG,G,4CAcV,U,WAKA,M,WAKA,M,GAKFF,MAAM,+B,6IArEnBQ,EAAAA,EAAAA,IAiFY8B,EAAA,CAjFDC,UAAU,MAAMlB,KAAK,M,WAAehB,EAAAA,K,qCAAAA,EAAAA,KAAImC,GAAGC,SAAQP,EAAAA,YAAc,cAAY,GAAxF,CACaQ,QAAM,SACf,EADmBC,aAAO,EAC1BzC,EAAAA,EAAAA,GAGM,OAHA0C,GAAID,EAAS3C,MAAM,mCAAzB,EACEE,EAAAA,EAAAA,GAAkF,MAAlF,GAAkFY,EAAAA,EAAAA,IAAAA,QAAjDT,EAAAA,OAAOW,UAAUX,EAAAA,OAAOa,YAAYH,EAAAA,OAAE,IACvEI,EAAAA,EAAAA,IAAkF0B,EAAA,CAAvExB,KAAK,QAAQyB,MAAA,GAAMC,KAAK,QAAQC,OAAA,GAAQf,QAAK,eAAE5B,EAAAA,MAAI,MAFhE,Q,kBAKF,IAyEM,uBAzENJ,EAAAA,EAAAA,IAyEM,MAzEN,EAyEM,gBAxEJA,EAAAA,EAAAA,IAuEME,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IArEoBC,EAAAA,OAAOmB,YAAU,CAAjClB,EAAOoB,M,WAFjBzB,EAAAA,EAAAA,IAuEM,OAtEJD,MAAM,gCAELW,IAAKe,GAHR,EAKExB,EAAAA,EAAAA,GAAiF,MAAjF,GAAiFY,EAAAA,EAAAA,IAAfY,GAAM,MAAG,IAC3ExB,EAAAA,EAAAA,GAgEM,MAhEN,EAgEM,EA/DJA,EAAAA,EAAAA,GAoDM,OAnDJF,MAAM,oDACCiD,OAAK,SAAAC,MAAW5C,EAAKqB,WAAU,0BAFxC,EAIEzB,EAAAA,EAAAA,GAAwD,MAAxD,GAAwDY,EAAAA,EAAAA,IAA/BR,EAAKwB,QAAQC,QAAO,QAE7C7B,EAAAA,EAAAA,GA6CM,MA7CN,EA6CM,EA5CJA,EAAAA,EAAAA,GA2CM,MA3CN,EA2CM,CA1COG,EAAAA,qBAAqBqB,KAArB,WAAXzB,EAAAA,EAAAA,IAKM,MAAAkD,EAAA,CAJJC,GACAlD,EAAAA,EAAAA,GAA8D,SAAvDmD,SAAA,GAAUC,MAAOhD,EAAKiD,IAAKC,KAAK,SAASC,KAAK,QAArD,UACAC,GACAxD,EAAAA,EAAAA,GAA8D,SAAvDmD,SAAA,GAAUC,MAAOhD,EAAKqD,IAAKH,KAAK,SAASC,KAAK,QAArD,cAJF,qBAOAxD,EAAAA,EAAAA,IAmBM,MAnBN,EAmBM,CAlBJ2D,GACA1D,EAAAA,EAAAA,GAOE,SANAF,MAAM,gBACLsD,MAAOjD,EAAAA,iBAAiBqB,GAAM6B,IAC/BC,KAAK,SACLC,KAAK,OACJI,SAASC,IAAKzD,EAAAA,iBAAiBqB,GAAM6B,IAAMO,EAAEC,OAAOT,KAAtC,EACdU,QAAQF,IAAKzD,EAAAA,iBAAiBqB,GAAM6B,IAAMO,EAAEC,OAAOT,KAAtC,GANhB,WAQAW,GACA/D,EAAAA,EAAAA,GAOE,SANAF,MAAM,gBACLsD,MAAOjD,EAAAA,iBAAiBqB,GAAMiC,IAC/BH,KAAK,SACLC,KAAK,OACJI,SAASC,IAAKzD,EAAAA,iBAAiBqB,GAAMiC,IAAMG,EAAEC,OAAOT,KAAtC,EACdU,QAAQF,IAAKzD,EAAAA,iBAAiBqB,GAAMiC,IAAMG,EAAEC,OAAOT,KAAtC,GANhB,cAXF,IAA4CjD,EAAAA,iBAAiBqB,GAAMwC,YAmC/D,SAfJ/C,EAAAA,EAAAA,IAImB0B,EAAA,CAHjBxB,KAAK,QAEJY,QAAK,GAAEC,EAAAA,kBAAkBR,IAH5B,C,kBAIC,IAAM,M,KAJP,yBAEUrB,EAAAA,qBAAqBqB,OAa3B,SAVJP,EAAAA,EAAAA,IAIe0B,EAAA,CAHbxB,KAAK,QAEJY,QAAK,GAAEC,EAAAA,uBAAuBR,IAHjC,C,kBAIC,IAAE,M,KAJH,0BAEWrB,EAAAA,qBAAqBqB,OAQ5B,SALJP,EAAAA,EAAAA,IAIe0B,EAAA,CAHbxB,KAAK,QAEJY,QAAK,GAAE5B,EAAAA,qBAAqBqB,IAAI,GAHnC,C,kBAIC,IAAE,M,KAJH,0BAEWrB,EAAAA,qBAAqBqB,WA/CtC,IAsDAxB,EAAAA,EAAAA,GAQM,MARN,EAQM,EAPJiB,EAAAA,EAAAA,IAMYgD,EAAA,CALVnE,MAAM,U,WACLqC,IAAKH,EAAAA,SAAQ,IAAKR,EAClB0C,SAAUlC,EAAAA,SAAQ,IAAKR,EACvB2C,MAAK,IAAM3C,cACZ4C,WAAW,WALb,sCA9DN,SADF,KAAqCjE,EAAAA,qB,KAPvC,4B,eAqFF,GACEkE,WAAY,CAAEC,SAAQA,EAAAA,GACtBC,MAAO,CACLlE,GAAI,CACFiD,KAAMkB,OACNC,QAAS,kBAEXjE,QAAS,CACP8C,KAAMkB,OACNC,QAAS,mBAIbC,SAAU,CACRR,WACE,OAAOS,KAAKtE,GAAK,kBACnB,GAEFD,OACE,MAAO,CACLwE,MAAM,EACNC,gBAAgB,EAChBC,GAAI,KACJpE,OAAQ,CACNqE,GAAI,GACJjE,OAAQ,GACRE,SAAU,GACVM,WAAY,CACV0D,EAAG,CACDC,OAAQ,SACRrD,QAAS,GAEXsD,EAAG,CACDD,OAAQ,UACRrD,QAAS,GAEXuD,EAAG,CACDF,OAAQ,SACRrD,QAAS,KAIfwD,qBAAsB,CACpBJ,GAAG,EACHE,GAAG,EACHC,GAAG,GAELE,iBAAkB,CAChBL,EAAG,CACD3B,IAAK,EACLI,IAAK,EACLO,SAAS,GAEXkB,EAAG,CACD7B,IAAK,EACLI,IAAK,EACLO,SAAS,GAEXmB,EAAG,CACD9B,IAAK,EACLI,IAAK,EACLO,SAAS,IAIhB,EACDsB,QAAS,CACPC,OACEZ,KAAKC,MAAO,EACZD,KAAKa,OACN,EACDC,kBAAkBjE,GAChB,IAAI6B,EAAMsB,KAAKjE,OAAOY,WAAWE,GAAM6B,IACnCI,EAAMkB,KAAKjE,OAAOY,WAAWE,GAAMiC,IACvCkB,KAAKU,iBAAiB7D,GAAM6B,IAAMA,EAClCsB,KAAKU,iBAAiB7D,GAAMiC,IAAMA,EAClCkB,KAAKS,qBAAqB5D,IAAQ,CACnC,EACDkE,uBAAuBlE,GACrBmD,KAAKU,iBAAiB7D,GAAMwC,SAAU,EACtC2B,YAAW,KACT,IAAIb,EAAK,IAAIc,UAAW,QAAOjB,KAAKnE,qDAAqDmE,KAAKtE,WAAWmB,SAAYmD,KAAKU,iBAAiB7D,GAAM6B,WAAWsB,KAAKU,iBAAiB7D,GAAMiC,OACxLqB,EAAGe,UAAaC,IACd,IAAIC,EAAWC,KAAKC,MAAMH,EAAI1F,MAC9B0E,EAAGe,UAAY,KACff,EAAGoB,QACHP,YAAW,KACLI,EAAS3F,KACXuE,KAAKwB,OAAOC,KAAM,GAAEzB,KAAKtE,MAAMmB,YAE/BmD,KAAKwB,OAAOE,MAAO,GAAE1B,KAAKtE,MAAMmB,gBAAmBuE,EAASO,WAE9D3B,KAAKS,qBAAqB5D,IAAQ,EAClCmD,KAAKU,iBAAiB7D,GAAMwC,SAAU,CAAtC,GACC,IARH,EAUFc,EAAGyB,QAAWC,IACZ7B,KAAKwB,OAAOE,MAAO,GAAE1B,KAAKtE,MAAMmB,gBAAmBgF,EAAGF,WACtDG,QAAQL,KAAK,2BAA4BI,EAAzC,CAFF,GAIC,GACJ,EACDhB,QACEb,KAAKG,GAAK,IAAIc,UAAW,QAAOjB,KAAKnE,oCAAoCmE,KAAKtE,oBAC9EsE,KAAKG,GAAGe,UAAaC,GAAQnB,KAAK+B,aAAaV,KAAKC,MAAMH,EAAI1F,MAC/D,EACDsG,aAAaC,GAGX,GAFAhC,KAAKE,gBAAiB,EACtBF,KAAKjE,OAASiG,EACThC,KAAKC,KAEV,IACED,KAAKiC,MAAMjC,KAAKT,SAAW,MAAM,GAAG2C,YAAYlC,KAAKjE,OAAOY,WAAW0D,EAAE8B,UACzEnC,KAAKiC,MAAMjC,KAAKT,SAAW,MAAM,GAAG2C,YAAYlC,KAAKjE,OAAOY,WAAW4D,EAAE4B,UACzEnC,KAAKiC,MAAMjC,KAAKT,SAAW,MAAM,GAAG2C,YAAYlC,KAAKjE,OAAOY,WAAW6D,EAAE2B,SAG3E,CAFE,MAAON,GACPC,QAAQJ,MAAMG,EAChB,CACD,EACDO,cACiB,MAAXpC,KAAKG,KACPH,KAAKG,GAAGe,UAAY,KACpBlB,KAAKG,GAAGoB,SAEVvB,KAAKE,gBAAiB,CACxB,GAEFmC,UACA,G,QC/MF,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QFkCA,GACE5C,WAAY,CACV6C,cAAaA,GAEf3C,MAAO,CACL/D,QAAS,CACP8C,KAAMkB,OACNC,QAAS,aAEXpE,GAAI,CACFiD,KAAMkB,OACNC,QAAS,kBAEX/D,OAAQ,CACN4C,KAAM6D,OACN1C,UACE,MAAO,CACLM,GAAI,GACJjE,OAAQ,GACRE,SAAU,GACVM,WAAY,CACV0D,EAAG,CACDC,OAAQ,UAEVC,EAAG,CACDD,OAAQ,WAEVE,EAAG,CACDF,OAAQ,WAIhB,IAGJ7E,OACE,MAAO,CACLgH,WAAW,EAEd,EACD9B,QAAS,CACP+B,cACE1C,KAAKiC,MAAM,eAAerB,MAC5B,IG/EJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QJOA,GACElB,WAAY,CACViD,cAAaA,GAEflH,OACE,MAAO,CACLI,QAAS,GACTsE,GAAI,KACJyC,cAAc,EACd7G,OAAQ,CAAC,EAEZ,EACD4E,QAAS,CACPkC,kBAAkBb,GAChBhC,KAAKjE,OAASiG,CACf,EACDnB,QACEb,KAAKG,GAAK,IAAIc,UAAW,QAAOjB,KAAKnE,iCACrCmE,KAAKG,GAAGe,UAAaC,GAAQnB,KAAK6C,kBAAkBxB,KAAKC,MAAMH,EAAI1F,OACnEuE,KAAKG,GAAG2C,QAAU,IAAM9C,KAAK+C,SAC9B,EACDA,UACE/C,KAAK4C,cAAe,EACpB5C,KAAKgD,YACLhD,KAAKa,OACN,EACDmC,YACiB,MAAXhD,KAAKG,KACPH,KAAKG,GAAGe,UAAY,KACpBlB,KAAKG,GAAG2C,QAAU,KAEtB,GAEFT,UACErC,KAAKa,OACN,EACDoC,UACEjD,KAAKnE,QAAUmE,KAAKkD,OAAOC,OAAOzH,EACnC,EACD0H,YACEpD,KAAKgD,WACP,GKpDF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASK,KAEpE,O","sources":["webpack://gpm-admin/./src/components/IDMS/VbEnergyMonitor/DashboardView.vue","webpack://gpm-admin/./src/components/IDMS/VbEnergyMonitor/StatusCard.vue","webpack://gpm-admin/./src/components/IDMS/VbEnergyMonitor/DetailView.vue","webpack://gpm-admin/./src/components/IDMS/VbEnergyMonitor/DetailView.vue?855c","webpack://gpm-admin/./src/components/IDMS/VbEnergyMonitor/StatusCard.vue?f96b","webpack://gpm-admin/./src/components/IDMS/VbEnergyMonitor/DashboardView.vue?2218"],"sourcesContent":["<template>\r\n  <div class=\"fade-in bg-light\">\r\n    <div class=\"row g-1\">\r\n      <status-card-vue\r\n        :edge_ip=\"edge_ip\"\r\n        class=\"col-md-4\"\r\n        v-for=\"(data,ip) in veData\"\r\n        :key=\"ip\"\r\n        :ip=\"ip\"\r\n        :veData=\"data\"\r\n      ></status-card-vue>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport StatusCardVue from './StatusCard.vue';\r\nexport default {\r\n  components: {\r\n    StatusCardVue\r\n  },\r\n  data() {\r\n    return {\r\n      edge_ip: \"\",\r\n      ws: null,\r\n      wsConnecting: false,\r\n      veData: {}\r\n    }\r\n  },\r\n  methods: {\r\n    MessageDataHandle(vm) {\r\n      this.veData = vm;\r\n    },\r\n    WsIni() {\r\n      this.ws = new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy`);\r\n      this.ws.onmessage = (evt) => this.MessageDataHandle(JSON.parse(evt.data));\r\n      this.ws.onclose = () => this.WsRetry();\r\n    },\r\n    WsRetry() {\r\n      this.wsConnecting = true;\r\n      this.WsDestory();\r\n      this.WsIni();\r\n    },\r\n    WsDestory() {\r\n      if (this.ws != null) {\r\n        this.ws.onmessage = null;\r\n        this.ws.onclose = null;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.WsIni();\r\n  },\r\n  created() {\r\n    this.edge_ip = this.$route.params.ip\r\n  },\r\n  unmounted() {\r\n    this.WsDestory();\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>","<template>\r\n  <div class=\"ve-module-status d-flex flex-column px-1 py-1\">\r\n    <div class=\"bg-dark\">\r\n      <!-- 狀態TITLE -->\r\n      <div class=\"info d-flex flex-row px-2 py-2\">\r\n        <div class=\"flex-fill d-flex justify-content-start\">\r\n          <span>EQ :</span>\r\n          <span>{{veData.EqName}}</span>\r\n          <span>UNIT :</span>\r\n          <span>{{veData.UnitName}}</span>\r\n        </div>\r\n        <div class>\r\n          <span>{{ip}}</span>\r\n          <el-icon size=\"18px\">\r\n            <CircleCheck v-if=\"Connected\"></CircleCheck>\r\n            <Warning v-else></Warning>\r\n          </el-icon>\r\n        </div>\r\n      </div>\r\n      <!-- 三軸監控狀態ICON -->\r\n      <div class=\"d-flex flex-row justify-content-center py-2\">\r\n        <div class=\"axis-status\" v-for=\"(obj,axis) in veData.AxisStatus\" :key=\"axis\">\r\n          <span>{{axis}}</span>\r\n          <div class=\"icon\" v-bind:class=\"obj.IsOutOfSPC? 've-warning':'ve-normal'\">\r\n            <el-icon>\r\n              <CircleCheckFilled v-if=\"!obj.IsOutOfSPC\"></CircleCheckFilled>\r\n              <WarningFilled v-else></WarningFilled>\r\n            </el-icon>\r\n            <span class=\"ve-value\">{{obj.veValue.toFixed(3)}}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- ENTER Button -->\r\n      <div>\r\n        <b-button @click=\"EnterHandle\" class=\"w-100\" variant=\"dark\">ENTER</b-button>\r\n      </div>\r\n      <DetailViewVue ref=\"detail_view\" :edge_ip=\"edge_ip\" :ip=\"ip\"></DetailViewVue>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport DetailViewVue from './DetailView.vue';\r\n\r\nexport default {\r\n  components: {\r\n    DetailViewVue\r\n  },\r\n  props: {\r\n    edge_ip: {\r\n      type: String,\r\n      default: '127.0.0.1'\r\n    },\r\n    ip: {\r\n      type: String,\r\n      default: '123.213.213.23'\r\n    },\r\n    veData: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          IP: \"\",\r\n          EqName: \"\",\r\n          UnitName: \"\",\r\n          AxisStatus: {\r\n            X: {\r\n              status: 'normal'\r\n            },\r\n            Y: {\r\n              status: 'warning'\r\n            },\r\n            Z: {\r\n              status: 'danger'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      Connected: true,\r\n    }\r\n  },\r\n  methods: {\r\n    EnterHandle() {\r\n      this.$refs['detail_view'].Show();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style >\r\n.ve-module-status {\r\n  border: 1px solid black;\r\n  border-radius: 8px;\r\n  box-shadow: -2px 1px 12px 3px rgb(15, 15, 15);\r\n}\r\n.axis-status {\r\n  width: 120px;\r\n  height: 120px;\r\n  padding: 0;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n\r\n.axis-status .ve-value {\r\n  position: absolute;\r\n}\r\n\r\n.axis-status span {\r\n  font-size: large;\r\n  color: white;\r\n  padding-top: 30px;\r\n}\r\n.axis-status div {\r\n  padding: 0;\r\n  margin: 0 auto;\r\n  font-size: 54px;\r\n}\r\n.axis-status .icon {\r\n  /* box-shadow: 10px 10px 10px 10px black; */\r\n  padding-top: 5px;\r\n}\r\n.axis-status:hover {\r\n  background-color: rgb(33, 53, 70);\r\n  cursor: pointer;\r\n}\r\n\r\n.info {\r\n  color: white;\r\n  border-block-end: 2px solid grey;\r\n}\r\n.ve-normal {\r\n  color: rgb(72, 215, 136);\r\n}\r\n.ve-warning {\r\n  color: orange;\r\n}\r\n.ve-danger {\r\n  color: red;\r\n}\r\n</style>","<template>\r\n  <el-drawer direction=\"btt\" size=\"92%\" v-model=\"show\" @closed=\"CloseHandle\" :show-close=\"false\">\r\n    <template #header=\"{ titleId}\">\r\n      <div :id=\"titleId\" class=\"ve-detail-title d-flex flex-row\">\r\n        <div class=\"flex-fill\">{{`振動能量-${veData.EqName}/${veData.UnitName}(${ip})`}}</div>\r\n        <el-button size=\"large\" plain icon=\"close\" circle @click=\"show=false\"></el-button>\r\n      </div>\r\n    </template>\r\n    <div class=\"h-100 w-100\" v-loading=\"!wsDataRecieved\">\r\n      <div\r\n        class=\"axis-infos d-flex flex-column\"\r\n        v-for=\"(data , axis) in veData.AxisStatus\"\r\n        :key=\"axis\"\r\n      >\r\n        <div class=\"axis-title d-flex justify-content-start w-100 px-3\">{{axis}} 軸向</div>\r\n        <div class=\"content d-flex flex-row justify-content-start h-100 row\">\r\n          <div\r\n            class=\"value-display d-flex flex-column col-md-3 bg-dark\"\r\n            v-bind:style=\"{ color: data.IsOutOfSPC? 'red':'rgb(0, 255, 0)'  }\"\r\n          >\r\n            <div class=\"flex-fill\">{{data.veValue.toFixed(3)}}</div>\r\n            <!-- 閥值 -->\r\n            <div class=\"threshold-setting w-100\">\r\n              <div class=\"d-flex flex-row\">\r\n                <div v-if=\"ThresholdSettinglock[axis]\">\r\n                  <span>UCL</span>\r\n                  <input disabled :value=\"data.ucl\" type=\"number\" step=\"0.01\" />\r\n                  <span>LCL</span>\r\n                  <input disabled :value=\"data.lcl\" type=\"number\" step=\"0.01\" />\r\n                </div>\r\n                <!-- 設定中顯示 -->\r\n                <div class=\"setting-mode\" v-else v-loading=\"ThresholdSetting[axis].loading\">\r\n                  <span>UCL</span>\r\n                  <input\r\n                    class=\"setting-input\"\r\n                    :value=\"ThresholdSetting[axis].ucl\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    @change=\"(e)=>{ThresholdSetting[axis].ucl = e.target.value}\"\r\n                    @keyup=\"(e)=>{ThresholdSetting[axis].ucl = e.target.value}\"\r\n                  />\r\n                  <span>LCL</span>\r\n                  <input\r\n                    class=\"setting-input\"\r\n                    :value=\"ThresholdSetting[axis].lcl\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    @change=\"(e)=>{ThresholdSetting[axis].lcl = e.target.value}\"\r\n                    @keyup=\"(e)=>{ThresholdSetting[axis].lcl = e.target.value}\"\r\n                  />\r\n                </div>\r\n                <el-button\r\n                  size=\"small\"\r\n                  v-show=\"ThresholdSettinglock[axis]\"\r\n                  @click=\"UnlockClickHandle(axis)\"\r\n                >Unlock</el-button>\r\n                <el-button\r\n                  size=\"small\"\r\n                  v-show=\"!ThresholdSettinglock[axis]\"\r\n                  @click=\"SettingThersHoldHandle(axis)\"\r\n                >儲存</el-button>\r\n                <el-button\r\n                  size=\"small\"\r\n                  v-show=\"!ThresholdSettinglock[axis]\"\r\n                  @click=\"ThresholdSettinglock[axis]=true\"\r\n                >取消</el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"charting flex-fill col-md-6\">\r\n            <GPMChart\r\n              class=\"vechart\"\r\n              :ref=\"chart_id+'_'+axis\"\r\n              :chart_id=\"chart_id+'_'+axis\"\r\n              :title=\"`[${axis}]軸向振動能量趨勢圖`\"\r\n              yAxisLabel=\"振動能量(G)\"\r\n            ></GPMChart>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </el-drawer>\r\n</template>\r\n<script>\r\nimport GPMChart from '@/components/Charting/GPMChart.vue'\r\nexport default {\r\n  components: { GPMChart },\r\n  props: {\r\n    ip: {\r\n      type: String,\r\n      default: '123.213.213.23'\r\n    },\r\n    edge_ip: {\r\n      type: String,\r\n      default: '123.213.213.23'\r\n    },\r\n\r\n  },\r\n  computed: {\r\n    chart_id() {\r\n      return this.ip + '_ve_detail_chart';\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      wsDataRecieved: false,\r\n      ws: null,\r\n      veData: {\r\n        IP: \"\",\r\n        EqName: \"\",\r\n        UnitName: \"\",\r\n        AxisStatus: {\r\n          X: {\r\n            status: 'normal',\r\n            veValue: 0\r\n          },\r\n          Y: {\r\n            status: 'warning',\r\n            veValue: 0\r\n          },\r\n          Z: {\r\n            status: 'danger',\r\n            veValue: 0\r\n          }\r\n        }\r\n      },\r\n      ThresholdSettinglock: {\r\n        X: true,\r\n        Y: true,\r\n        Z: true,\r\n      },\r\n      ThresholdSetting: {\r\n        X: {\r\n          ucl: 1,\r\n          lcl: 1,\r\n          loading: false\r\n        },\r\n        Y: {\r\n          ucl: 1,\r\n          lcl: 1,\r\n          loading: false\r\n        },\r\n        Z: {\r\n          ucl: 1,\r\n          lcl: 1,\r\n          loading: false\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    Show() {\r\n      this.show = true\r\n      this.WsIni();\r\n    },\r\n    UnlockClickHandle(axis) {\r\n      let ucl = this.veData.AxisStatus[axis].ucl;\r\n      let lcl = this.veData.AxisStatus[axis].lcl;\r\n      this.ThresholdSetting[axis].ucl = ucl;\r\n      this.ThresholdSetting[axis].lcl = lcl;\r\n      this.ThresholdSettinglock[axis] = false;\r\n    },\r\n    SettingThersHoldHandle(axis) {\r\n      this.ThresholdSetting[axis].loading = true;\r\n      setTimeout(() => {\r\n        let ws = new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?ip=${this.ip}&axis=${axis}&ucl=${this.ThresholdSetting[axis].ucl}&lcl=${this.ThresholdSetting[axis].lcl}`);\r\n        ws.onmessage = (evt) => {\r\n          var response = JSON.parse(evt.data);\r\n          ws.onmessage = null;\r\n          ws.close();\r\n          setTimeout(() => {\r\n            if (response.data) {\r\n              this.$toast.info(`${this.ip} ${axis}軸閥值設定完成`);\r\n            } else {\r\n              this.$toast.error(`${this.ip} ${axis}軸閥值設定失敗!\\r\\n${response.message}`);\r\n            }\r\n            this.ThresholdSettinglock[axis] = true;\r\n            this.ThresholdSetting[axis].loading = false;\r\n          }, 500)\r\n        };\r\n        ws.onerror = (er) => {\r\n          this.$toast.error(`${this.ip} ${axis}軸閥值設定失敗!\\r\\n${er.message}`);\r\n          console.info('設定VE閥值時發生websocket error', er);\r\n        }\r\n      }, 50)\r\n    },\r\n    WsIni() {\r\n      this.ws = new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy?ip=${this.ip}&type=charting`);\r\n      this.ws.onmessage = (evt) => this.WsDataHandle(JSON.parse(evt.data));\r\n    },\r\n    WsDataHandle(vm) {\r\n      this.wsDataRecieved = true;\r\n      this.veData = vm;\r\n      if (!this.show)\r\n        return;\r\n      try {\r\n        this.$refs[this.chart_id + '_X'][0].UpdateChart(this.veData.AxisStatus.X.charting);\r\n        this.$refs[this.chart_id + '_Y'][0].UpdateChart(this.veData.AxisStatus.Y.charting);\r\n        this.$refs[this.chart_id + '_Z'][0].UpdateChart(this.veData.AxisStatus.Z.charting);\r\n      } catch (er) {\r\n        console.error(er);\r\n      }\r\n    },\r\n    CloseHandle() {\r\n      if (this.ws != null) {\r\n        this.ws.onmessage = null;\r\n        this.ws.close();\r\n      }\r\n      this.wsDataRecieved = false;\r\n    }\r\n  },\r\n  mounted() {\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.ve-detail-title {\r\n  text-align: left;\r\n  font-size: 27px;\r\n  letter-spacing: 0.2rem;\r\n  font-weight: bold;\r\n}\r\n.axis-title {\r\n  font-size: 20px;\r\n  background-color: rgb(56, 56, 56);\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n.value-display {\r\n  font-size: 50px;\r\n  padding: 30px;\r\n  font-weight: bold;\r\n  border-radius: 10px;\r\n}\r\n\r\n.threshold-setting {\r\n  height: 30px;\r\n  color: white;\r\n  font-size: medium;\r\n  border: 1px dashed #33485d;\r\n  padding: 4px;\r\n}\r\n\r\n.threshold-setting input {\r\n  width: 89px;\r\n  height: 25px;\r\n  margin: auto 4px;\r\n  text-align: center;\r\n}\r\n.threshold-setting input:disabled {\r\n  background-color: #33485d;\r\n  color: rgb(212, 212, 212);\r\n}\r\n\r\n.setting-mode input {\r\n  background-color: black;\r\n  color: white;\r\n}\r\n\r\n.threshold-setting .el-button {\r\n  margin: 0;\r\n}\r\n.axis-infos {\r\n  background-color: #33485d;\r\n  color: white;\r\n  height: 34%;\r\n\r\n  border-radius: 8px;\r\n  box-shadow: -2px 1px 18px 5px rgb(58 58 58);\r\n}\r\n\r\n.vechart {\r\n  height: 95%;\r\n}\r\n</style>","import { render } from \"./DetailView.vue?vue&type=template&id=bb963352\"\nimport script from \"./DetailView.vue?vue&type=script&lang=js\"\nexport * from \"./DetailView.vue?vue&type=script&lang=js\"\n\nimport \"./DetailView.vue?vue&type=style&index=0&id=bb963352&lang=css\"\n\nimport exportComponent from \"D:\\\\專案\\\\gmm\\\\Code\\\\gmm.projects\\\\web.service\\\\log_service_frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./StatusCard.vue?vue&type=template&id=12c4bf34\"\nimport script from \"./StatusCard.vue?vue&type=script&lang=js\"\nexport * from \"./StatusCard.vue?vue&type=script&lang=js\"\n\nimport \"./StatusCard.vue?vue&type=style&index=0&id=12c4bf34&lang=css\"\n\nimport exportComponent from \"D:\\\\專案\\\\gmm\\\\Code\\\\gmm.projects\\\\web.service\\\\log_service_frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DashboardView.vue?vue&type=template&id=6c5c3ab4\"\nimport script from \"./DashboardView.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\專案\\\\gmm\\\\Code\\\\gmm.projects\\\\web.service\\\\log_service_frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_Fragment","_renderList","$data","data","ip","_createBlock","_component_status_card_vue","edge_ip","key","veData","_hoisted_5","_toDisplayString","$props","EqName","_hoisted_6","UnitName","_createVNode","_component_el_icon","size","_component_CircleCheck","_component_Warning","AxisStatus","obj","axis","IsOutOfSPC","_component_WarningFilled","_component_CircleCheckFilled","veValue","toFixed","_component_b_button","onClick","$options","variant","_component_DetailViewVue","ref","_component_el_drawer","direction","$event","onClosed","header","titleId","id","_component_el_button","plain","icon","circle","style","color","_hoisted_9","_hoisted_10","disabled","value","ucl","type","step","_hoisted_12","lcl","_hoisted_15","onChange","e","target","onKeyup","_hoisted_17","loading","_component_GPMChart","chart_id","title","yAxisLabel","components","GPMChart","props","String","default","computed","this","show","wsDataRecieved","ws","IP","X","status","Y","Z","ThresholdSettinglock","ThresholdSetting","methods","Show","WsIni","UnlockClickHandle","SettingThersHoldHandle","setTimeout","WebSocket","onmessage","evt","response","JSON","parse","close","$toast","info","error","message","onerror","er","console","WsDataHandle","vm","$refs","UpdateChart","charting","CloseHandle","mounted","__exports__","DetailViewVue","Object","Connected","EnterHandle","StatusCardVue","wsConnecting","MessageDataHandle","onclose","WsRetry","WsDestory","created","$route","params","unmounted","render"],"sourceRoot":""}