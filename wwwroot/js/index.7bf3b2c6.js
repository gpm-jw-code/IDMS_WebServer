(function(){var e={6700:function(e,t,a){var l={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=o,e.exports=s,s.id=6700},2785:function(e,t,a){"use strict";var l=a(9242),s=a(936),o=a(4348),i=a(2748),n=(a(4415),a(3396)),r=a(7139);const d={id:"breadcrumb",sticky:""},u={key:0,class:"navbar navbar-expand-lg bg-primary"},c={class:"navbar-brand",href:"/"},m={style:{"font-size":"30px"}},h=(0,n._)("div",{class:"navbar-brand"},"EDGES VIEW",-1),p={key:1,class:"navbar navbar-expand-lg bg-primary"},g={class:"navbar-brand",href:"/"},w={style:{"font-size":"30px"}},f={class:"navbar-brand"},_={class:"navbar-toggler bg-primary",ref:"toggle_button"},y=(0,n._)("i",{class:"bi bi-list"},null,-1),b=[y],v={class:"collapse navbar-collapse",id:"navbarNav"},S={class:"fade-in navbar-nav"},x=["onClick"],k={class:"router-view-content"};function I(e,t,a,s,o,i){const y=(0,n.up)("el-backtop"),I=(0,n.up)("el-tag"),D=(0,n.up)("el-popover"),C=(0,n.up)("router-view"),T=(0,n.up)("NotificationIconVue"),W=(0,n.up)("ReleaseNote"),V=(0,n.up)("ChatIconVue"),P=(0,n.Q2)("b-toggle");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.wy)((0,n._)("div",d,[(0,n.Wm)(y,{right:30,bottom:150}),o.showNavbar?((0,n.wg)(),(0,n.iD)("nav",p,[(0,n._)("a",g,[(0,n._)("span",w,(0,r.zw)(o.LogoText),1)]),(0,n.Wm)(D,{content:o.EdgeIP},{reference:(0,n.w5)((()=>[(0,n._)("div",f,[(0,n.Wm)(I,{onClick:t[0]||(t[0]=e=>i.routerHandle("/EdgeMain")),size:"large",effect:"dark"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(o.EdgeName?o.EdgeName.toUpperCase():""),1)])),_:1})])])),_:1},8,["content"]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("button",_,b)),[[P,void 0,void 0,{navbarNav:!0}]]),(0,n._)("div",v,[(0,n._)("ul",S,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.routes,(e=>((0,n.wg)(),(0,n.iD)("li",{class:"nav-item",key:e.path},[(0,n._)("a",{class:(0,r.C_)(["nav-link",e.name==o.seletedRouteName?"route-link-selected":"route-link-unselected"]),onClick:t=>i.routerHandle(e.path)},(0,r.zw)(e.name),11,x)])))),128))])])])):((0,n.wg)(),(0,n.iD)("nav",u,[(0,n._)("a",c,[(0,n._)("span",m,(0,r.zw)(o.LogoText),1)]),h]))],512),[[l.F8,o.breadcrumb_show]]),(0,n.Wm)(C,null,{default:(0,n.w5)((({Component:e})=>[(0,n._)("div",k,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))])])),_:1}),(0,n.wy)((0,n.Wm)(T,{ref:"alarm_noti_icon",edge_ip:o.EdgeIP},null,8,["edge_ip"]),[[l.F8,o.isNotEntryPAGE]]),(0,n.Wm)(W),(0,n.Wm)(V)],64)}var D={get host(){return window.location.protocol+"//"+window.location.host},get websocket_host(){return this.host.replace("http","ws")},get idms_websocket_host(){return window.location.protocol.replace("http","ws")+"//"+window.location.hostname+":44332"},mode:"gpm"};console.info(window.location.protocol.replace("http","ws")+"//"+window.location.hostname+":44332"),console.info(D.host),console.info("websocket_host",D.websocket_host),console.info("idms_websocket_host",D.idms_websocket_host);var C=a(2483);const T={class:"network-status"};function W(e,t,a,l,s,o){const i=(0,n.up)("el-button"),d=(0,n.up)("el-tooltip");return(0,n.wg)(),(0,n.iD)("div",T,[(0,n.Wm)(d,{class:"box-item",effect:"dark",content:`${s.ping} ms`,placement:a.toolTipPosition},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{onClick:o.Click,class:"my-s",size:a.size,round:"",style:(0,r.j5)([o.style]),type:s.success?"success":"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(s.displayPingTime?s.ping+"ms":""),1)])),_:1},8,["onClick","size","style","type"])])),_:1},8,["content","placement"])])}var V={props:{ip:{type:String,default:"127.0.0.1"},successColor:{type:String,default:"#92cf35"},failColor:{type:String,default:"rgb(211, 40, 40)"},toolTipPosition:{type:String,default:"right"},host_route:{type:String,default:`${D.websocket_host}/ping-ip`},size:{type:String,default:"small"}},data(){return{success:"unknown",ping:-1,displayPingTime:!1,websocket:null}},computed:{style(){return{backgroundColor:"unknown"==this.success?"orange":this.success?this.successColor:this.failColor,width:this.displayPingTime?"60px":"auto",boxShadow:`2px -2px 12px 0.001rem ${"unknown"==this.success?"orange":this.success?this.successColor:this.failColor}`}}},methods:{Click(){this.displayPingTime=!this.displayPingTime}},mounted(){this.websocket=new WebSocket(this.host_route+`?ip=${this.ip}`),this.websocket.onerror=()=>{},this.websocket.onmessage=e=>{var t=JSON.parse(e.data);this.success=t.Success,this.ping=t.PingTime}},unmounted(){this.websocket.onerror=null,this.websocket.onmessage=null,this.websocket.close()}},P=a(89);const U=(0,P.Z)(V,[["render",W],["__scopeId","data-v-e3fca960"]]);var O=U;var M=a(6265),N=a.n(M);N().defaults.baseURL=D.host;var z=a(6797),j=a.n(z);const $={class:"fade-in"},E={class:"d-flex flex-row px-2 py-2 my-2 w-100 border-bottom"},A={class:"d-flex justify-content-start flex-fill w-50"},H={class:"d-flex justify-content-end w-50"},R=(0,n.Uk)("模型訓練"),Q=(0,n.Uk)("??");function L(e,t,a,s,o,i){const r=(0,n.up)("el-radio-button"),d=(0,n.up)("el-radio-group"),u=(0,n.up)("el-button"),c=(0,n.up)("DignoseDataListView"),m=(0,n.up)("DignoseDataChartView"),h=(0,n.up)("ModelTrainerVue");return(0,n.wg)(),(0,n.iD)("div",$,[(0,n._)("div",E,[(0,n._)("div",A,[(0,n.Wm)(d,{modelValue:o.display_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.display_mode=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{size:"small",label:"LIST"}),(0,n.Wm)(r,{size:"small",label:"CHART"})])),_:1},8,["modelValue"])]),(0,n._)("div",H,[(0,n.Wm)(u,{onClick:i.Test,size:"small"},{default:(0,n.w5)((()=>[R])),_:1},8,["onClick"])])]),(0,n.wy)((0,n.Wm)(c,{edgeIP:o.EdgeIP},null,8,["edgeIP"]),[[l.F8,"LIST"==o.display_mode]]),(0,n.wy)((0,n.Wm)(m,{edgeIP:o.EdgeIP,pause:"LIST"==o.display_mode},{default:(0,n.w5)((()=>[Q])),_:1},8,["edgeIP","pause"]),[[l.F8,"CHART"==o.display_mode]]),(0,n.Wm)(h,{ref:"modelTrainer"},null,512)])}const F=["id"],q={class:"d-flex flex-column main-content"},Y={class:"training-content flex-fill d-flex flex-column justify-content-start"},Z={class:"step-content justify-content-start"},J=(0,n._)("h5",null,"選擇模組",-1),G={style:{height:"120px","overflow-y":"scroll","margin-left":"0"},class:"d-flex flex-column justify-content-start border px-2"},B={class:"step-content d-flex flex-column justify-content-start"},K=(0,n._)("h5",null,"命名模型",-1),X={class:"step-content d-flex flex-column justify-content-start"},ee=(0,n._)("h5",null,"設定錄製時間",-1),te={class:"step-content-end d-flex flex-column justify-content-start"},ae=(0,n.Uk)("START"),le={class:"step-content d-flex flex-column justify-content-start"},se=(0,n._)("h5",null,"訓練模組狀態",-1),oe={class:"recorder d-flex flex-row justify-content-start"},ie={class:"d-flex flex-column"},ne=(0,n._)("span",null,"狀態",-1),re={class:"d-flex flex-column"},de=(0,n._)("span",null,"時間設定",-1),ue={class:"duration-setting"},ce={class:"d-flex flex-column"},me=(0,n._)("span",null,"累計時間",-1),he={class:"count-down px-3 py-0"};function pe(e,t,a,l,s,o){const i=(0,n.up)("el-checkbox"),d=(0,n.up)("el-checkbox-group"),u=(0,n.up)("el-input"),c=(0,n.up)("el-input-number"),m=(0,n.up)("el-divider"),h=(0,n.up)("b-button"),p=(0,n.up)("el-table-column"),g=(0,n.up)("el-table"),w=(0,n.up)("el-button"),f=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(f,{onClosed:o.CloseHandle,modelValue:s.Show,"onUpdate:modelValue":t[3]||(t[3]=e=>s.Show=e),direction:"rtl",size:o.drawer_size,title:"Model Training","z-index":4100},{header:(0,n.w5)((({classid:e})=>[(0,n._)("div",{id:e,class:"w-100",style:{"margin-top":"120px",height:"20px"}},null,8,F)])),default:(0,n.w5)((()=>[(0,n._)("div",q,[(0,n._)("div",Y,[(0,n._)("div",Z,[J,(0,n._)("div",G,[(0,n.Wm)(d,{disabled:s.IsIDMSRecording,modelValue:s.SelectedIPList,"onUpdate:modelValue":t[0]||(t[0]=e=>s.SelectedIPList=e),onChange:o.SensorSelectsChanged},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.IPList,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"d-flex flex-column justify-content-start",key:e},[(0,n.Wm)(i,{label:e},null,8,["label"])])))),128))])),_:1},8,["disabled","modelValue","onChange"])])]),(0,n._)("div",B,[K,(0,n.Wm)(u,{disabled:s.IsIDMSRecording,autocomplete:"on",placeholder:"模型名稱",modelValue:s.ModelName,"onUpdate:modelValue":t[1]||(t[1]=e=>s.ModelName=e)},null,8,["disabled","modelValue"])]),(0,n._)("div",X,[ee,(0,n.Wm)(c,{disabled:s.IsIDMSRecording,min:"5",modelValue:s.RecordPeriod,"onUpdate:modelValue":t[2]||(t[2]=e=>s.RecordPeriod=e),class:"w-100"},null,8,["disabled","modelValue"])]),(0,n.Wm)(m),(0,n._)("div",te,[(0,n.Wm)(h,{style:{height:"4rem"},variant:"primary",disabled:!o.Start_Enable,onClick:o.SendTrainingRequest},{default:(0,n.w5)((()=>[ae])),_:1},8,["disabled","onClick"])])]),(0,n._)("div",null,[(0,n.Wm)(g,{data:s.TrainStates,height:"180px"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"IP",prop:"IP"}),(0,n.Wm)(p,{label:"請求模型名稱",prop:"ModelName"}),(0,n.Wm)(p,{label:"狀態",prop:"State"}),(0,n.Wm)(p,{label:"錄製時間",prop:"RecordPeriod"}),(0,n.Wm)(p,{label:"Remain Time",prop:"RemainTime"}),(0,n.Wm)(p,{label:"Message",prop:"Message"})])),_:1},8,["data"])]),(0,n._)("div",le,[se,(0,n._)("div",oe,[(0,n._)("div",ie,[ne,(0,n.Wm)(w,{effect:"dark",type:s.IsIDMSRecording?"danger":"info",size:"normal"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(s.IsIDMSRecording?"訓練中":"IDLE"),1)])),_:1},8,["type"])]),(0,n._)("div",re,[de,(0,n._)("div",ue,(0,r.zw)(s.IDMSRecordPeriod)+" 秒",1)]),(0,n._)("div",ce,[me,(0,n._)("div",he,(0,r.zw)(s.CountDown),1)])])])])])),_:1},8,["onClosed","modelValue","size"])}const ge=D.idms_websocket_host;async function we(e){return await new Promise(((t,a)=>{var l=new WebSocket(`${D.websocket_host}/ModuleInfoGet?edgeIP=${e}`);l.onopen=()=>l.send("GetInfos"),l.onmessage=e=>{l.close(),t(JSON.parse(e.data))},l.onerror=e=>a(e)}))}async function fe(e){return await new Promise(((t,a)=>{var l=D.websocket_host;console.info("GetDignoseDataListWsInstance",e);var s=new WebSocket(`${l}/Dignose?type=list&edgeIP=${e}`);s.onopen=()=>t(s),s.onerror=e=>a(e)}))}async function _e(e,t,a="HS"){var l=D.websocket_host;return console.info("GetTrendchartWsInstance",e),await new Promise(((s,o)=>{var i=new WebSocket(`${l}/Dignose?edgeIP=${e}&type=chart&number=90&sensorIP=${t}&chart_type=${a}`);i.onopen=()=>s(i),i.onerror=()=>o(null)}))}async function ye(e,t="ip"){var a=void 0==e?ge:`ws://${e}:44332`;return await new Promise(((e,l)=>{var s=new WebSocket(`${a}/Diagnose/ModelInfo?StatesMonitor=FALSE`);s.onopen=()=>{s.send(`GIVEMEINFO,${t}`)},s.onmessage=t=>{const a=JSON.parse(t.data);var l=a.EQ,o=a.UNIT,i=a.modelData;s.close(),e({EQ:l,UNIT:o,modelData:i})},s.onerror=e=>{l(e)}}))}async function be(e,t){var a=void 0==e?ge:`ws://${e}:44332`;return await new Promise(((e,l)=>{var s=new WebSocket(`${a}/Settings?Get=DignoseThresholds&IP=${t}`);s.onmessage=t=>{var a=JSON.parse(t.data);s.close(),e(a)},s.onerror=e=>l(e)}))}async function ve(e,t,a){var l=void 0==e?ge:`ws://${e}:44332`;return await new Promise(((e,s)=>{var o=new WebSocket(`${l}/Settings?IP=${t}&DignoseWarningThres=${a}`);o.onmessage=t=>{o.close(),e(JSON.parse(t.data))},o.onerror=e=>s(e)}))}async function Se(e,t,a){var l=void 0==e?ge:`ws://${e}:44332`;return await new Promise(((e,s)=>{var o=new WebSocket(`${l}/Settings?IP=${t}&DignoseAlarmThres=${a}`);o.onmessage=t=>{o.close(),e(JSON.parse(t.data))},o.onerror=e=>s(e)}))}async function xe(e,t,a,l){var s=void 0==e?ge:`ws://${e}:44332`;return await new Promise(((e,o)=>{var i=new WebSocket(`${s}/Diagnose/ModelInfo`);i.onopen=()=>{i.send(JSON.stringify({Action:l?"Enable":"Disable",IP:t,Model_Name:a}))},i.onmessage=t=>{i.close(),e(JSON.parse(t.data))},i.onerror=e=>o(e)}))}async function ke(e,t,a){var l=void 0==e?ge:`ws://${e}:44332`;return await new Promise(((e,s)=>{var o=new WebSocket(`${l}/Diagnose/ModelInfo`);o.onopen=()=>{o.send(JSON.stringify({Action:"Delete",IP:t,Model_Name:a}))},o.onmessage=t=>{o.close(),e(JSON.parse(t.data))},o.onerror=e=>s(e)}))}var Ie={data(){return{Show:!1,IPList:[],SelectedIPList:[],ModelName:"",RecordPeriod:10,websocket:null,TrainStates:[],edgeIP:"",IsIDMSRecording:!1,CountDown:"00:00:00",IDMSRecordPeriod:10}},components:{},computed:{Start_Enable(){return!this.IsIDMSRecording&&0!==this.SelectedIPList.length&&""!==this.ModelName&&0!==this.RecordPeriod},TrainingReqObj(){return{IPList:this.SelectedIPList,ModelName:this.ModelName,RecordPeriod:this.RecordPeriod}},drawer_size(){return window.innerWidth<500?"100%":"60%"}},methods:{ModuleChangeHandle(e){console.info("hi",e)},ShowUp(e){this.Show=!0,setTimeout((async()=>{this.IPList=[];let t=await we(e);t.forEach((e=>{this.IPList.push(e.IP)})),this.edgeIP=e,this.WebsocketConnect()}),100)},CloseHandle(){null!=this.websocket&&this.websocket.close()},WebsocketConnect(){this.websocket=new WebSocket(`ws://${this.edgeIP}:44332/Model_Training`),this.websocket.onopen=()=>{this.$toast.info("Connected"),this.websocket.send("ModuleUpdate-"+JSON.stringify(this.SelectedIPList))},this.websocket.onmessage=e=>this.TrainingStatusHandle(JSON.parse(e.data)),this.websocket.onerror=e=>{console.error(e),this.$toast.error("發生了一些錯誤(連線異常)",{duration:2500,position:"top"})}},SensorSelectsChanged(){this.websocket.send("ModuleUpdate-"+JSON.stringify(this.SelectedIPList))},SendTrainingRequest(){this.websocket.send(JSON.stringify(this.TrainingReqObj)),this.$toast.info("模型訓練請求已送出!")},TrainingStatusHandle(e){this.IsIDMSRecording=e.isRecoding,this.TrainStates=e.trainStates,this.CountDown=e.recorderCountDownText,this.IDMSRecordPeriod=e.RecordPeriod}},mounted(){},beforeMount(){null!=this.websocket&&this.websocket.close()}};const De=(0,P.Z)(Ie,[["render",pe]]);var Ce=De;const Te={class:"dignose-list-view px-2"},We={class:"my-2 d-flex flex-row"},Ve={class:"fade-in d-flex flex-row row dignose-detail-info"},Pe={class:"col-sm-9 row g-0"},Ue={class:"d-flex flex-row col-lg-2"},Oe=(0,n._)("div",{class:"item-name"},"當前模型",-1),Me={class:"d-flex col-lg-2"},Ne=(0,n._)("div",{class:"item-name warning-threshold-lab"},"Warning Threshold",-1),ze={class:"d-flex col-lg-2"},je=(0,n._)("div",{class:"item-name alarm-threshold-lab"},"Alarm Threshold",-1),$e={class:"px-0 py-0 row g-0 col-md-2 dig-actions flex-fill"},Ee={class:"col-md-3"},Ae=(0,n.Uk)("模型列表 "),He={class:"col-md-3"},Re=(0,n.Uk)("Raw Data "),Qe=(0,n.Uk)("即時圖表 "),Le={class:"row"},Fe={class:"col-lg-1"},qe={class:"d-flex type-button-container"},Ye={class:"col-lg-11","element-loading-background":"rgba(122, 122, 122, 0.8)"},Ze={key:1,class:"w-100 h-100 px-5 py-5"};function Je(e,t,a,s,o,i){const d=(0,n.up)("Search"),u=(0,n.up)("el-icon"),c=(0,n.up)("el-input"),m=(0,n.up)("el-button"),h=(0,n.up)("el-table-column"),p=(0,n.up)("el-tag"),g=(0,n.up)("el-input-number"),w=(0,n.up)("List"),f=(0,n.up)("TrendCharts"),_=(0,n.up)("el-table"),y=(0,n.up)("ArrowDownBold"),b=(0,n.up)("ArrowUpBold"),v=(0,n.up)("b-button"),S=(0,n.up)("GPMChartVue"),x=(0,n.up)("ModelListView"),k=(0,n.up)("RawDataSideShowVue"),I=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",Te,[(0,n._)("div",We,[(0,n.Wm)(c,{size:"small",modelValue:o.search_str,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search_str=e),placeholder:"輸入內容查詢...",clearable:""},{prepend:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(m,{size:"small",onClick:i.TableExpandHandle},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(this.expandAll?"全部收合":"全部展開"),1)])),_:1},8,["onClick"])]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(_,{"default-sort":{prop:"EqName",order:"ascending"},"table-layout":"auto",height:i.table_height,data:i.DignoseDatasToShow,"highlight-current-row":"",onRowClick:i.TableRowClickHandle,onExpandChange:i.ExpandHandle,onRowDblclick:i.RowDoubleClickHandle,"row-class-name":i.tableRowClassName,"header-cell-style":o.headerStyle,"cell-style":o.cellStyle,"row-key":"IP",ref:"table",size:i.tableSize},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{sortable:"",fixed:"left",prop:"IP",label:"IP",width:"140"}),(0,n.Wm)(h,{sortable:"",prop:"EqName",label:"EQ Name"}),(0,n.Wm)(h,{sortable:"",prop:"UnitName",label:"Unit Name"}),(0,n.Wm)(h,{sortable:"",prop:"HealthScore",label:"Health Score"}),(0,n.Wm)(h,{sortable:"",prop:"AlertIndex",label:"Alert Index"},{default:(0,n.w5)((e=>[(0,n.Uk)((0,r.zw)(e.row.AlertIndex.toFixed(2)),1)])),_:1}),(0,n.Wm)(h,{sortable:"",label:"模組連線狀態"},{default:(0,n.w5)((e=>[(0,n.Wm)(p,{effect:"dark",size:"small",style:{width:"70px"},type:e.row.ModuleAbnormal?"danger":"success"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.row.ModuleAbnormal?"異常":"正常"),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(h,{type:"expand",fixed:"right",width:"12px"},{default:(0,n.w5)((t=>[(0,n._)("div",Ve,[(0,n._)("div",Pe,[(0,n._)("div",Ue,[Oe,(0,n._)("div",null,[(0,n._)("u",null,(0,r.zw)(t.row.DignoseDetailData.currentModelName),1)])]),(0,n._)("div",Me,[Ne,(0,n._)("div",null,[(0,n.Wm)(g,{max:100,min:0,step:.1,size:"small",modelValue:i.GetTreshodlVal(t.row).warningThreshold,"onUpdate:modelValue":e=>i.GetTreshodlVal(t.row).warningThreshold=e,onChange:e=>i.SetWarningThreshold(t.row.IP)},null,8,["step","modelValue","onUpdate:modelValue","onChange"])])]),(0,n._)("div",ze,[je,(0,n._)("div",null,[(0,n.Wm)(g,{max:100,min:0,step:.1,size:"small",modelValue:i.GetTreshodlVal(t.row).alarmThreshold,"onUpdate:modelValue":e=>i.GetTreshodlVal(t.row).alarmThreshold=e,onChange:e=>i.SetAlarmThreshold(t.row.IP)},null,8,["step","modelValue","onUpdate:modelValue","onChange"])])])]),(0,n._)("div",$e,[(0,n._)("div",Ee,[(0,n.Wm)(m,{onClick:e=>i.ShowModelList(t.row.IP)},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w)])),_:1}),Ae])),_:2},1032,["onClick"])]),(0,n._)("div",He,[(0,n.Wm)(m,{onClick:l=>e.$refs.rawDataView.ShowRaw(a.edgeIP,t.row.IP)},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f)])),_:1}),Re])),_:2},1032,["onClick"])])])])])),_:1})])),_:1},8,["height","data","onRowClick","onExpandChange","onRowDblclick","row-class-name","header-cell-style","cell-style","size"])),[[I,o.loading]]),(0,n._)("div",{class:(0,r.C_)(["show-chart-control d-flex px-0 w-100",["showing-down-arrow","fixed-in-bottom"]])},[(0,n.Wm)(v,{class:"btn-share-chart-show",variant:o.share_chart_show?"dark":"primary",onClick:t[1]||(t[1]=e=>o.share_chart_show=!o.share_chart_show)},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"mx-2"},{default:(0,n.w5)((()=>[o.share_chart_show?((0,n.wg)(),(0,n.j4)(y,{key:0})):((0,n.wg)(),(0,n.j4)(b,{key:1}))])),_:1}),Qe,""!=i.bottom_title_append?((0,n.wg)(),(0,n.j4)(p,{key:0,round:"",effect:"plain",type:"light"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(i.bottom_title_append),1)])),_:1})):(0,n.kq)("",!0)])),_:1},8,["variant"])]),(0,n.Wm)(l.uT,{name:"el-zoom-in-bottom"},{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:"share-chart-container fixed-in-bottom border-top",style:(0,r.j5)(o.current_share_chart_style)},[(0,n._)("div",Le,[(0,n._)("div",Fe,[(0,n._)("div",qe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.display_modes,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"py-1 bt-container",key:e.value},[(0,n.Wm)(v,{size:"sm",class:"w-100",onClick:t=>i.ChangeChartDisplayTypeHandle(e.value),variant:o.chart_display_mode==e.value?"primary":"light"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.label),1)])),_:2},1032,["onClick","variant"])])))),128))])]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Ye,[void 0!=o.selectedDiagnoseData.IP?((0,n.wg)(),(0,n.j4)(S,{class:"share-chart my-2",chart_id:"share-chart",key:o.selectedDiagnoseData.IP+o.chart_display_mode,title:i.ChartTitle,yAxisLabel:i.ylabel,ref:"trendChart"},null,8,["title","yAxisLabel"])):((0,n.wg)(),(0,n.iD)("div",Ze,"點選表格以顯示趨勢圖表"))])),[[I,o.chart_loading]])])],4)),[[l.F8,o.share_chart_show],[I,o.loading]])])),_:1}),(0,n.Wm)(x,{ref:"modelListView"},null,512),(0,n.Wm)(k,{ref:"rawDataView",ExistModuleList:o.DignoseDatas},null,8,["ExistModuleList"])])}var Ge=a(2482);a(6699);const Be=["id"],Ke=["id"];function Xe(e,t,a,l,s,o){const i=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{ref:"gpm-chart-"+a.chart_id,class:"gpm-chart",style:(0,r.j5)(s.chart_style),id:o.id},[(0,n._)("canvas",{class:"h-100",onClick:t[0]||(t[0]=(...e)=>o.ClickChartHandel&&o.ClickChartHandel(...e)),id:a.chart_id},null,8,Ke)],12,Be)),[[i,s.loading]])}var et=a(4531),tt=a.n(et),at={components:{},props:{chart_id:{type:String,default:"dchart"},title:{type:String,default:"Title"},xAxisLabel:{type:String,default:"時間"},yAxisLabel:{type:String,default:"YLabel"},xlabelUseTimeFormat:{type:Boolean,default:!0},skipRenderIfOutOfViewPort:{type:Boolean,default:!1}},data(){return{loading:!1,Rendering:!1,chart_style:{backgroundColor:"#000000",border:"1px solid grey",margin:"3px",borderRadius:"4px"},chartInstance:{data:{labels:[],datasets:[]},update:()=>{}},options:{responsive:!0,maintainAspectRatio:!1,lineTension:0,tooltips:{mode:"index",intersect:!0},layout:{padding:{bottom:10,top:10}},title:{display:!0,text:this.title,fontSize:12,fontColor:"white"},scales:{yAxes:[{gridLines:{color:"#313131"},ticks:{beginAtZero:!0,padding:20,fontColor:"white",autoskip:!0,maxTicksLimit:10,min:0,max:100},scaleLabel:{display:!0,labelString:this.yAxisLabel,fontSize:16,fontColor:"white"}}],xAxes:[{type:"time",time:{unit:"second",displayFormats:{day:"YYYY-MM-DD",hour:"YYYY-MM-DD HH",second:"YY/MM/DD HH:mm:ss"}},gridLines:{color:"#313131"},ticks:{autoskip:!0,autoSkipPadding:33,maxRotation:0,minRotation:0,fontColor:"white"},scaleLabel:{display:!0,labelString:this.xAxisLabel,fontSize:16,fontColor:"white"},getValueForPixel(){}}]},annotation:{drawTime:"afterDraw",annotations:[{type:"line",id:"line",mode:"horizontal",scaleID:"y-axis-0",value:2,borderWidth:2,borderColor:"red"}]},legend:{display:!0}},xlabels:[],datasets:[],datasetsVisible:[],isDark:!0,currentTheme:"dark",colors:["blue","green","red","orange","pink","grey","black","seagreen"],outOfViewPort:!1}},methods:{IsOutOfViewPort(){var e=document.querySelector(`#${this.id}`);if(!e)return!1;var t=e.getBoundingClientRect();return t.bottom>window.innerHeight||t.top<0},test(){this.chartInstance.setDatasetVisibility(1,!1),this.chartInstance.update()},ThemeChange(){this.currentTheme="dark"==this.currentTheme?"light":"dark",this.chart_style.backgroundColor="dark"==this.currentTheme?"#202020":"white",this.chart_style.border="dark"==this.currentTheme?"1px solid grey":"1px solid white",this.isDark="dark"==this.currentTheme,this.chartInstance.options.title.fontColor=this.chartInstance.options.scales.xAxes[0].ticks.fontColor=this.chartInstance.options.scales.xAxes[0].scaleLabel.fontColor=this.chartInstance.options.scales.yAxes[0].ticks.fontColor=this.chartInstance.options.scales.yAxes[0].scaleLabel.fontColor="dark"==this.currentTheme?"white":"black",this.chartInstance.update()},ClickChartHandel(){},ChartInit(){this.xlabelUseTimeFormat||(this.options.scales.xAxes[0].type="category");const e=document.getElementById(this.chart_id);this.chartInstance=new(tt())(e,{type:"line",data:{labels:[],datasets:[]},options:this.options}),this.outOfViewPort=this.IsOutOfViewPort(),window.addEventListener("scroll",(()=>{this.outOfViewPort=this.IsOutOfViewPort()})),this.chartInstance.options.animation=!1},async UpdateChart(e,t="second",a=!1){if(this.skipRenderIfOutOfViewPort&&this.IsOutOfViewPort())console.log("no render");else try{a&&(this.loading=!0),await this.RenderData(e,t),setTimeout((()=>{this.loading=!1}),100)}catch(l){return"err"}},UpdateTitle(e){console.info("title",e),e&&(this.chartInstance.options.title.text=e,this.chartInstance.update())},SetYAxisLimits(e,t){this.chartInstance.options.scales.yAxes[0].ticks.max=e,this.chartInstance.options.scales.yAxes[0].ticks.min=t,this.chartInstance.update()},FeedData(e=[],t=[{label:"",data:-1,borderColor:"blue",borderWidth:1}]){0!=t.length&&void 0!=e&&(this.xlabels.push(e),t.forEach((e=>{var t=this.datasets.find((t=>t.label==e.label));t?t.data.push(e.data):this.datasets.push({label:e.label,data:[e.data],backgroundColor:"",borderColor:e.borderColor?e.borderColor:"blue",borderWidth:e.borderWidth?e.borderWidth:1,fill:!1,pointStyle:"none",pointRadius:0,lineTension:0})})),this.DataFIFO(),this.RenderData())},Clear(){new Promise((e=>{this.datasetsVisible=[],this.chartInstance.data.datasets=[],this.chartInstance.data.labels=[],this.chartInstance.update()}))},async RenderData(e,t="second"){await new Promise(((a,l)=>{try{var s=e.datasets[0].data;-1==e.ymax?this.chartInstance.options.scales.yAxes[0].ticks.max=Math.max.apply(null,s):this.chartInstance.options.scales.yAxes[0].ticks.max=e.ymax,-1==e.ymin?this.chartInstance.options.scales.yAxes[0].ticks.min=Math.min.apply(null,s):this.chartInstance.options.scales.yAxes[0].ticks.min=e.ymin,this.chartInstance.options.scales.xAxes[0].time.unit=t,this.chartInstance.data.datasets=e.datasets,this.chartInstance.data.labels=e.labels,this.chartInstance.update(),a()}catch(o){l(o)}}))},DataFIFO(){this.xlabels.length>50&&(this.xlabels.splice(0,1),this.datasets.forEach((e=>{e.data.splice(0,1)})))},GetPixel(){var e=document.getElementById(this.chart_id);return console.info("pixel",e.clientWidth),e.clientWidth}},computed:{id(){return"gc"+this.chart_id.replaceAll(".","").replace("-","")},currentDataSet(){var e=[];return this.chartInstance.data.datasets.forEach((t=>{e.push(t.data)})),{labels:this.chartInstance.data.labels,datas:e}},TimeWindowDom(){return document.getElementById("time-window")}},mounted(){this.ChartInit()},created(){}};const lt=(0,P.Z)(at,[["render",Xe]]);var st=lt;a(1703);const ot=[{label:"Health Score",value:"HS"},{label:"Alert Index(day)",value:"AID"},{label:"Alert Index(Hour)",value:"AIH"}],it=["id"],nt=(0,n._)("h2",null,"模型列表",-1),rt=[nt],dt={class:"d-flex flex-row border-bottom pb-2 mb-3"},ut={class:"flex-fill text-start"},ct=(0,n.Uk)("重新整理"),mt={class:"ip-select d-flex flex-row",style:{width:"370px"}},ht=(0,n._)("div",{class:"py-1",style:{width:"25%"}},"選擇模組",-1),pt=(0,n.Uk)("刪除");function gt(e,t,a,l,s,o){const i=(0,n.up)("el-button"),d=(0,n.up)("el-option"),u=(0,n.up)("el-select"),c=(0,n.up)("el-table-column"),m=(0,n.up)("el-tag"),h=(0,n.up)("el-table"),p=(0,n.up)("el-drawer"),g=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.j4)(p,{modelValue:s.show,"onUpdate:modelValue":t[3]||(t[3]=e=>s.show=e),direction:"rtl",size:"70%",title:`模型列表 : ${s.EQ}/${s.UNIT}(${s.IP})`},{header:(0,n.w5)((({titleId:e})=>[(0,n._)("div",{id:e,style:{"margin-top":"85px"}},rt,8,it)])),default:(0,n.w5)((()=>[(0,n._)("div",dt,[(0,n._)("div",ut,[(0,n.Wm)(i,{dark:"",onClick:t[0]||(t[0]=e=>o.Fetch())},{default:(0,n.w5)((()=>[ct])),_:1})]),(0,n._)("div",mt,[ht,(0,n.Wm)(u,{class:"w-100",modelValue:s.IP,"onUpdate:modelValue":t[1]||(t[1]=e=>s.IP=e),onChange:t[2]||(t[2]=e=>o.Fetch())},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.module_infos,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.IP,label:`${e.EqName}/${e.UnitName}(${e.IP})`,value:e.IP},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(h,{data:s.modelData,size:o.tableSize},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{prop:"Recipe_ID",label:"模型名稱",fixed:"left",width:"160px",sortable:""}),(0,n.Wm)(c,{prop:"Model_Start_Time",label:"開始時間",sortable:""}),(0,n.Wm)(c,{prop:"Model_End_Time",label:"結束時間"}),(0,n.Wm)(c,{prop:"Comment",label:"Comment"}),(0,n.Wm)(c,{prop:"Enabled",label:"狀態",sortable:""},{default:(0,n.w5)((e=>[(0,n.Wm)(m,{effect:"dark",style:{width:"70px"},type:e.row.Enabled?"success":"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.row.Enabled?"啟用":"停用"),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(c,{label:"操作",fixed:"right",width:"160px"},{default:(0,n.w5)((e=>[(0,n.Wm)(i,{type:e.row.Enabled?"danger":"success",plain:"",onClick:t=>o.ModelEnableHandle(e.row.Recipe_ID,!e.row.Enabled)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.row.Enabled?"停用":"啟用"),1)])),_:2},1032,["type","onClick"]),(0,n.Wm)(i,{type:"danger",plain:"",onClick:t=>o.ModelDeleteHandle(e.row.Recipe_ID)},{default:(0,n.w5)((()=>[pt])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","size"])),[[g,s.loading]])])),_:1},8,["modelValue","title"])}var wt={data(){return{show:!1,IP:"",EQ:"",UNIT:"",modelData:[],loading:!1,module_infos:[],edgeIP:"12.2.2.2"}},computed:{tableSize(){return window.innerWidth<500?"small":"default"}},methods:{ShowModelList(e,t){this.show=!0,this.edgeIP=e,this.IP=t,this.UpdateModuleInfos(e),this.Fetch()},async UpdateModuleInfos(e){this.edgeIP=e,this.module_infos=await we(this.edgeIP)},async Fetch(){this.loading=!0;var e=await ye(this.edgeIP,this.IP);console.info("Fetch Models",e),this.EQ=e.EQ,this.UNIT=e.UNIT,this.modelData=e.modelData,this.loading=!1},async ModelDeleteHandle(e=""){var t=await ke(this.edgeIP,this.IP,e);t.success&&this.Fetch()},async ModelEnableHandle(e="",t=!1){var a=await xe(this.edgeIP,this.IP,e,t);a.success&&this.Fetch()}},mounted(){}};const ft=(0,P.Z)(wt,[["render",gt]]);var _t=ft;const yt={class:"message d-flex flex-row w-100 px-1 mx-0 my-0 bg-light border-bottom"},bt={style:{width:"340px"}},vt={class:"flex-fill d-flex flex-row justify-content-end"},St=(0,n.Uk)("暫停"),xt=(0,n.Uk)("繼續"),kt={class:"row g-0 h-100 w-100 mx-0 my-0 pb-5"},It={class:"col-md-6 h-100"},Dt={class:"w-100 d-flex flex-row"},Ct=(0,n._)("span",{class:"raw-data-viewer"},[(0,n._)("div",null,"G Value")],-1),Tt={class:"col-md-6 h-100"},Wt={class:"w-100 d-flex flex-row"},Vt=(0,n._)("span",{class:"raw-data-viewer"},[(0,n._)("div",null,"FFT")],-1);function Pt(e,t,a,l,s,o){const i=(0,n.up)("el-tag"),d=(0,n.up)("el-option"),u=(0,n.up)("el-select"),c=(0,n.up)("b-button"),m=(0,n.up)("TrendCharts"),h=(0,n.up)("el-icon"),p=(0,n.up)("GPMChartVue"),g=(0,n.up)("el-drawer"),w=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.j4)(g,{modelValue:s.ShowDrawer,"onUpdate:modelValue":t[3]||(t[3]=e=>s.ShowDrawer=e),direction:"btt",size:"70%",title:o.Title,onClose:o.CloseHandle},{default:(0,n.w5)((()=>[(0,n._)("div",yt,[(0,n.Wm)(i,{effect:"dark",type:s.connected?"success":"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(s.connected?"已連線":"已斷線"),1)])),_:1},8,["type"]),(0,n._)("div",bt,[(0,n.Wm)(u,{class:"w-100",size:"small",modelValue:s.SensorIP,"onUpdate:modelValue":t[0]||(t[0]=e=>s.SensorIP=e),onChange:o.ChangeIPHandle},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.ExistModuleList,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.IP,value:e.IP,label:`${e.EqName}-${e.UnitName}(${e.IP})`},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,n._)("div",vt,[s.pause?((0,n.wg)(),(0,n.j4)(c,{key:1,size:"sm",pill:"",class:"bg-success",onClick:t[2]||(t[2]=e=>s.pause=!1)},{default:(0,n.w5)((()=>[xt])),_:1})):((0,n.wg)(),(0,n.j4)(c,{key:0,size:"sm",pill:"",onClick:t[1]||(t[1]=e=>s.pause=!0)},{default:(0,n.w5)((()=>[St])),_:1}))])]),(0,n._)("div",kt,[(0,n._)("div",It,[(0,n._)("div",Dt,[(0,n.Wm)(h,{style:{"padding-top":"12px","font-size":"25px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1}),Ct]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(p,{ref:"Raw_Data_Chart",class:"h-100",chart_id:"raw_data_chart-1",title:o.Title,key:s.SensorIP,yAxisLabel:"G",xlabelUseTimeFormat:!1},null,8,["title"])),[[w,!s.data_in]])]),(0,n._)("div",Tt,[(0,n._)("div",Wt,[(0,n.Wm)(h,{style:{"padding-top":"12px","font-size":"25px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1}),Vt]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(p,{ref:"Raw_Data_Chart_FFT",class:"h-100",chart_id:"raw_data_chart-fft",title:o.Title,key:s.SensorIP,yAxisLabel:"Mag",xAxisLabel:"Freq(Hz)",xlabelUseTimeFormat:!1},null,8,["title"])),[[w,!s.data_in]])])])])),_:1},8,["modelValue","title","onClose"])}var Ut={components:{GPMChartVue:st},props:{ExistModuleList:{type:Array,default(){return[{IP:"",EqName:"",UnitName:""}]}}},data(){return{ShowDrawer:!1,SensorIP:"",ws:null,mockTimer:null,connected:!1,pause:!1,data_in:!1,edgeIP:"123.123.213.213"}},methods:{ChangeIPHandle(){this.data_in=!1,this.ws.onopen=null,this.ws.onclose=null,this.ws.onmessage=null,this.ws.close(),this.WebsocketConnect(this.edgeIP)},CloseHandle(){console.info("drawer close"),this.data_in=!1;try{clearInterval(this.mockTimer),this.ws.close()}catch(e){console.info("drawer close",e)}},async ShowRaw(e,t){this.edgeIP=e,this.SensorIP=t,this.ShowDrawer=!0;while(!await this.WebsocketConnect(e))setTimeout((()=>{}),100)},async WebsocketConnect(e){return await new Promise((t=>{this.ws=new WebSocket(`ws://${e}:44332/RawG?IP=${this.SensorIP}`),this.ws.onopen=()=>{this.connected=!0,t(!0)},this.ws.onmessage=e=>this.DataHandle(e.data),this.ws.onclose=()=>{this.connected=!1,t(!1)}}))},Reconnect(){},DataHandle(e){if(this.data_in=!0,!this.pause&&e){var t=JSON.parse(e);this.$refs.Raw_Data_Chart&&this.$refs.Raw_Data_Chart.UpdateChart(t[0],"second"),this.$refs.Raw_Data_Chart_FFT.UpdateChart(t[1])}},MockFetchFakeData(){console.info("production")}},computed:{HOST(){return D.idms_websocket_host+"/RawG"},Title(){if(0==this.ExistModuleList.length)return"REAL-TIME DATA";var e=this.ExistModuleList.find((e=>e.IP==this.SensorIP));return e?`REAL-TIME DATA OF ${e.EqName}-${e.UnitName}(${e.IP})`:"REAL-TIME DATA"}}};const Ot=(0,P.Z)(Ut,[["render",Pt]]);var Mt=Ot;class Nt{constructor(){(0,Ge.Z)(this,"warningThreshold",69),(0,Ge.Z)(this,"alarmThreshold",87)}}var zt={components:{GPMChartVue:st,ModelListView:_t,RawDataSideShowVue:Mt},data(){return{ws:{type:WebSocket},share_chart_show:!1,trendchart_ws:null,loading:!0,chart_loading:!1,expandAll:!1,display_modes:ot,DignoseDatas:[],chart_display_mode:"HS",search_str:"",selectedDiagnoseData:{IP:void 0},renderingDiagnoseData:[],ThresholdSettings:{ip:new Nt},current_share_chart_style:{backgroundColor:"#313131",border:"1px solid black"},share_chart_styles:{normal:{backgroundColor:"#313131",border:"1px solid black"},warning:{backgroundColor:"#e5bc41",border:"1px solid white"},danger:{backgroundColor:"rgb(217, 94, 94)",border:"1px solid white"}},headerStyle:{backgroundColor:"rgb(222, 232, 247)"},cellStyle:{}}},methods:{ChangeChartDisplayTypeHandle(e){this.chart_display_mode=e,this.RTChartWebsocketIni(this.selectedDiagnoseData.IP)},RowDoubleClickHandle(e,t,a){this.$refs.table.toggleRowExpansion(e,!0)},TableExpandHandle(){this.expandAll=!this.expandAll,this.DignoseDatas.forEach((e=>{this.$refs.table.toggleRowExpansion(e,this.expandAll)}))},tableRowClassName({row:e}){return e.DignoseDetailData.dignoseResult},HideAllExpand(){this.DignoseDatas.forEach((e=>{this.$refs.table.toggleRowExpansion(e,!1)}))},async TableRowClickHandle(e){console.log(e),this.selectedDiagnoseData.IP!=e.IP&&(this.chart_loading=!0,null!=this.trendchart_ws&&(this.trendchart_ws.onmessage=null),setTimeout((()=>{console.info("to create ws",e.IP),this.RTChartWebsocketIni(e.IP)}),200)),this.selectedDiagnoseData=e;var t=await be(this.edgeIP,this.selectedDiagnoseData.IP);t.success&&(this.ThresholdSettings[this.selectedDiagnoseData.IP]=t.data)},async RTChartWebsocketIni(e){null!=this.trendchart_ws&&(this.trendchart_ws.onmessage=null,this.trendchart_ws.close()),this.trendchart_ws=await _e(this.edgeIP,e,this.chart_display_mode),this.chart_loading=null==this.trendchart_ws,null!=this.trendchart_ws?this.trendchart_ws.onmessage=e=>{var t=JSON.parse(e.data);this.RenderTrendChart(t)}:await this.RTChartWebsocketIni(e)},RenderTrendChart(e){if(this.share_chart_show)try{this.renderingDiagnoseData=e;var t="HS"==this.chart_display_mode?"second":"AID"==this.chart_display_mode?"day":"hour";if(this.$refs.trendChart)this.$refs.trendChart.UpdateChart(e,t)}catch(a){console.info(a)}},GetTreshodlVal(e){return void 0==this.ThresholdSettings[e.IP]?new Nt:this.ThresholdSettings[e.IP]},async ExpandHandle(e,t=[]){if(0!=t.length){var a=e.IP,l=await be(this.edgeIP,a);l.success&&(this.ThresholdSettings[a]=l.data)}},async SetWarningThreshold(e){await ve(this.edgeIP,e,this.ThresholdSettings[e].warningThreshold)},async SetAlarmThreshold(e){await Se(this.edgeIP,e,this.ThresholdSettings[e].alarmThreshold)},ShowModelList(e){this.$refs.modelListView.UpdateModuleInfos(this.edgeIP),this.$refs.modelListView.ShowModelList(this.edgeIP,e)}},computed:{DignoseDatasToShow(){if(""==this.search_str)return this.DignoseDatas;var e=[],t=this.search_str.toUpperCase();return this.DignoseDatas.forEach((a=>{a.IP.includes(t)|a.UnitName.toUpperCase().includes(t)|a.EqName.toUpperCase().includes(t)&&e.push(a)})),e},ChartTitle(){return this.selectedDiagnoseData.IP?`${this.DisplayModeName}: ${this.selectedDiagnoseData.EqName}-${this.selectedDiagnoseData.UnitName} (${this.selectedDiagnoseData.IP})`:"點選表格以顯示趨勢圖表"},DisplayModeName(){return"HS"==this.chart_display_mode?"健康分數趨勢":"AIH"==this.chart_display_mode?"劣化指標(小時)":"AID"==this.chart_display_mode?"劣化指標(天)":""},ylabel(){return"HS"==this.chart_display_mode?"Score":"AID"==this.chart_display_mode|"AIH"==this.chart_display_mode?"Index":""},table_height(){return console.info(window.innerHeight),this.share_chart_show?.45*window.innerHeight:window.innerHeight-220},bottom_title_append(){return void 0==this.selectedDiagnoseData.IP?"":` ${this.selectedDiagnoseData.EqName}-${this.selectedDiagnoseData.UnitName}(${this.selectedDiagnoseData.IP})`},tableSize(){return window.innerWidth<500?"small":"default"}},props:{edgeIP:{type:String,default:"127.0.0.1"}},watch:{edgeIP:{handle:function(e,t){console.info(e,t)},deep:!0,immediate:!0}},async mounted(){console.info("s",this.edgeIP),this.ws=await fe(this.edgeIP),console.info("s",this.ws),this.ws.onmessage=e=>{this.loading=!1,this.DignoseDatas=JSON.parse(e.data)}},unmounted(){this.ws.close()}};const jt=(0,P.Z)(zt,[["render",Je]]);var $t=jt;const Et=e=>((0,n.dD)("data-v-177996cb"),e=e(),(0,n.Cn)(),e),At={id:"dignose-chart-view"},Ht={class:"charting-options w-100 py-1 px-1 mx-2 d-flex bg-light row"},Rt={class:"col-md-6"},Qt={class:"d-flex justify-content-start w-100"},Lt={class:"col-md-6 text-start"},Ft={class:"d-flex justify-content-end w-70"},qt=Et((()=>(0,n._)("div",{style:{width:"150px","font-size":"12px"}},"Column Number",-1))),Yt={class:"row g-0",id:"chccccc"},Zt={key:0,class:"empty-result"},Jt=["id","onClick"],Gt=Et((()=>(0,n._)("span",null,"看看其他的 :",-1)));function Bt(e,t,a,s,o,i){const d=(0,n.up)("el-radio-button"),u=(0,n.up)("el-radio-group"),c=(0,n.up)("el-option"),m=(0,n.up)("el-select"),h=(0,n.up)("Search"),p=(0,n.up)("el-icon"),g=(0,n.up)("el-input"),w=((0,n.up)("Lock"),(0,n.up)("Unlock"),(0,n.up)("el-input-number"),(0,n.up)("el-affix")),f=(0,n.up)("el-empty"),_=(0,n.up)("ZoomIn"),y=(0,n.up)("GPMChart"),b=(0,n.up)("el-drawer"),v=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",At,[(0,n.Wm)(w,{offset:65,class:"w-100"},{default:(0,n.w5)((()=>[(0,n._)("div",Ht,[(0,n._)("div",Rt,[(0,n._)("div",Qt,[(0,n.Wm)(u,{modelValue:o.display_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.display_mode=e),onChange:i.FeatureTypeChangeHandle},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.display_modes,(e=>((0,n.wg)(),(0,n.j4)(d,{size:"small",key:e.value,label:e.label},null,8,["label"])))),128))])),_:1},8,["modelValue","onChange"])])]),(0,n._)("div",Lt,[(0,n._)("div",Ft,[qt,(0,n.Wm)(m,{size:"default",modelValue:o.ColsNumber,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ColsNumber=e),onChange:i.RenderCharts},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([1,2,3],(e=>(0,n.Wm)(c,{key:e,value:e,label:e},null,8,["value","label"]))),64))])),_:1},8,["modelValue","onChange"]),(0,n.Wm)(g,{size:"small",modelValue:o.search_str,"onUpdate:modelValue":t[2]||(t[2]=e=>o.search_str=e),placeholder:"輸入內容查詢...",clearable:""},{prepend:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1})])),_:1},8,["modelValue"])]),(0,n.kq)("",!0)])])])),_:1}),(0,n._)("div",Yt,[0==i.DignoseDatas_Show.length?((0,n.wg)(),(0,n.iD)("div",Zt,[(0,n.Wm)(f,{description:"未包含任何圖表項目","image-size":200})])):((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(i.DignoseDatas_Show,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)([`col-md-${i.colsNumReuslt}`,"charting-region"]),key:e.IP},[(0,n._)("span",{class:"zoom-icon",id:e.IP,onClick:t=>i.ZoomClickHandle(e.IP)},[(0,n.Wm)(p,{size:20},{default:(0,n.w5)((()=>[(0,n.Wm)(_)])),_:1})],8,Jt),(0,n.wy)((0,n._)("span",{class:"value-show"},(0,r.zw)(void 0==e.datasets?-1:e.datasets[0].data[e.datasets[0].data.length-1]),513),[[l.F8,"HS"==i.featureType]]),((0,n.wg)(),(0,n.j4)(y,{ref_for:!0,ref:"health-chart-"+e.IP,class:"chart-h",chart_id:e.IP+"-HealthScore",title:`${e.EqName}-${e.UnitName}(${e.IP})`,yAxisLabel:i.ylabel,key:i.ylabel+o.ColsNumber,skipRenderIfOutOfViewPort:!0},null,8,["chart_id","title","yAxisLabel"]))],2)))),128))]),(0,n.Wm)(b,{modelValue:o.zooming,"onUpdate:modelValue":t[6]||(t[6]=e=>o.zooming=e),direction:"btt",size:"90%"},{default:(0,n.w5)((()=>[Gt,(0,n.Wm)(m,{modelValue:o.zoomingIP,"onUpdate:modelValue":t[5]||(t[5]=e=>o.zoomingIP=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.DignoseDatas_Show,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e.IP,value:e.IP,label:`${e.EqName}-${e.UnitName}(${e.IP})`},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),((0,n.wg)(),(0,n.j4)(y,{ref:"zoom-chart",class:"chart-zoom",chart_id:"zoom-chart",title:`${o.zoom_data.EqName}-${o.zoom_data.UnitName}(${o.zoom_data.IP})`,yAxisLabel:i.ylabel,key:o.zoom_data.IP,skipRenderIfOutOfViewPort:!1},null,8,["title","yAxisLabel"]))])),_:1},8,["modelValue"])])),[[v,i.LOADING]])}var Kt={props:{pause:{type:Boolean,default:!0},edgeIP:{type:String,default:"127.0.0.1"}},data(){return{ws:null,loading:!0,DignoseDatas:[],zoom_data:{EqName:"",UnitName:"",IP:""},MaxHSDisplayNum:50,settinglock:!0,display_mode:"Health Score",display_modes:ot,search_str:"",ColsNumber:2,zooming:!1,zoomingIP:""}},computed:{DignoseDatas_Show(){if(""==this.search_str)return this.DignoseDatas;var e=this.search_str.toUpperCase(),t=[];return this.DignoseDatas.forEach((a=>{a.IP.toUpperCase().includes(e)|a.EqName.toUpperCase().includes(e)|a.UnitName.toUpperCase().includes(e)|(a.EqName+"-"+a.UnitName).toUpperCase().includes(e)&&t.push(a)})),t},ylabel(){return"Health Score"==this.display_mode?"Score":"Alert Index(day)"==this.display_mode|"Alert Index(Hour)"==this.display_mode?"Index":""},colsNumReuslt(){return 12/this.ColsNumber},selected_display_mode_value(){return this.display_modes.find((e=>e.label==this.display_mode)).value},featureType(){var e="Health Score"==this.display_mode?"HS":"Alert Index(day)"==this.display_mode?"AID":"AIH";return e},LOADING(){return this.loading}},methods:{visibilityChanged(e,t){console.log(e,t)},ZoomClickHandle(e){this.zooming=!0,this.zoom_data=this.DignoseDatas.find((t=>t.IP==e)),setTimeout((()=>{this.$refs["zoom-chart"].UpdateChart(this.zoom_data)}),200),this.zoomingIP=e},FeatureTypeChangeHandle(){this.ws&&this.ws.close()},async RenderCharts(){this.pause||this.DignoseDatas.forEach((e=>{new Promise((t=>{var a="Health Score"==this.display_mode?"second":"Alert Index(day)"==this.display_mode?"day":"hour",l=this.$refs[`health-chart-${e.IP}`];l&&l[0]&&l[0].UpdateChart(e,a),this.zooming&&e.IP==this.zoomingIP&&(this.zoom_data=e,this.$refs["zoom-chart"].UpdateChart(e,a)),t()}))}))},WsConnect(){this.ws&&this.ws.close(),this.ws=new WebSocket(`${D.websocket_host}/Dignose?edgeIP=${this.edgeIP}&type=chart&number=${this.MaxHSDisplayNum}&chart_type=${this.featureType}&sensorIP=ALL`),this.ws.onopen=()=>{this.loading=!1},this.ws.onmessage=e=>{this.loading=!1,this.DignoseDatas=JSON.parse(e.data),this.RenderCharts()},this.ws.onerror=()=>{console.info("ws close"),this.loading=!0,this.ws.onmessage=null,this.WsConnect()},this.ws.onclose=()=>{console.info("ws close"),this.loading=!0,this.ws.onmessage=null,this.WsConnect()}},HSDisplayNumChangedHandel(){console.info(this.MaxHSDisplayNum),this.ws.onmessage=null,this.ws.close(),this.WsConnect()}},components:{GPMChart:st},mounted(){this.WsConnect()},unmounted(){this.ws.close()}};const Xt=(0,P.Z)(Kt,[["render",Bt],["__scopeId","data-v-177996cb"]]);var ea=Xt,ta={data(){return{display_mode:"LIST",EdgeIP:"127.0.0.1"}},components:{DignoseDataListView:$t,DignoseDataChartView:ea,ModelTrainerVue:Ce},methods:{Test(){this.$refs.modelTrainer.ShowUp(this.EdgeIP)}},mounted(){},created(){console.info("fff",this.$route.query.ip),this.EdgeIP=this.$route.query.ip}};const aa=(0,P.Z)(ta,[["render",L]]);var la=aa;const sa=e=>((0,n.dD)("data-v-1a457262"),e=e(),(0,n.Cn)(),e),oa={class:"fade-in"},ia={class:"px-2 py-2 w-100 d-flex flex-row justify-content-start border-bottom"},na={key:0,class:"w-100 d-flex flex-column justify-content-center"},ra=sa((()=>(0,n._)("h3",null,"Network State",-1))),da={class:"w-100 ping-container"},ua=["href","textContent"],ca={class:"my-3"},ma={key:1},ha=sa((()=>(0,n._)("h3",null,"Module State",-1))),pa=["href"];function ga(e,t,a,s,o,i){const d=(0,n.up)("el-radio-button"),u=(0,n.up)("el-radio-group"),c=(0,n.up)("el-affix"),m=(0,n.up)("el-divider"),h=(0,n.up)("NetworkStatusVue"),p=(0,n.up)("WarningFilled"),g=(0,n.up)("el-icon"),w=(0,n.up)("el-table-column"),f=(0,n.up)("el-tag"),_=(0,n.up)("el-table");return(0,n.wg)(),(0,n.iD)("div",oa,[(0,n.Wm)(c,{class:"w-100",offset:75},{default:(0,n.w5)((()=>[(0,n._)("div",ia,[(0,n.Wm)(u,{modelValue:o.mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.mode=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"small",label:"Network"}),(0,n.Wm)(d,{size:"small",label:"Module"})])),_:1},8,["modelValue"])])])),_:1}),"Network"==o.mode?((0,n.wg)(),(0,n.iD)("div",na,[ra,(0,n.Wm)(m),(0,n._)("div",da,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.ModuleStatesData,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"module-ping mx-1 my-1",key:e.IP},[(0,n._)("a",{href:"http://"+e.IP,textContent:(0,r.zw)(e.IP)},null,8,ua),(0,n._)("div",null,(0,r.zw)(e.EqName),1),(0,n._)("div",null,(0,r.zw)(e.UnitName),1),(0,n._)("div",ca,[(0,n.Wm)(h,{size:"large",ip:e.IP},null,8,["ip"])])])))),128))])])):(0,n.kq)("",!0),"Module"==o.mode?((0,n.wg)(),(0,n.iD)("div",ma,[ha,(0,n.Wm)(m),(0,n.Wm)(_,{stripe:"",data:o.ModuleStatesData,"row-key":"IP",size:i.tableSize},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{width:"44",fixed:"left"},{default:(0,n.w5)((e=>[(0,n.wy)((0,n.Wm)(g,{color:"gold",size:30},{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:2},1536),[[l.F8,(!e.row.ControllerAbnormal&&e.row.SensorAbnormal)|(e.row.ControllerAbnormal&&!e.row.SensorAbnormal)]]),(0,n.wy)((0,n.Wm)(g,{color:"red",size:30},{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:2},1536),[[l.F8,e.row.ControllerAbnormal&&e.row.SensorAbnormal]])])),_:1}),(0,n.Wm)(w,{prop:"IP",label:"IP",sortable:"",fixed:"left"},{default:(0,n.w5)((e=>[(0,n._)("a",{href:"http://"+e.row.IP,target:"popup"},(0,r.zw)(e.row.IP),9,pa)])),_:1}),(0,n.Wm)(w,{prop:"EqName",label:"EQ Name",sortable:""}),(0,n.Wm)(w,{prop:"UnitName",label:"UNIT Name",sortable:""}),(0,n.Wm)(w,{prop:"ControllerAbnormal",label:"控制器狀態"},{default:(0,n.w5)((e=>[(0,n.Wm)(f,{style:{width:"100px"},type:e.row.ControllerAbnormal?"danger":"success","disable-transitions":"",effect:"dark"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.row.ControllerAbnormal?"異常":"正常"),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(w,{prop:"SensorAbnormal",label:"感測器狀態"},{default:(0,n.w5)((e=>[(0,n.Wm)(f,{style:{width:"100px"},type:e.row.SensorAbnormal?"danger":"success","disable-transitions":"",effect:"dark"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.row.SensorAbnormal?"異常":"正常"),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data","size"])])):(0,n.kq)("",!0)])}var wa={components:{NetworkStatusVue:O},data(){return{mode:"Module",ModuleStatesData:[],ws:null,EdgeIP:"127.0.0.1"}},mounted(){this.WebSocketInitial()},methods:{WebSocketInitial(){this.ws=new WebSocket(`${D.websocket_host}/ModuleInfoGet?edgeIP=${this.EdgeIP}`),this.ws.onmessage=e=>{this.ModuleStatesData=JSON.parse(e.data)},this.ws.onclose=()=>{this.WebSocketInitial()}}},computed:{tableSize(){return window.innerWidth<500?"small":"default"}},created(){console.info("fssssff",this.$route.params.ip),this.EdgeIP=this.$route.query.ip}};const fa=(0,P.Z)(wa,[["render",ga],["__scopeId","data-v-1a457262"]]);var _a=fa;const ya={class:"h-100 fade-in"},ba={class:"d-flex flex-column",style:{height:"100%"}},va={class:"options border-bottom border-top pb-2 mt-1 mb-1"},Sa={class:"d-flex flex-row row settings"},xa={class:"col-lg-2 d-flex"},ka=(0,n._)("b",null,"EQ",-1),Ia={class:"col-lg-2 d-flex"},Da=(0,n._)("b",null,"UNIT",-1),Ca={class:"d-flex"},Ta=["textContent"],Wa={class:"w-100",style:{"text-align":"right"}},Va={class:"col-lg-2 d-flex"},Pa=(0,n._)("b",null,"查詢項目",-1),Ua={key:0,class:"col-lg-2 flex-fill"},Oa={class:"d-flex flex-row row settings"},Ma={class:"col-lg-4 d-flex"},Na=(0,n._)("b",null,"開始時間",-1),za={class:"col-lg-4 d-flex"},ja=(0,n._)("b",null,"結束時間",-1),$a=(0,n._)("div",{class:"col-lg-2 flex-fill"},null,-1),Ea={class:"col-lg-2"},Aa=(0,n.Uk)("查詢"),Ha={class:"result-content d-flex flex-column flex-fill w-100 h-100",style:{position:"relative"}},Ra={class:"result d-flex flex-column flex-fill w-100 my-1","element-loading-text":"數據載入中...若響應速度過慢,可以試試將查詢時間區間縮短。","element-loading-background":"rgba(122, 122, 122, 0.8)"},Qa={class:"d-flex flex-row",style:{position:"absolute",left:"15px",top:"15px",cursor:"pointer"}},La={class:"d-flex result-message font-red"},Fa={class:"w-100 h-100 bg-light",style:{position:"absolute","z-index":"3000"}},qa=["id"],Ya=(0,n._)("h4",{class:"flex-fill"},"圖表設定",-1),Za={class:"h-100",style:{position:"absolute",top:"60px",right:"12px",left:"12px"}},Ja={class:"chart-settings d-flex flex-column"},Ga={class:"d-flex flex-row sub-setting"},Ba=(0,n.Uk)("Y軸"),Ka=(0,n.Uk)("Auto Scale"),Xa=(0,n._)("div",null,"Max",-1),el=(0,n._)("div",null,"Min",-1),tl=(0,n.Uk)("Apply"),al={class:"d-flex flex-row sub-setting"},ll=(0,n.Uk)("Colors"),sl={class:"mx-0 my-0 px-0 pb-2"};function ol(e,t,a,s,o,i){const d=(0,n.up)("el-option"),u=(0,n.up)("el-select"),c=(0,n.up)("el-date-picker"),m=(0,n.up)("b-button"),h=(0,n.up)("GPMChart"),p=(0,n.up)("EventQueryResultView"),g=(0,n.up)("el-button"),w=(0,n.up)("el-tag"),f=(0,n.up)("el-checkbox"),_=(0,n.up)("b-form-input"),y=(0,n.up)("el-color-picker"),b=(0,n.up)("el-tab-pane"),v=(0,n.up)("el-tabs"),S=(0,n.up)("el-drawer"),x=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",ya,[(0,n._)("div",ba,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",va,[(0,n._)("div",Sa,[(0,n._)("div",xa,[ka,(0,n.Wm)(u,{class:"w-100",modelValue:o.QueryOptions.SelectedEQ,"onUpdate:modelValue":t[0]||(t[0]=e=>o.QueryOptions.SelectedEQ=e),onChange:t[1]||(t[1]=e=>o.QueryOptions.SelectedUNIT="")},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.EQList,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n._)("div",Ia,[Da,(0,n.Wm)(u,{class:"w-100",modelValue:o.QueryOptions.SelectedUNIT,"onUpdate:modelValue":t[2]||(t[2]=e=>o.QueryOptions.SelectedUNIT=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.UNITS_IN_EQ,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.IP,label:`${e.UNIT}(${e.IP})`,value:e.IP},{default:(0,n.w5)((()=>[(0,n._)("div",Ca,[(0,n._)("div",{textContent:(0,r.zw)(e.UnitName),style:{color:"black"}},null,8,Ta),(0,n._)("div",Wa,[(0,n.Uk)((0,r.zw)(e.UNIT)+" ",1),(0,n._)("u",null,(0,r.zw)(e.IP),1)])])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n._)("div",Va,[Pa,(0,n.Wm)(u,{class:"w-100",modelValue:o.QueryOptions.SelectedQueryItem,"onUpdate:modelValue":t[3]||(t[3]=e=>o.QueryOptions.SelectedQueryItem=e),onChange:i.QueryItemChangeHandle},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.QueryItems,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.label,label:e.label,value:e.label},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),"eventTabpage"!=o.selectedTabpage?((0,n.wg)(),(0,n.iD)("div",Ua)):(0,n.kq)("",!0)]),(0,n._)("div",Oa,[(0,n._)("div",Ma,[Na,(0,n.Wm)(c,{class:"w-100",style:{width:"203px"},modelValue:o.QueryOptions.TimeRange[0],"onUpdate:modelValue":t[4]||(t[4]=e=>o.QueryOptions.TimeRange[0]=e),type:"datetime"},null,8,["modelValue"])]),(0,n._)("div",za,[ja,(0,n.Wm)(c,{class:"w-100",style:{width:"203px"},modelValue:o.QueryOptions.TimeRange[1],"onUpdate:modelValue":t[5]||(t[5]=e=>o.QueryOptions.TimeRange[1]=e),type:"datetime"},null,8,["modelValue"])]),$a,(0,n._)("div",Ea,[(0,n.Wm)(m,{class:"w-100 bg-primary",onClick:i.QueryHandle},{default:(0,n.w5)((()=>[Aa])),_:1},8,["onClick"])])])])),[[x,!o.ready]]),(0,n._)("div",Ha,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Ra,[(0,n._)("div",Qa,[(0,n._)("i",{onClick:t[6]||(t[6]=e=>o.showAxisSetting=!0),class:"bi bi-sliders2-vertical"}),(0,n._)("div",La,(0,r.zw)(o.ServerResponseData.message),1)]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(h,{"element-loading-text":"數據載入中...若響應速度過慢,可以試試調整窗大小。","element-loading-background":"rgba(122, 122, 122, 0.8)",class:"query-chart flex-fill",chart_id:"query-chart",ref:"query_chart",title:`${o.QueryOptions.SelectedQueryItem}:${o.QueryOptions.SelectedEQ}/${o.QueryOptions.SelectedUNIT}`,key:o.chart_key,yAxisLabel:i.Ylabel},null,8,["title","yAxisLabel"])),[[x,o.chart_loading]])])),[[l.F8,"dataTabpage"==o.selectedTabpage],[x,o.loading]]),(0,n.wy)((0,n._)("div",Fa,[(0,n.Wm)(p,{ref:"Event_QueryHelper",queryItem:o.QueryOptions.SelectedQueryItem,eventItem:o.QueryOptions.SelectedEvent,ip:o.QueryOptions.SelectedUNIT,from:i.StartTime,to:i.EndTime},null,8,["queryItem","eventItem","ip","from","to"])],512),[[l.F8,"eventTabpage"==o.selectedTabpage]])])]),(0,n.Wm)(S,{modelValue:o.showAxisSetting,"onUpdate:modelValue":t[9]||(t[9]=e=>o.showAxisSetting=e),direction:"btt",size:"40%","show-close":!1,"z-index":5e3},{header:(0,n.w5)((({titleID:e})=>[(0,n._)("div",{id:e,class:"border-bottom d-flex flex-row"},[Ya,(0,n.Wm)(g,{class:"",size:"small",circle:"",icon:"close",onClick:t[7]||(t[7]=e=>o.showAxisSetting=!1)})],8,qa)])),default:(0,n.w5)((()=>[(0,n._)("div",Za,[(0,n.Wm)(v,{modelValue:o.SelectedQueryItem,"onUpdate:modelValue":t[8]||(t[8]=e=>o.SelectedQueryItem=e),class:"demo-tabs"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.CustomChartSetting,(e=>((0,n.wg)(),(0,n.j4)(b,{key:e.item,label:e.item,name:e.item},{default:(0,n.w5)((()=>[(0,n._)("div",Ja,[(0,n._)("div",Ga,[(0,n._)("div",null,[(0,n.Wm)(w,{size:"large",class:"item-name"},{default:(0,n.w5)((()=>[Ba])),_:1})]),(0,n._)("div",null,[(0,n.Wm)(f,{modelValue:e.yAutoScale,"onUpdate:modelValue":t=>e.yAutoScale=t,onChange:t=>i.AutoScaleHandle(e)},{default:(0,n.w5)((()=>[Ka])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),Xa,(0,n._)("div",null,[(0,n.Wm)(_,{disabled:e.yAutoScale,modelValue:e.ymax,"onUpdate:modelValue":t=>e.ymax=t,modelModifiers:{number:!0},type:"number",step:.1},null,8,["disabled","modelValue","onUpdate:modelValue","step"])]),el,(0,n._)("div",null,[(0,n.Wm)(_,{disabled:e.yAutoScale,modelValue:e.ymin,"onUpdate:modelValue":t=>e.ymin=t,modelModifiers:{number:!0},type:"number",step:.1},null,8,["disabled","modelValue","onUpdate:modelValue","step"])]),(0,n._)("div",null,[(0,n.Wm)(m,{disabled:e.yAutoScale,size:"md",onClick:i.ChartYLimitsApplyHandle},{default:(0,n.w5)((()=>[tl])),_:2},1032,["disabled","onClick"])])]),(0,n._)("div",al,[(0,n._)("div",null,[(0,n.Wm)(w,{size:"large",class:"item-name"},{default:(0,n.w5)((()=>[ll])),_:1})]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.customSetting,((t,a)=>((0,n.wg)(),(0,n.iD)("div",{class:"d-flex flex-row mx-0 my-0 px-0 py-0",key:a},[(0,n._)("div",null,(0,r.zw)(a),1),(0,n._)("div",sl,[(0,n.Wm)(y,{"color-format":"rgb",modelValue:t.borderColor,"onUpdate:modelValue":e=>t.borderColor=e,onActiveChange:l=>i.ColorChangeHandle(e,a,t.borderColor)},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])])])))),128))])])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])}function il(e,t,a,l,s,o){const i=(0,n.up)("el-pagination"),r=(0,n.up)("EventTableVue"),d=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(i,{layout:"prev, pager, next",modelValue:s.page,"onUpdate:modelValue":t[0]||(t[0]=e=>s.page=e),background:"",total:s.totalNum,"page-size":15,onCurrentChange:o.ChangePage},null,8,["modelValue","total","onCurrentChange"]),(0,n.Wm)(r,{data:s.dataRet,columns:s.columns},null,8,["data","columns"])])),[[d,s.loading]])}async function nl(){return await kl("/api/Version/WebsiteVersion")}async function rl(){return await kl("/api/Frontend/LogoText")}async function dl(){var e=await N().get("/api/version/releasenote").catch((e=>""));return console.info(e),e.data}async function ul(){return await kl("/api/DB/GetEdgeInformation")}async function cl(){return await kl("/api/PostgrelDB/Databases")}async function ml(e){return await kl(`/api/Query/ModuleInfos?dbName=${e}`)}async function hl(e,t,a,l,s,o){return await kl(`/api/DB/VibrationEnergy?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function pl(e,t,a,l,s,o){return await kl(`/api/DB/HealthScore?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function gl(e,t,a,l,s,o){return await kl(`/api/DB/AlertIndex?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function wl(e,t,a,l,s,o){return await kl(`/api/DB/vibration_raw_data?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function fl(e,t,a,l,s,o,i){return await kl(`/api/DB/vibration_raw_data_with_QueryID?edgename=${e}&ip=${t}&from=${a}&to=${l}&queryID=${s}&chart_pixel=${o}&customSettingJson=${i}`)}async function _l(e,t,a,l,s,o){return await kl(`/api/DB/Physical_quantity?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function yl(e,t,a,l,s,o){return await kl(`/api/DB/SideBandSeverity?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function bl(e,t,a,l,s,o){return await kl(`/api/DB/Frequency_doublingSeverity?edgename=${e}&ip=${t}&from=${a}&to=${l}&chart_pixel=${s}&customSettingJson=${o}`)}async function vl(e,t,a){return await kl(`/api/DB/GetSplice?queryID=${e}&from=${t}&to=${a}`)}N().defaults.baseURL=D.host;const Sl={async HealthScoreOutOfThreshold(e,t,a,l,s=1){return await kl(`/api/DB/DignoseOutOfThreshold?edgename=${e}&ip=${t}&from=${a}&to=${l}&page=${s}`)},async SideBandSeverityOutOfThres(e,t,a,l,s=1){return await kl(`/api/DB/SideBandSeverityOutOfThres?edgename=${e}&ip=${t}&from=${a}&to=${l}&page=${s}`)}};async function xl(e){return await kl(`/api/edge/edgename?ip=${e}`)}async function kl(e=""){return new Promise((t=>{N().get(e,{headers:{Authorization:"Bearer thisis_thoken"}}).then((e=>{t(e.data)})).catch((e=>{console.info(e),t({message:e.message})}))}))}const Il={key:1};function Dl(e,t,a,l,s,o){const i=(0,n.up)("el-table-column"),d=(0,n.up)("el-tag"),u=(0,n.up)("el-table");return(0,n.wg)(),(0,n.j4)(u,{data:a.data,stripe:""},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{label:"Time",sortable:"",fixed:"left",prop:"TimeStamp",formatter:o.TimeFormat},null,8,["formatter"]),(0,n.Wm)(i,{label:"IP",prop:"SensorIP"}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.columns,(e=>((0,n.wg)(),(0,n.j4)(i,{key:e.prop,label:e.label,prop:e.prop},{default:(0,n.w5)((t=>["boolean"==e.type?((0,n.wg)(),(0,n.j4)(d,{key:0,effect:"dark",type:t.row[e.prop]?"danger":"info"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(t.row[e.prop]?"V":"X"),1)])),_:2},1032,["type"])):((0,n.wg)(),(0,n.iD)("div",Il,(0,r.zw)(t.row[e.prop]),1))])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])}var Cl={props:{data:{type:Object,default(){return{SensorIP:"",TimeStamp:"",ModelName:"",OutOfAlarmThreshold:!1,OutOfWarningThreshold:!1}}},columns:{type:Array,default(){return[{label:"IP",prop:"SensorIP"}]}}},methods:{TimeFormat(e,t,a,l){return a.replace("T"," ")},FormatHandle(e,t){return"<el-tag>{{row[prop]}}</el-tag>"}}};const Tl=(0,P.Z)(Cl,[["render",Dl]]);var Wl=Tl,Vl={components:{EventTableVue:Wl},props:{ip:{type:String,default:"123"},from:{type:Date,default:Date.now},to:{type:Date,default:Date.now},queryItem:{type:String,default:""},eventItem:{type:String,default:""}},data(){return{loading:!1,dataRet:null,totalNum:1,page:1,columns:[{label:"IP",prop:"SensorIP"}]}},methods:{QueryHandle(e=1){1==e&&(this.totalNum=0,this.page=1,this.dataRet=[]),this.loading=!0,console.log(this.queryItem,this.eventItem),"Health Score"==this.queryItem&&"Out Of Threshold"==this.eventItem&&Sl.HealthScoreOutOfThreshold(this.ip,this.from,this.to,e).then((e=>{this.RenderTable(e)})).catch((e=>{console.info("八逼Q")})),"Sideband Severity"==this.queryItem&&"Out Of Threshold"==this.eventItem&&Sl.SideBandSeverityOutOfThres(this.ip,this.from,this.to,e).then((e=>{this.RenderTable(e)})),setTimeout((()=>{this.loading=!1}),200)},ChangePage(e){console.info(e),this.QueryHandle(e)},RenderTable(e){this.columns=e.ElTableColumns,console.log(e),e.message?console.info("八逼Q了"):0!=e.TotalNum?(this.totalNum=e.TotalNum,this.page=e.Page,this.dataRet=e.Data):(this.totalNum=0,this.page=1,this.dataRet=[])}}};const Pl=(0,P.Z)(Vl,[["render",il]]);var Ul=Pl,Ol={components:{GPMChart:st,EventQueryResultView:Ul},data(){return{edge_ip:"",edge_name:"",ready:!1,selectedTabpage:"dataTabpage",TypeItems:[{name:"dataTabpage",label:"數據"},{name:"eventTabpage",label:"事件"}],DatabaseList:[],ModuleList:[],QueryOptions:{SelectedEQ:"",SelectedUNIT:"",SelectedQueryItem:"",SelectedEvent:"",TimeRange:[]},SelectedQueryItem:"",QueryItems:[{label:"Health Score",eventOptions:["Out Of Threshold"]},{label:"Raw Data",eventOptions:[]},{label:"Alert Index",eventOptions:[],YAxisSetting:{max:100,min:0}},{label:"振動能量",eventOptions:[]},{label:"Physical Quanity",eventOptions:[]},{label:"Sideband Severity",eventOptions:["Out Of Threshold"]},{label:"FrequencyDoubling Severity",eventOptions:[]}],loading:!1,chart_loading:!1,showSettingPnl:!1,showAxisSetting:!1,chart_key:"",ServerResponseData:{count:0,dbConnected:!0,message:"",timeList:[],valueList:[],QueryID:"-"},FetchDataStartTime:null,FetchDataFinishTime:null,CustomChartSetting:[{item:"Health Score",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1},{item:"Raw Data",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1},{item:"Alert Index",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1},{item:"振動能量",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1},{item:"Physical Quanity",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1},{item:"Sideband Severity",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1},{item:"FrequencyDoubling Severity",ymax:100,ymin:0,customSetting:{},ymaxOfAllData:100,yminOfAllData:0,yAutoScale:!1}]}},computed:{EQList(){var e=[];return this.ModuleList.forEach((t=>{e.includes(t.EQ)||e.push(t.EQ)})),e},UNITS_IN_EQ(){return this.ModuleList.filter((e=>e.EQ==this.QueryOptions.SelectedEQ))},StartTime(){return j()(this.QueryOptions.TimeRange[0]).format("yyyy/MM/DD HH:mm:ss")},EndTime(){return j()(this.QueryOptions.TimeRange[1]).format("yyyy/MM/DD HH:mm:ss")},Ylabel(){return"Raw Data"==this.QueryOptions.SelectedQueryItem?"G":"Health Score"==this.QueryOptions.SelectedQueryItem?"Score":"Alert Index"==this.QueryOptions.SelectedQueryItem?"Index":""},IsMobileScreen(){return window.screen.width<600},EventQueryOptions(){return this.QueryItems.find((e=>e.label==this.QueryOptions.SelectedQueryItem)).eventOptions},ChartTitle(){return`${this.QueryOptions.SelectedQueryItem}:${this.QueryOptions.SelectedEQ}/${this.QueryOptions.SelectedUNIT}`}},methods:{async FetchModuleList(){this.ModuleList=await ml(this.edge_name),this.ready=!0,console.info(this.ModuleList)},QueryItemChangeHandle(e){"Raw Data"==e&&alert("資料量龐大會有點慢"),this.SelectedQueryItem=e},async QueryHandle(){this.$refs.query_chart.UpdateTitle(this.ChartTitle),this.loading=!0,this.SaveQueryOptionsToLocalStorage(),setTimeout((()=>{if("dataTabpage"==this.selectedTabpage){this.FetchDataStartTime=Date.now();let e=this.$refs.query_chart.GetPixel();new Promise((()=>{this.$refs.query_chart.Clear();let t=this.GetCustomSetting();"Health Score"==this.QueryOptions.SelectedQueryItem?pl(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):"Alert Index"==this.QueryOptions.SelectedQueryItem?gl(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):"振動能量"==this.QueryOptions.SelectedQueryItem?hl(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):"Raw Data"==this.QueryOptions.SelectedQueryItem?wl(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):"Physical Quanity"==this.QueryOptions.SelectedQueryItem?_l(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):"Sideband Severity"==this.QueryOptions.SelectedQueryItem?yl(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):"FrequencyDoubling Severity"==this.QueryOptions.SelectedQueryItem?bl(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime,e,t).then((e=>{this.RenderChart(e)})):this.loading=!1}))}else this.$refs.Event_QueryHelper.QueryHandle()}),100)},SaveQueryOptionsToLocalStorage(){var e=localStorage.getItem("query-options-by-edge"),t={};e?(t=JSON.parse(e),t[this.edge_name]=this.QueryOptions):t[this.edge_name]=this.QueryOptions,localStorage.setItem("query-options-by-edge",JSON.stringify(t)),localStorage.setItem("query-chart-setting",JSON.stringify(this.CustomChartSetting))},ReadQueryOptionsFromLocalStorage(){var e=localStorage.getItem("query-options-by-edge");if(e){var t=JSON.parse(e),a=t[this.edge_name];a?this.QueryOptions=a:(this.QueryOptions.SelectedEQ="",this.QueryOptions.SelectedUNIT=""),this.SelectedQueryItem=this.QueryOptions.SelectedQueryItem}var l=localStorage.getItem("query-chart-setting");l&&(this.CustomChartSetting=JSON.parse(l),this.SetChartYLimits())},async RenderChart(e){this.ServerResponseData=e,this.ServerResponseData.message?this.loading=!1:(this.FetchDataFinishTime=Date.now(),this.$toast.success("Done",{position:"top-right",duration:2e3}),this.ServerResponseData=e,this.SyncStyleSetting(e),this.RenderFullChart(e),this.loading=!1,console.info(this.CustomChartSetting))},ColorChangeHandle(e,t,a){console.info(e,t,a)},SyncStyleSetting(e){var t=this.CustomChartSetting.find((e=>e.item==this.QueryOptions.SelectedQueryItem));t.ymaxOfAllData=e.ymaxOfAllData,t.yminOfAllData=e.yminOfAllData,t.customSetting={},e.datasets.forEach((e=>{t.customSetting[e.label]={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,fill:e.fill,label:e.label,lineTension:e.lineTension,pointRadius:e.pointRadius,pointStyle:e.pointStyle}})),this.SaveQueryOptionsToLocalStorage()},async GetSliceDataHandle(e={}){this.chart_loading=!0;var t={};t="Raw Data"==this.QueryOptions.SelectedQueryItem?await fl(this.edge_name,this.QueryOptions.SelectedUNIT,e.from,e.to,"givemedetail"):await vl(this.ServerResponseData.QueryID,e.from,e.to),await this.RenderFullChart(t),this.chart_loading=!1},async RenderFullChart(e,t=!1){await new Promise((a=>{this.$refs.query_chart.UpdateChart(e,t),this.CustomStyleSetting(),a()}))},CustomStyleSetting(){this.SetChartYLimits()},async RenderPreviewChart(e){await new Promise((t=>{this.$refs.preview_chart.UpdatePreviewChart(e),this.$refs.preview_chart.ShowPreviewChart(),t()}))},AutoScaleHandle(e){e.item==this.QueryOptions.SelectedQueryItem?e.yAutoScale?this.$refs.query_chart.SetYAxisLimits(e.ymaxOfAllData,e.yminOfAllData):this.$refs.query_chart.SetYAxisLimits(e.ymax,e.ymin):this.$toast.success("下次查詢時將會生效",{position:"bottom",duration:1e3}),this.SaveQueryOptionsToLocalStorage()},ChartYLimitsApplyHandle(){var e=this.CustomChartSetting.find((e=>e.item==this.QueryOptions.SelectedQueryItem)),t=e.ymax,a=e.ymin;this.SelectedQueryItem==this.QueryOptions.SelectedQueryItem?this.$refs.query_chart.SetYAxisLimits(t,a):this.$toast.success("下次查詢時將會生效",{position:"bottom",duration:1e3}),this.SaveQueryOptionsToLocalStorage()},SetChartYLimits(){var e=this.CustomChartSetting.find((e=>e.item==this.QueryOptions.SelectedQueryItem));this.AutoScaleHandle(e)},GetCustomSetting(){var e=this.CustomChartSetting.find((e=>e.item==this.QueryOptions.SelectedQueryItem));void 0==e.customSetting&&(e.customSetting={});let t=JSON.stringify(e.customSetting);return console.info(e,t),JSON.stringify(e.customSetting)}},async mounted(){setTimeout((async()=>{this.edge_ip=this.$route.query.ip,void 0==this.$route.query.edgename?this.edge_name=await xl(this.edge_ip):this.edge_name=this.$route.query.edgename,this.FetchModuleList().then((()=>{this.ReadQueryOptionsFromLocalStorage(),this.$refs.query_chart.UpdateTitle(this.ChartTitle)})),this.DatabaseList=await cl()}),10)}};const Ml=(0,P.Z)(Ol,[["render",ol]]);var Nl=Ml;const zl={class:"mb-2 pb-2 border-bottom w-100 d-flex flex-row"},jl={class:"px-1"},$l={class:"flex-fill text-end px-3"},El={class:"edge-container h-100 w-100 row g-0 mx-0 my-0"};function Al(e,t,a,s,o,i){const d=(0,n.up)("Grid"),u=(0,n.up)("el-icon"),c=(0,n.up)("el-radio-button"),m=(0,n.up)("Expand"),h=(0,n.up)("el-radio-group"),p=(0,n.up)("el-switch"),g=(0,n.up)("EdgeStatusVue"),w=(0,n.up)("el-table"),f=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["h-100 fade-in",i.ColorMode])},[(0,n._)("div",zl,[(0,n.wy)((0,n._)("div",jl,[(0,n.Wm)(h,{modelValue:o.display_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.display_mode=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{size:"small",label:"dashboard"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1})])),_:1}),(0,n.Wm)(c,{size:"small",label:"list"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1})])),_:1})])),_:1},8,["modelValue"])],512),[[l.F8,o.show_head_tool]]),(0,n.wy)((0,n._)("div",$l,[(0,n.Wm)(p,{modelValue:o.dark_mode,"onUpdate:modelValue":t[1]||(t[1]=e=>o.dark_mode=e),"active-text":"Dark","active-color":"grey","inactive-text":"Light","inactive-color":"rgb(13, 110, 253)",onChange:i.SaveDarkModeToLocal},null,8,["modelValue","onChange"])],512),[[l.F8,o.show_head_tool]])]),(0,n.wy)((0,n._)("div",null,[(0,n.Wm)(w,{data:o.Edges},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.Edges,(e=>((0,n.wg)(),(0,n.j4)(g,{key:e.EdgeIP,Mode:o.display_mode,ColorMode:i.ColorMode,EdgeProp:e},null,8,["Mode","ColorMode","EdgeProp"])))),128))])),_:1},8,["data"])],512),[[l.F8,"list"==o.display_mode]]),(0,n.wy)((0,n._)("div",El,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.Edges,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["edge px-1 py-1 my-1",[1==o.Edges.length?" col-lg-12":" col-lg-6",i.ColorMode]]),key:e.EdgeIP},[(0,n.Wm)(g,{Mode:o.display_mode,ColorMode:i.ColorMode,EdgeProp:e},null,8,["Mode","ColorMode","EdgeProp"])],2)))),128))],512),[[l.F8,"dashboard"==o.display_mode]])],2)),[[f,o.loading]])}const Hl={class:"edge-status mx-1 my-1 d-flex flex-column h-100"},Rl={class:"title d-flex flex-column px-1"},Ql=(0,n._)("i",{class:"bi bi-diagram-2"},null,-1),Ll={class:"flex-fill d-flex flex-row justify-content-end"},Fl=(0,n._)("span",{class:"network-status-label py-3"},"網路狀態",-1),ql={class:"d-flex flex-row justify-content-center flex-fill"},Yl={key:0,class:"d-flex flex-row justify-content-center"},Zl={class:"value-num-div"},Jl=(0,n._)("div",{class:""},"IDMS",-1),Gl=(0,n._)("div",{class:"shadow"},null,-1),Bl={class:"value-num-div"},Kl=(0,n._)("div",null,"感測器數量",-1),Xl={class:"value-num connected-num"},es=(0,n._)("div",{class:"shadow"},null,-1),ts={class:"value-num-div"},as=(0,n.Uk)(" 健康度 "),ls=(0,n._)("div",{class:"shadow"},null,-1),ss={key:1,class:"d-flex flex-row justify-content-center"},os={class:"value-num-div"},is=(0,n._)("div",null,"CPU",-1),ns={class:"value-num connected-num"},rs=(0,n._)("div",{class:"shadow"},null,-1),ds={class:"value-num-div"},us=(0,n._)("div",{class:""},"RAM",-1),cs=(0,n._)("div",{class:"shadow"},null,-1),ms={class:"d-flex flex-row"},hs={class:"edge-state-timestamp w-100 text-start"},ps=(0,n._)("i",{class:"bi bi-caret-down"},null,-1),gs={class:"edge-state-timestamp w-100 text-end"},ws=(0,n._)("i",{class:"bi bi-server"},null,-1),fs={class:"my-2"},_s={class:"d-flex flex-row"},ys=(0,n.Uk)("Enter");function bs(e,t,a,l,s,o){const i=(0,n.up)("NetworkStatusVue"),d=(0,n.up)("el-progress"),u=(0,n.up)("count-to"),c=(0,n.up)("InfoFilled"),m=(0,n.up)("el-icon"),h=(0,n.up)("el-popover"),p=(0,n.up)("b-button"),g=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Hl,[(0,n._)("div",{class:"d-flex flex-row border-bottom mb-4",style:(0,r.j5)(o.TitleColor)},[(0,n._)("div",Rl,[(0,n._)("h3",null,[Ql,(0,n.Uk)(" "+(0,r.zw)(a.EdgeProp.Name.toUpperCase()),1)]),(0,n._)("span",null,(0,r.zw)(a.EdgeProp.EdgeIP),1)]),(0,n._)("div",Ll,[Fl,(0,n.Wm)(i,{ip:a.EdgeProp.EdgeIP,toolTipPosition:"bottom"},null,8,["ip"])])],4),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",ql,["Overview"==s.DisplayMode?((0,n.wg)(),(0,n.iD)("div",Yl,[(0,n._)("div",null,[(0,n.Wm)(d,{type:"circle",percentage:100,width:o.circleWidth,status:s.IDMSAlive?"success":"exception"},{default:(0,n.w5)((()=>[(0,n._)("div",Zl,[Jl,(0,n._)("div",{class:(0,r.C_)(["value-num",s.IDMSAlive?"Online":"Offline"])},(0,r.zw)(s.IDMSAlive?"ONLINE":"OFFLINE"),3)])])),_:1},8,["width","status"]),Gl]),(0,n._)("div",null,[(0,n.Wm)(d,{type:"circle",percentage:100,width:o.circleWidth,status:"primary"},{default:(0,n.w5)((()=>[(0,n._)("div",Bl,[Kl,(0,n._)("div",Xl,[(0,n.Wm)(u,{startVal:-1==s.edgeStatusFromIDMS_old.OnlineSensorNum?0:s.edgeStatusFromIDMS_old.OnlineSensorNum,endVal:s.edgeStatusFromIDMS.OnlineSensorNum,duration:2100},null,8,["startVal","endVal"])])])])),_:1},8,["width"]),es]),(0,n._)("div",null,[(0,n.Wm)(d,{type:"circle",percentage:s.edgeStatusFromIDMS.Health,width:o.circleWidth,status:o.health_state},{default:(0,n.w5)((()=>[(0,n._)("div",ts,[(0,n._)("div",null,[as,(0,n.Wm)(h,{width:"300",placement:"top-start",content:"表示所有監測點中其健康分數高於Alarm閥值的比率"},{reference:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"mb-2",color:"rgb(204, 204, 204)"},{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1})])),_:1})]),(0,n._)("div",{class:(0,r.C_)(["value-num","health-"+o.health_state])},[(0,n.Wm)(u,{startVal:s.edgeStatusFromIDMS_old.Health,endVal:s.edgeStatusFromIDMS.Health,duration:2100},null,8,["startVal","endVal"])],2)])])),_:1},8,["percentage","width","status"]),ls])])):((0,n.wg)(),(0,n.iD)("div",ss,[(0,n._)("div",null,[(0,n.Wm)(d,{type:"circle",percentage:s.PerformanceData.cpu,width:o.circleWidth,status:"primary"},{default:(0,n.w5)((()=>[(0,n._)("div",os,[is,(0,n._)("div",ns,[(0,n.Wm)(u,{startVal:0,endVal:s.PerformanceData.cpu,duration:2100},null,8,["endVal"])])])])),_:1},8,["percentage","width"]),rs]),(0,n._)("div",null,[(0,n.Wm)(d,{type:"circle",percentage:s.PerformanceData.ram,width:o.circleWidth,status:s.IDMSAlive?"success":"exception"},{default:(0,n.w5)((()=>[(0,n._)("div",ds,[us,(0,n._)("div",{class:(0,r.C_)(["value-num",s.IDMSAlive?"Online":"Offline"])},(0,r.zw)(s.PerformanceData.ram),3)])])),_:1},8,["percentage","width","status"]),cs])]))])),[[g,s.loading]]),(0,n._)("div",ms,[(0,n._)("div",hs,[ps,(0,n.Uk)(" "+(0,r.zw)(o.TIME_STAMP),1)]),(0,n._)("div",gs,[ws,(0,n.Uk)(" 資料庫使用: "+(0,r.zw)(a.EdgeProp.DbDickUsage),1)])]),(0,n._)("div",fs,[(0,n._)("div",_s,[(0,n.Wm)(p,{class:(0,r.C_)([o.EnterButtonColorMode,"flex-fill"]),onClick:o.EnterEdgeHandle},{default:(0,n.w5)((()=>[ys])),_:1},8,["class","onClick"])])])])])}var vs={components:{NetworkStatusVue:O},props:{EdgeProp:{type:Object,default(){return{Name:"Line-2",EdgeIP:"127.0.0.1",SensorNum:10,Status:"Offline",DbDickUsage:"?"}}},ColorMode:{type:String,default:"bg-dark"},Mode:{type:String,default:"list"}},computed:{TitleColor(){return{color:"bg-dark"==this.ColorMode?"#939393":"black"}},EnterButtonColorMode(){return"bg-dark"==this.ColorMode?"bg-dark":"bg-primary"},health_state(){return this.edgeStatusFromIDMS.Health>80?"success":this.edgeStatusFromIDMS.Health<=50?"exception":"warning"},TIME_STAMP(){return j()(this.edgeStatusFromIDMS.TimeStamp).format("yyyy-MM-DD HH:mm:ss")},circleWidth(){return window.innerWidth<500?100:160}},data(){return{DisplayMode:"Overview",performance:!1,loading:!0,edgeStatusWebsocket:null,edgeStatusFromIDMS_old:{OnlineSensorNum:-1,Health:30},edgeStatusFromIDMS:{OnlineSensorNum:-1,Health:30,TimeStamp:"2022/04/18"},IDMSAlive:!1,PerformanceData:{cpu:0,ram:0},PerformanceDataTimer:null}},methods:{EnterEdgeHandle(){this.$router.push({path:"/EdgeMain",query:{ip:this.EdgeProp.EdgeIP,edgename:this.EdgeProp.Name}})},WebsocketIni(){try{this.edgeStatusWebsocket=new WebSocket(`${D.websocket_host}/EdgeStatus?edgeIP=${this.EdgeProp.EdgeIP}`),this.edgeStatusWebsocket.onmessage=e=>{this.edgeStatusFromIDMS=JSON.parse(e.data),this.edgeStatusFromIDMS.Health=void 0==this.edgeStatusFromIDMS.Health?100:this.edgeStatusFromIDMS.Health,this.IDMSAlive=!0,this.loading=!1,this.edgeStatusFromIDMS_old=JSON.parse(JSON.stringify(this.edgeStatusFromIDMS))},this.edgeStatusWebsocket.onclose=()=>{this.WebsocketClear(),this.WebsocketIni(),this.IDMSAlive=!1,this.loading=!1},this.edgeStatusWebsocket.onerror=e=>{this.WebsocketClear(),this.WebsocketIni(),this.IDMSAlive=!1,this.loading=!1}}catch(e){this.IDMSAlive=!1,this.loading=!1}},WebsocketClear(){null!=this.edgeStatusWebsocket&&(this.edgeStatusWebsocket.onclose=null,this.edgeStatusWebsocket.onerror=null,this.edgeStatusWebsocket.close(),this.edgeStatusWebsocket=null)}},mounted(){this.WebsocketIni()},unmounted(){this.WebsocketClear()}};const Ss=(0,P.Z)(vs,[["render",bs]]);var xs=Ss,ks={components:{EdgeStatusVue:xs},mounted(){console.info("mounted ebtg"),this.dark_mode="true"==localStorage.getItem("entry-page-dark-mode"),this.Initialize()},methods:{Initialize(){this.loading=!0,this.Edges=[],setTimeout((async()=>{this.Edges=await ul(),this.loading=!1,this.show_head_tool=!0}),1e3)},SaveDarkModeToLocal(){localStorage.setItem("entry-page-dark-mode",this.dark_mode)}},computed:{ColorMode(){return this.dark_mode?"bg-dark":"bg-light"}},data(){return{dark_mode:!0,display_mode:"dashboard",loading:!1,showImg:!1,Edges:[],show_head_tool:!1}}};const Is=(0,P.Z)(ks,[["render",Al]]);var Ds=Is;const Cs={class:"fade-in bg-light h-100",style:{"z-index":"3006"}},Ts={class:"d-flex flex-row justify-content-start px-2 py-2",sticky:""};function Ws(e,t,a,l,s,o){const i=(0,n.up)("el-radio-button"),r=(0,n.up)("el-radio-group"),d=(0,n.up)("el-affix"),u=(0,n.up)("DashboardViewVue"),c=(0,n.up)("ThresholdSettingVue");return(0,n.wg)(),(0,n.iD)("div",Cs,[(0,n.Wm)(d,{offset:65},{default:(0,n.w5)((()=>[(0,n._)("div",Ts,[(0,n.Wm)(r,{modelValue:s.display,"onUpdate:modelValue":t[0]||(t[0]=e=>s.display=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{size:"small",label:"Dashboard"}),(0,n.Wm)(i,{size:"small",label:"閥值設定"})])),_:1},8,["modelValue"])])])),_:1}),((0,n.wg)(),(0,n.j4)(n.Ob,null,["Dashboard"==s.display?((0,n.wg)(),(0,n.j4)(u,{key:0})):((0,n.wg)(),(0,n.j4)(c,{key:1}))],1024))])}const Vs={class:"fade-in bg-light"},Ps={class:"d-flex flex-row justify-content-end"},Us=(0,n._)("div",null,"顯示行數:",-1),Os={style:{width:"60px"}},Ms={style:{width:"220px"}},Ns={class:"row g-1"};function zs(e,t,a,l,s,o){const i=(0,n.up)("el-option"),d=(0,n.up)("el-select"),u=(0,n.up)("Search"),c=(0,n.up)("el-icon"),m=(0,n.up)("el-input"),h=(0,n.up)("status-card-vue");return(0,n.wg)(),(0,n.iD)("div",Vs,[(0,n._)("div",Ps,[Us,(0,n._)("div",Os,[(0,n.Wm)(d,{size:"small",modelValue:s.ColsNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>s.ColsNumber=e)},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([1,2,3],(e=>(0,n.Wm)(i,{key:e,value:e,label:e},null,8,["value","label"]))),64))])),_:1},8,["modelValue"])]),(0,n._)("div",Ms,[(0,n.Wm)(m,{size:"small",modelValue:s.search_str,"onUpdate:modelValue":t[1]||(t[1]=e=>s.search_str=e),onInput:o.ShowingDataDetermine,placeholder:"輸入內容查詢...",clearable:""},{prepend:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1})])),_:1},8,["modelValue","onInput"])])]),(0,n._)("div",Ns,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.ShowingData,((e,t)=>((0,n.wg)(),(0,n.j4)(h,{edge_ip:s.edge_ip,class:(0,r.C_)(o.column_class),key:t,ip:t,veData:e},null,8,["edge_ip","class","ip","veData"])))),128))])])}const js={class:"ve-module-status d-flex flex-column px-1 py-1"},$s={class:"bg-dark"},Es={class:"info d-flex flex-row px-2 py-2"},As={class:"flex-fill d-flex justify-content-start"},Hs=(0,n._)("span",null,"EQ :",-1),Rs=(0,n._)("span",null,"UNIT :",-1),Qs={class:""},Ls={class:"d-flex flex-row justify-content-center py-2"},Fs={class:"my-5 ve-value"},qs=(0,n.Uk)("ENTER");function Ys(e,t,a,l,s,o){const i=(0,n.up)("CircleCheck"),d=(0,n.up)("Warning"),u=(0,n.up)("el-icon"),c=(0,n.up)("CircleCheckFilled"),m=(0,n.up)("WarningFilled"),h=(0,n.up)("b-button"),p=(0,n.up)("DetailViewVue");return(0,n.wg)(),(0,n.iD)("div",js,[(0,n._)("div",$s,[(0,n._)("div",Es,[(0,n._)("div",As,[Hs,(0,n._)("span",null,(0,r.zw)(a.veData.EqName),1),Rs,(0,n._)("span",null,(0,r.zw)(a.veData.UnitName),1)]),(0,n._)("div",Qs,[(0,n._)("span",null,(0,r.zw)(a.ip),1),(0,n.Wm)(u,{size:"18px"},{default:(0,n.w5)((()=>[s.Connected?((0,n.wg)(),(0,n.j4)(i,{key:0})):((0,n.wg)(),(0,n.j4)(d,{key:1}))])),_:1})])]),(0,n._)("div",Ls,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.veData.AxisStatus,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"axis-status",key:t},[(0,n._)("span",null,(0,r.zw)(t),1),(0,n._)("div",{class:(0,r.C_)(["icon d-flex flex-column",e.IsOutOfSPC?"ve-warning":"ve-normal"])},[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[e.IsOutOfSPC?((0,n.wg)(),(0,n.j4)(m,{key:1})):((0,n.wg)(),(0,n.j4)(c,{key:0}))])),_:2},1024),(0,n._)("span",Fs,(0,r.zw)(e.veValue.toFixed(3)),1)],2)])))),128))]),(0,n._)("div",null,[(0,n.Wm)(h,{onClick:o.EnterHandle,class:"w-100",variant:"dark"},{default:(0,n.w5)((()=>[qs])),_:1},8,["onClick"])]),(0,n.Wm)(p,{ref:"detail_view",edge_ip:a.edge_ip,ip:a.ip},null,8,["edge_ip","ip"])])])}const Zs=["id"],Js={class:"flex-fill"},Gs={class:"h-100 w-100 ve-detail-content"},Bs={class:"axis-title d-flex justify-content-start w-100 px-3"},Ks={class:"content d-flex flex-row justify-content-start h-100"},Xs={class:"value-display"},eo={class:"threshold-setting border-top w-100"},to={class:"row w-100"},ao={key:0,class:"col-sm-9 text-start"},lo=(0,n._)("span",null,"UCL",-1),so=["value"],oo=(0,n._)("span",null,"LCL",-1),io=["value"],no={key:1,class:"col-sm-8 setting-mode text-start"},ro=(0,n._)("span",null,"UCL",-1),uo=(0,n._)("span",null,"LCL",-1),co=(0,n.Uk)("Unlock"),mo=(0,n.Uk)("儲存"),ho=(0,n.Uk)("取消"),po={class:"charting flex-fill col-md-6"};function go(e,t,a,s,o,i){const d=(0,n.up)("el-button"),u=(0,n.up)("b-form-input"),c=(0,n.up)("GPMChart"),m=(0,n.up)("el-drawer"),h=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.j4)(m,{direction:"btt",size:"90%",modelValue:o.show,"onUpdate:modelValue":t[1]||(t[1]=e=>o.show=e),onClosed:i.CloseHandle,"show-close":!1},{header:(0,n.w5)((({titleId:e})=>[(0,n._)("div",{id:e,class:"ve-detail-title d-flex flex-row"},[(0,n._)("div",Js,(0,r.zw)(`振動能量-${o.veData.EqName}/${o.veData.UnitName}(${a.ip})`),1),(0,n.Wm)(d,{size:"large",plain:"",icon:"close",circle:"",onClick:t[0]||(t[0]=e=>o.show=!1)})],8,Zs)])),default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Gs,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.veData.AxisStatus,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"axis-infos d-flex flex-column",key:t},[(0,n._)("div",Bs,(0,r.zw)(t)+" 軸向",1),(0,n._)("div",Ks,[(0,n._)("div",{class:(0,r.C_)(["value-thres-container d-flex flex-column bg-dark",e.IsOutOfSPC?"value-red":"value-green"])},[(0,n._)("div",Xs,(0,r.zw)(e.veValue.toFixed(3)),1),(0,n._)("div",eo,[(0,n._)("div",to,[o.ThresholdSettinglock[t]?((0,n.wg)(),(0,n.iD)("div",ao,[lo,(0,n._)("input",{disabled:"",value:e.ucl,type:"number",step:"0.01"},null,8,so),oo,(0,n._)("input",{disabled:"",value:e.lcl,type:"number",step:"0.01"},null,8,io)])):(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",no,[ro,(0,n.Wm)(u,{class:"setting-input",modelValue:o.ThresholdSetting[t].ucl,"onUpdate:modelValue":e=>o.ThresholdSetting[t].ucl=e,modelModifiers:{number:!0},type:"number",step:"0.01"},null,8,["modelValue","onUpdate:modelValue"]),uo,(0,n.Wm)(u,{class:"setting-input",modelValue:o.ThresholdSetting[t].lcl,"onUpdate:modelValue":e=>o.ThresholdSetting[t].lcl=e,modelModifiers:{number:!0},type:"number",step:"0.01"},null,8,["modelValue","onUpdate:modelValue"])])),[[h,o.ThresholdSetting[t].loading]]),(0,n.wy)((0,n.Wm)(d,{class:"col-sm-3",size:"small",onClick:e=>i.UnlockClickHandle(t)},{default:(0,n.w5)((()=>[co])),_:2},1032,["onClick"]),[[l.F8,o.ThresholdSettinglock[t]]]),(0,n.wy)((0,n.Wm)(d,{class:"col-sm-2",size:"small",onClick:e=>i.SettingThersHoldHandle(t)},{default:(0,n.w5)((()=>[mo])),_:2},1032,["onClick"]),[[l.F8,!o.ThresholdSettinglock[t]]]),(0,n.wy)((0,n.Wm)(d,{class:"col-sm-2",size:"small",onClick:e=>o.ThresholdSettinglock[t]=!0},{default:(0,n.w5)((()=>[ho])),_:2},1032,["onClick"]),[[l.F8,!o.ThresholdSettinglock[t]]])])])],2),(0,n._)("div",po,[(0,n.Wm)(c,{class:"vechart",ref_for:!0,ref:i.chart_id+"_"+t,chart_id:i.chart_id+"_"+t,title:`[${t}]軸向振動能量趨勢圖`,yAxisLabel:"振動能量(G)"},null,8,["chart_id","title"])])])])))),128))])),[[h,!o.wsDataRecieved]])])),_:1},8,["modelValue","onClosed"])}var wo={components:{GPMChart:st},props:{ip:{type:String,default:"123.213.213.23"},edge_ip:{type:String,default:"123.213.213.23"}},computed:{chart_id(){return this.ip+"_ve_detail_chart"}},data(){return{show:!1,wsDataRecieved:!1,ws:null,veData:{IP:"",EqName:"",UnitName:"",AxisStatus:{X:{status:"normal",veValue:0},Y:{status:"warning",veValue:0},Z:{status:"danger",veValue:0}}},ThresholdSettinglock:{X:!0,Y:!0,Z:!0},ThresholdSetting:{X:{ucl:1,lcl:1,loading:!1},Y:{ucl:1,lcl:1,loading:!1},Z:{ucl:1,lcl:1,loading:!1}}}},methods:{Show(){this.show=!0,this.WsIni()},UnlockClickHandle(e){let t=this.veData.AxisStatus[e].ucl,a=this.veData.AxisStatus[e].lcl;this.ThresholdSetting[e].ucl=t,this.ThresholdSetting[e].lcl=a,this.ThresholdSettinglock[e]=!1},SettingThersHoldHandle(e){this.ThresholdSetting[e].loading=!0,setTimeout((()=>{let t=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?ip=${this.ip}&axis=${e}&ucl=${this.ThresholdSetting[e].ucl}&lcl=${this.ThresholdSetting[e].lcl}`);t.onmessage=a=>{var l=JSON.parse(a.data);t.onmessage=null,t.close(),setTimeout((()=>{l.data?this.$toast.info(`${this.ip} ${e}軸閥值設定完成`):this.$toast.error(`${this.ip} ${e}軸閥值設定失敗!\r\n${l.message}`),this.ThresholdSettinglock[e]=!0,this.ThresholdSetting[e].loading=!1}),500)},t.onerror=t=>{this.$toast.error(`${this.ip} ${e}軸閥值設定失敗!\r\n${t.message}`),console.info("設定VE閥值時發生websocket error",t)}}),50)},WsIni(){this.ws=new WebSocket(`${D.websocket_host}/VibrationEnergy?edgeIP=${this.edge_ip}&sensorIP=${this.ip}&type=charting`),this.ws.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){if(this.wsDataRecieved=!0,this.veData=e,this.show)try{this.$refs[this.chart_id+"_X"][0].UpdateChart(this.veData.AxisStatus.X.charting),this.$refs[this.chart_id+"_Y"][0].UpdateChart(this.veData.AxisStatus.Y.charting),this.$refs[this.chart_id+"_Z"][0].UpdateChart(this.veData.AxisStatus.Z.charting)}catch(t){console.error(t)}},CloseHandle(){null!=this.ws&&(this.ws.onmessage=null,this.ws.close()),this.wsDataRecieved=!1}},mounted(){}};const fo=(0,P.Z)(wo,[["render",go]]);var _o=fo,yo={components:{DetailViewVue:_o},props:{edge_ip:{type:String,default:"127.0.0.1"},ip:{type:String,default:"123.213.213.23"},veData:{type:Object,default(){return{IP:"",EqName:"",UnitName:"",AxisStatus:{X:{status:"normal"},Y:{status:"warning"},Z:{status:"danger"}}}}}},data(){return{Connected:!0}},methods:{EnterHandle(){this.$refs["detail_view"].Show()}}};const bo=(0,P.Z)(yo,[["render",Ys]]);var vo=bo,So={components:{StatusCardVue:vo},data(){return{edge_ip:"",ws:null,wsConnecting:!1,veData:{},ShowingData:{},ColsNumber:3,search_str:""}},computed:{column_class(){return"col-lg-"+12/this.ColsNumber}},methods:{MessageDataHandle(e){this.veData=e,""==this.search_str&&(this.ShowingData=this.veData)},WsIni(){this.ws=new WebSocket(`${D.websocket_host}/VibrationEnergy?edgeIP=${this.edge_ip}`),this.ws.onmessage=e=>this.MessageDataHandle(JSON.parse(e.data)),this.ws.onclose=()=>this.WsRetry()},WsRetry(){this.wsConnecting=!0,this.WsDestory(),this.WsIni()},WsDestory(){null!=this.ws&&(this.ws.onmessage=null,this.ws.onclose=null)},RenderCharts(){},ShowingDataDetermine(){setTimeout((()=>{if(""==this.search_str)return this.veData;var e={};Object.keys(this.veData).forEach((t=>{var a=t.toUpperCase(),l=this.veData[t].EqName.toUpperCase(),s=this.veData[t].UnitName.toUpperCase(),o=this.search_str.toUpperCase();a.includes(o)|l.includes(o)|s.includes(o)&&(e[t]=this.veData[t])})),this.ShowingData=e}),500)}},mounted(){console.log("dashview mounted"),this.WsIni()},created(){this.edge_ip=this.$route.query.ip,console.log("dashview created",this.edge_ip)},unmounted(){this.WsDestory()}};const xo=(0,P.Z)(So,[["render",zs]]);var ko=xo;const Io={class:"d-flex flex-column h-100 w-100 bg-light"},Do={class:"ve-threshold-table"},Co={key:0,class:"ve-threshold-all-setting d-flex flex-column bg-info border-top mx-1 px-3 py-3"},To={class:"d-flex flex-row border-bottom mb-2"},Wo=(0,n.Uk)("設定"),Vo={class:"d-flex flex-row"},Po={class:"d-flex flex-column"},Uo={class:"col-sm-2"},Oo={class:"col-md-1"},Mo={class:"col-sm-2"},No={class:"col-md-1"},zo={class:"col-sm-2"},jo={class:"col-sm-1"},$o={class:"col-sm-2"},Eo={class:"col-md-1"};function Ao(e,t,a,s,o,i){const d=(0,n.up)("el-table-column"),u=(0,n.up)("el-input-number"),c=(0,n.up)("el-checkbox"),m=(0,n.up)("el-table"),h=(0,n.up)("b-button"),p=(0,n.up)("b-form-input");return(0,n.wg)(),(0,n.iD)("div",Io,[(0,n._)("div",Do,[(0,n.Wm)(m,{data:o.thresholdSettings,height:i.tableHeight,"row-key":"ModuleInfo.IP",onSelectionChange:i.SelectedHandle,size:i.tableSize},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"V",fixed:"left",width:"40",type:"selection"}),(0,n.Wm)(d,{label:"IP",prop:"ModuleInfo.IP",fixed:"left",width:"140"}),(0,n.Wm)(d,{label:"EQ Name",prop:"ModuleInfo.EqName"}),(0,n.Wm)(d,{label:"UNIT Name",prop:"ModuleInfo.UnitName"}),(0,n.Wm)(d,{class:"px-0 py-0",label:"X軸向-管制上界(UCL)",prop:"ThresX.ucl",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresX.ucl,"onUpdate:modelValue":t=>e.row.ThresX.ucl=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"X軸向-管制下界(LCL)",prop:"ThresX.lcl",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresX.lcl,"onUpdate:modelValue":t=>e.row.ThresX.lcl=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"X軸向-無動作判斷閥值",prop:"ThresX.no_motion_thres",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresX.no_motion_thres,"onUpdate:modelValue":t=>e.row.ThresX.no_motion_thres=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"X軸向-連結到診斷模組",prop:"ThresX.linkToDignoseModule"},{default:(0,n.w5)((e=>[(0,n.Wm)(c,{modelValue:e.row.ThresX.linkToDignoseModule,"onUpdate:modelValue":t=>e.row.ThresX.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Y軸向-管制上界(UCL)",prop:"ThresY.ucl",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresY.ucl,"onUpdate:modelValue":t=>e.row.ThresY.ucl=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Y軸向-管制下界(LCL)",prop:"ThresY.lcl",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresY.lcl,"onUpdate:modelValue":t=>e.row.ThresY.lcl=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Y軸向-無動作判斷閥值",prop:"ThresY.no_motion_thres",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresY.no_motion_thres,"onUpdate:modelValue":t=>e.row.ThresY.no_motion_thres=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Y軸向-連結到診斷模組",prop:"ThresY.linkToDignoseModule"},{default:(0,n.w5)((e=>[(0,n.Wm)(c,{modelValue:e.row.ThresY.linkToDignoseModule,"onUpdate:modelValue":t=>e.row.ThresY.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Z軸向-管制上界(UCL)",prop:"ThresZ.ucl",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresZ.ucl,"onUpdate:modelValue":t=>e.row.ThresZ.ucl=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Z軸向-管制下界(LCL)",prop:"ThresZ.lcl",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresZ.lcl,"onUpdate:modelValue":t=>e.row.ThresZ.lcl=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Z軸向-無動作判斷閥值",prop:"ThresZ.no_motion_thres",width:"132"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{step:.01,size:"small",modelValue:e.row.ThresZ.no_motion_thres,"onUpdate:modelValue":t=>e.row.ThresZ.no_motion_thres=t},null,8,["step","modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Z軸向-連結到診斷模組",prop:"ThresZ.linkToDignoseModule"},{default:(0,n.w5)((e=>[(0,n.Wm)(c,{modelValue:e.row.ThresZ.linkToDignoseModule,"onUpdate:modelValue":t=>e.row.ThresZ.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data","height","onSelectionChange","size"])]),(0,n.Wm)(l.uT,{name:"el-zoom-in-bottom"},{default:(0,n.w5)((()=>[o.show_bottom_tool?((0,n.wg)(),(0,n.iD)("div",Co,[(0,n._)("div",To,[(0,n._)("h5",null,"批次設定 ("+(0,r.zw)(o.selectedRowNum)+")",1),(0,n.Wm)(h,{class:"mx-2",variant:"light",size:"sm",onClick:i.SendGlobalSetting},{default:(0,n.w5)((()=>[Wo])),_:1},8,["onClick"])]),(0,n._)("div",Vo,[(0,n._)("div",Po,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.globalSettings,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"d-flex flex-row row g-0",key:t},[(0,n._)("span",Uo,(0,r.zw)(t)+"軸向-管制上界(UCL)",1),(0,n._)("div",Oo,[(0,n.Wm)(p,{size:"sm",type:"number",step:.01,modelValue:e.ucl,"onUpdate:modelValue":t=>e.ucl=t,modelModifiers:{number:!0}},null,8,["step","modelValue","onUpdate:modelValue"])]),(0,n._)("span",Mo,(0,r.zw)(t)+"軸向-管制下界(LCL)",1),(0,n._)("div",No,[(0,n.Wm)(p,{size:"sm",type:"number",step:.01,modelValue:e.lcl,"onUpdate:modelValue":t=>e.lcl=t,modelModifiers:{number:!0}},null,8,["step","modelValue","onUpdate:modelValue"])]),(0,n._)("span",zo,(0,r.zw)(t)+"軸向-無動作判斷閥值",1),(0,n._)("div",jo,[(0,n.Wm)(p,{size:"sm",type:"number",step:.01,modelValue:e.no_motion_thres,"onUpdate:modelValue":t=>e.no_motion_thres=t,modelModifiers:{number:!0}},null,8,["step","modelValue","onUpdate:modelValue"])]),(0,n._)("span",$o,(0,r.zw)(t)+"軸向-連結至診斷模組",1),(0,n._)("div",Eo,[(0,n.Wm)(c,{modelValue:e.linkToDignoseModule,"onUpdate:modelValue":t=>e.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])])))),128))])])])):(0,n.kq)("",!0)])),_:1})])}var Ho={data(){return{edge_ip:"",ws:null,thresholdSettings:[],selectedRows:[],show_bottom_tool:!1,globalSettings:{X:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1},Y:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1},Z:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1}},selectedRowNum:0}},methods:{WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?ip=ALL&method=get`),this.ws.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){this.thresholdSettings=e},SelectedHandle(e){this.selectedRows=e,this.show_bottom_tool=0!=e.length,this.selectedRowNum=e.length,console.info(e,this.show_bottom_tool)},InputOnChange(e){console.info(e)},SendGlobalSetting(){let e=this.selectedRows.map((e=>e.ModuleInfo.IP));console.info(e);let t=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?method=send_json`);t.onopen=()=>{t.send(JSON.stringify({ipList:e,thresholdSetting:this.globalSettings}))},t.onmessage=e=>{var t=JSON.parse(e.data);t.data?(this.ws.close(),this.WsIni(),this.$toast.info("OK")):this.$toast.error(t.message)}}},mounted(){this.edge_ip=this.$route.query.ip,this.WsIni()},computed:{tableHeight(){return window.innerHeight-(this.show_bottom_tool?300:127)},tableSize(){return window.innerWidth<500?"small":"default"}},unmounted(){this.ws.close()}};const Ro=(0,P.Z)(Ho,[["render",Ao]]);var Qo=Ro,Lo={components:{DashboardViewVue:ko,ThresholdSettingVue:Qo},data(){return{display:"Dashboard"}},mounted(){}};const Fo=(0,P.Z)(Lo,[["render",Ws]]);var qo=Fo,Yo=[{path:"/",name:"EntryPage",component:Ds},{path:"/EdgeMain",name:"診斷頁面",component:la},{path:"/ve",name:"振動能量",component:qo},{path:"/modulestates",name:"感測器狀態",component:_a},{path:"/query",name:"Query",component:Nl}];const Zo=Yo,Jo=(0,C.p7)({history:(0,C.PO)(),routes:Zo});function Go(){return Zo}var Bo=Jo;const Ko={class:"w-100 d-flex flex-column release-content"},Xo=["innerHTML"];function ei(e,t,a,l,s,o){const i=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(i,{modelValue:s.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.show=e),direction:"btt",size:"50%"},{default:(0,n.w5)((()=>[(0,n._)("div",Ko,[(0,n._)("div",{class:"note",innerHTML:s.release_note_md},null,8,Xo)])])),_:1},8,["modelValue"])}var ti=a(5068),ai={data(){return{show:!1,website_ver:"",release_note_md:""}},mounted(){setTimeout((async()=>{var e=localStorage.getItem("idms_website_version"),t=await dl();t&&(this.release_note_md=(0,ti.TU)(t)),nl().then((t=>{this.website_ver=t,this.show=e!=this.website_ver,localStorage.setItem("idms_website_version",this.website_ver)})).catch((e=>{console.info("無法fetch網頁版本資訊")}))}),3e3)}};const li=(0,P.Z)(ai,[["render",ei]]);var si=li;const oi={class:"idms-alarm-notifi"},ii={key:0,class:"popover-content"},ni=(0,n._)("div",{class:"border-bottom my-2"},[(0,n._)("h4",null,[(0,n._)("i",{class:"bi bi-exclamation-triangle-fill"}),(0,n.Uk)(" 最近一次警報 ")])],-1),ri={class:"d-flex flex-row"},di=(0,n._)("span",null,"時間",-1),ui={class:"d-flex flex-row"},ci=(0,n._)("span",null,"模組IP",-1),mi={class:"d-flex flex-row"},hi=(0,n._)("span",null,"EQ",-1),pi={class:"d-flex flex-row"},gi=(0,n._)("span",null,"UNIT",-1),wi={class:"d-flex flex-row"},fi=(0,n._)("span",null,"警報類型",-1),_i={class:"d-flex flex-row"},yi=(0,n._)("span",null,"警報描述",-1),bi={key:1,class:"popover-content text-center"},vi=["id"],Si={class:"flex-fill text-start"},xi=["textContent"],ki={class:"my-0 d-flex flex-column h-100"},Ii={class:"flex-fill h-100"},Di={class:"text-start px-2 border-top"};function Ci(e,t,a,l,s,o){const i=(0,n.up)("WarningFilled"),d=(0,n.up)("el-icon"),u=(0,n.up)("el-popover"),c=(0,n.up)("el-button"),m=(0,n.up)("el-badge"),h=(0,n.up)("AlarmTableVue"),p=(0,n.up)("el-tag"),g=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",oi,[(0,n.Wm)(m,{hidden:0==s.n_count,type:"danger",value:s.n_count},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{size:"large",circle:"",onClick:t[0]||(t[0]=e=>{s.show_form=!s.show_form,s.n_count=0})},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{disabled:o.popOverDisable,trigger:"hover",placement:"top-start",width:null!=s.newest_alarm?500:300},{reference:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"40px",color:0==s.n_count?"grey":"red"},{default:(0,n.w5)((()=>[(0,n.Wm)(i)])),_:1},8,["color"])])),default:(0,n.w5)((()=>[null!=s.newest_alarm?((0,n.wg)(),(0,n.iD)("div",ii,[ni,(0,n._)("div",ri,[di,(0,n.Uk)(" "+(0,r.zw)(s.newest_alarm.time),1)]),(0,n._)("div",ui,[ci,(0,n.Uk)(" "+(0,r.zw)(s.newest_alarm.deviceIP),1)]),(0,n._)("div",mi,[hi,(0,n.Uk)(" "+(0,r.zw)(s.newest_alarm.eqName),1)]),(0,n._)("div",pi,[gi,(0,n.Uk)(" "+(0,r.zw)(s.newest_alarm.unitName),1)]),(0,n._)("div",wi,[fi,(0,n.Uk)(" "+(0,r.zw)(s.newest_alarm.alarmType_display),1)]),(0,n._)("div",_i,[yi,(0,n.Uk)(" "+(0,r.zw)(s.newest_alarm.alarmDescription),1)])])):((0,n.wg)(),(0,n.iD)("div",bi,"尚未有警報事件"))])),_:1},8,["disabled","width"])])),_:1})])),_:1},8,["hidden","value"]),(0,n.Wm)(g,{direction:"ltr",size:"100%",modelValue:s.show_form,"onUpdate:modelValue":t[2]||(t[2]=e=>s.show_form=e),"show-close":!1},{header:(0,n.w5)((({titleId:e})=>[(0,n._)("div",{id:e,class:"drawer-title d-flex flex-row border-bottom"},[(0,n._)("div",Si,[(0,n._)("h4",{textContent:(0,r.zw)(s.title)},null,8,xi)]),(0,n._)("span",null,[(0,n.Wm)(c,{icon:"close",circle:"",type:"info",onClick:t[1]||(t[1]=e=>s.show_form=!1)})])],8,vi)])),default:(0,n.w5)((()=>[(0,n._)("div",ki,[(0,n._)("div",Ii,[(0,n.Wm)(h,{onNew_alarm:o.NewAlarmHandle,edge_ip:a.edge_ip},null,8,["onNew_alarm","edge_ip"])]),(0,n._)("div",Di,[(0,n.Wm)(p,{effect:"dark",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(a.edge_ip),1)])),_:1})])])])),_:1},8,["modelValue"])])}const Ti={class:"h-100",style:{"margin-top":"-20px"}},Wi={class:"mode-selector"},Vi={key:0,class:"h-100"},Pi={class:"w-100 d-flex flex-row border-bottom py-3",style:{height:"80px"}},Ui={class:"newest-alarm-info row w-100"},Oi=(0,n._)("h4",{class:"col-md-2"},[(0,n._)("i",{class:"bi bi-exclamation-triangle-fill"}),(0,n.Uk)(" 最近一次警報 ")],-1),Mi={key:0,class:"col-md-10 text-start"},Ni={key:1},zi={class:"text-end my-2 flex-fill"},ji=(0,n.Uk)("Clear"),$i={class:"w-100"},Ei={key:1},Ai={key:1},Hi={class:"w-100 d-flex flex-row border-bottom py-3",style:{height:"80px"}},Ri={class:"d-flex flex-row text-start"},Qi=(0,n._)("span",{class:"mx-3"},"Form",-1),Li=(0,n._)("span",{class:"mx-3"},"To",-1),Fi=(0,n.Uk)("查詢"),qi={class:"w-100"},Yi={key:1};function Zi(e,t,a,l,s,o){const i=(0,n.up)("el-radio-button"),d=(0,n.up)("el-radio-group"),u=(0,n.up)("el-tag"),c=(0,n.up)("b-button"),m=(0,n.up)("el-pagination"),h=(0,n.up)("el-table-column"),p=(0,n.up)("el-table"),g=(0,n.up)("b-form-input"),w=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",Ti,[(0,n._)("div",Wi,[(0,n.Wm)(d,{class:"w-100",modelValue:s.mode,"onUpdate:modelValue":t[0]||(t[0]=e=>s.mode=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{label:"Real Time"}),(0,n.Wm)(i,{label:"Query "})])),_:1},8,["modelValue"])]),"Real Time"==s.mode?(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Vi,[(0,n._)("div",Pi,[(0,n._)("div",Ui,[Oi,o.RecentAlarm?((0,n.wg)(),(0,n.iD)("div",Mi,[(0,n.Wm)(u,{size:"large",effect:"dark",type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(o.RecentAlarm.time),1)])),_:1}),(0,n.Wm)(u,{size:"large",effect:"dark",type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(o.RecentAlarm.eqName)+"/"+(0,r.zw)(o.RecentAlarm.unitName)+"("+(0,r.zw)(o.RecentAlarm.deviceIP)+")",1)])),_:1}),(0,n.Wm)(u,{size:"large",effect:"dark",type:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(o.RecentAlarm.alarmType_display),1)])),_:1})])):((0,n.wg)(),(0,n.iD)("div",Ni,"(EMPTY)"))]),(0,n._)("div",zi,[(0,n.Wm)(c,{variant:"danger",size:"md"},{default:(0,n.w5)((()=>[ji])),_:1})])]),(0,n._)("div",$i,[(0,n.Wm)(m,{layout:"prev, pager, next",modelValue:s.currentPage,"onUpdate:modelValue":t[1]||(t[1]=e=>s.currentPage=e),"page-size":s.alarmViewModel.itemNumInPage,"page-count":s.alarmViewModel.totalPage,onCurrentChange:o.PageChangeHandle},null,8,["modelValue","page-size","page-count","onCurrentChange"])]),(0,n.Wm)(p,{"table-layout":"auto",border:"",stripe:"",data:s.alarms,"empty-text":"尚未有警報","row-key":"time",height:"85%",style:{width:"100%"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.columnProps,(e=>((0,n.wg)(),(0,n.j4)(h,{formatter:o.ColumnValueFormat,key:e.prop,label:e.label,prop:e.prop,width:e.width,fixed:e.fixed,sortable:""},{default:(0,n.w5)((t=>["alarmType_display"==e.prop?((0,n.wg)(),(0,n.j4)(u,{key:0,style:{width:"110px"},effect:"dark",type:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(t.row[e.prop]),1)])),_:2},1024)):((0,n.wg)(),(0,n.iD)("div",Ei,(0,r.zw)(t.row[e.prop]),1))])),_:2},1032,["formatter","label","prop","width","fixed"])))),128))])),_:1},8,["data"])])),[[w,s.rt_table_loading]]):(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Ai,[(0,n._)("div",Hi,[(0,n._)("div",Ri,[Qi,(0,n.Wm)(g,{type:"date",modelValue:s.queryOptions.from_date,"onUpdate:modelValue":t[2]||(t[2]=e=>s.queryOptions.from_date=e)},null,8,["modelValue"]),(0,n.Wm)(g,{type:"time",modelValue:s.queryOptions.from_time,"onUpdate:modelValue":t[3]||(t[3]=e=>s.queryOptions.from_time=e)},null,8,["modelValue"]),Li,(0,n.Wm)(g,{type:"date",modelValue:s.queryOptions.to_date,"onUpdate:modelValue":t[4]||(t[4]=e=>s.queryOptions.to_date=e)},null,8,["modelValue"]),(0,n.Wm)(g,{type:"time",modelValue:s.queryOptions.to_time,"onUpdate:modelValue":t[5]||(t[5]=e=>s.queryOptions.to_time=e)},null,8,["modelValue"]),(0,n.Wm)(c,{onClick:o.QueryHandle,variant:"primary",size:"md",style:{width:"300px"}},{default:(0,n.w5)((()=>[Fi])),_:1},8,["onClick"])])]),(0,n._)("div",qi,[(0,n.Wm)(m,{layout:"prev, pager, next",modelValue:s.currentPage_Query,"onUpdate:modelValue":t[6]||(t[6]=e=>s.currentPage_Query=e),"page-size":s.alarmViewModel_Query.itemNumInPage,"page-count":s.alarmViewModel_Query.totalPage,onCurrentChange:o.PageChangeHandle_Query},null,8,["modelValue","page-size","page-count","onCurrentChange"])]),(0,n.Wm)(p,{border:"",stripe:"","table-layout":"auto",data:s.alarms_query_in_currentPage,"empty-text":"Empty-Result","row-key":"time"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.columnProps,(e=>((0,n.wg)(),(0,n.j4)(h,{formatter:o.ColumnValueFormat,key:e.prop,label:e.label,prop:e.prop,width:e.width,fixed:e.fixed},{default:(0,n.w5)((t=>["alarmType_display"==e.prop?((0,n.wg)(),(0,n.j4)(u,{key:0,style:{width:"110px"},effect:"dark",type:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(t.row[e.prop]),1)])),_:2},1024)):((0,n.wg)(),(0,n.iD)("div",Yi,(0,r.zw)(t.row[e.prop]),1))])),_:2},1032,["formatter","label","prop","width","fixed"])))),128))])),_:1},8,["data"])])),[[w,s.query_table_loading]])])}var Ji={props:{edge_ip:{type:String,default:null,alarm_websocket:null}},data(){return{rt_table_loading:!0,query_table_loading:!1,columnProps:[{prop:"time",label:"時間",fixed:"left"},{prop:"deviceIP",label:"Sensor IP"},{prop:"eqName",label:"EQ"},{prop:"unitName",label:"UNIT"},{prop:"alarmType_display",label:"事件類型"},{prop:"alarmDescription",label:"Comment",fixed:"right"}],alarmViewModel:{totalAlarm:-1,totalPage:0,itemNumInPage:15,currentAlarm:null,topAlarms:[]},alarmViewModel_Query:{totalAlarm:-1,totalPage:0,itemNumInPage:15,currentAlarm:{},topAlarms:[]},alarms:[],mode:"Real Time",currentPage:1,currentPage_Query:1,alarms_query:[],alarms_query_in_currentPage:[],queryOptions:{from_date:"2022-08-18",from_time:"13:00",to_date:"2022-08-18",to_time:"15:10"}}},computed:{queryFrom(){return`${this.queryOptions.from_date} ${this.queryOptions.from_time}`},queryTo(){return`${this.queryOptions.to_date} ${this.queryOptions.to_time}`},RecentAlarm(){var e=0!=this.alarmViewModel.topAlarms.length?this.alarmViewModel.topAlarms[0]:null;return e&&(e.time=j()(e.time).format("yyyy-MM-DD HH:mm:ss")),e}},mounted(){console.info("alarm-table mounted",this.edge_ip),this.WsIni(),(0,n.YP)((()=>this.edge_ip),((e,t)=>{console.info("alarm-table",e,t)}))},methods:{WsIni(){this.alarm_websocket=new WebSocket(`ws://${this.edge_ip}:44332/AlarmForm`),this.alarm_websocket.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){this.alarmViewModel=e;this.alarmViewModel.currentAlarm;1==this.currentPage&&(this.alarms=this.alarmViewModel.topAlarms),this.rt_table_loading=!1},PageChangeHandle(e){this.rt_table_loading=!0,console.info(e),this.currentPage=e;var t=new WebSocket(`ws://${this.edge_ip}:44332/AlarmForm/Query?page=${e}`);t.onmessage=e=>{this.alarms=JSON.parse(e.data),this.rt_table_loading=!1}},QueryHandle(){this.query_table_loading=!0;var e=new WebSocket(`ws://${this.edge_ip}:44332/AlarmForm/Query?from=${this.queryFrom}&to=${this.queryTo}`);e.onmessage=e=>{this.alarmViewModel_Query=JSON.parse(e.data),console.info(this.alarmViewModel_Query),this.currentPage_Query=1,this.alarms_query_in_currentPage=this.TakeQueryAlarm(1),this.query_table_loading=!1}},TakeQueryAlarm(e=1){var t=this.alarmViewModel_Query.topAlarms,a=this.alarmViewModel_Query.itemNumInPage,l=a*(e-1);return console.info(a,l),t.slice(l,l+a)},PageChangeHandle_Query(e){this.currentPage_Query=e,this.alarms_query_in_currentPage=this.TakeQueryAlarm(e)},ColumnValueFormat(e,t,a,l){return"time"==t.property?j()(a).format("yyyy-MM-DD HH:mm:ss"):a}}};const Gi=(0,P.Z)(Ji,[["render",Zi]]);var Bi=Gi,Ki={components:{AlarmTableVue:Bi},props:{edge_ip:{type:String,default:"127.0.0.1"}},computed:{popoverText(){return`${this.newest_alarm.time}`},popOverDisable(){return window.innerWidth<500}},data(){return{title:"Alarm Form",n_count:0,show_form:!1,newest_alarm:null,alarm_websocket:null}},methods:{NewAlarmHandle(e){console.info(e),this.newest_alarm=e,this.n_count=this.n_count+1},WsIni(e){if(null==this.alarm_websocket){var t=e;null!=t&&(console.info("alarm noti ws ini:",t),this.alarm_websocket=new WebSocket(`ws://${t}:44332/AlarmForm`),this.alarm_websocket.onmessage=e=>{var t=JSON.parse(e.data);t.currentAlarm&&this.NewAlarmHandle(t.currentAlarm)})}}},mounted(){},unmounted(){this.alarm_websocket.close()}};const Xi=(0,P.Z)(Ki,[["render",Ci]]);var en=Xi;const tn={class:"chat-icon"},an={style:{position:"absolute",right:"12px",left:"12px",top:"53px"}};function ln(e,t,a,l,s,o){const i=(0,n.up)("ChatSquare"),r=(0,n.up)("el-icon"),d=(0,n.up)("el-button"),u=(0,n.up)("el-badge"),c=(0,n.up)("ChatingViewVue"),m=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",tn,[(0,n.Wm)(u,{value:s.unReadMsgNum,hidden:0==s.unReadMsgNum},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"large",circle:"",onClick:o.ChatIconClickHandle},{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["value","hidden"]),(0,n.Wm)(m,{direction:"rtl",size:o.drawer_size,modelValue:s.show_chat_room,"onUpdate:modelValue":t[0]||(t[0]=e=>s.show_chat_room=e),title:"Chat Room"},{default:(0,n.w5)((()=>[(0,n._)("div",an,[(0,n.Wm)(c,{ref:"chat_room",onMsgOnRecieved:o.MsgRevHandle},null,8,["onMsgOnRecieved"])])])),_:1},8,["size","modelValue"])])}const sn={class:"d-flex flex-column h-100 padding"},on={class:"bg-light"},nn={key:0,class:"flex-fill"},rn={class:"input-info"},dn=(0,n.Uk)("Enter"),un={key:0,class:"system-message"},cn={class:"d-flex flex-column"},mn={class:"sender w-100"},hn={key:0,class:"d-flex flex-row"},pn={class:"msg"},gn={class:"time"},wn={key:1,class:"d-flex flex-row"},fn={class:"time"},_n={class:"msg"},yn={style:{height:"50px",bottom:"50px","background-color":"black",opacity:".6"}},bn={class:"bg-light padding w-100",style:{height:"50px",bottom:"0"}},vn={class:"d-flex flex-row"},Sn=(0,n.Uk)("離開"),xn={class:"flex-fill"},kn=(0,n.Uk)("Send");function In(e,t,a,s,o,i){const d=(0,n.up)("b-form-input"),u=(0,n.up)("b-button");return(0,n.wg)(),(0,n.iD)("div",sn,[(0,n._)("div",on,[void 0==o.userNameInput?((0,n.wg)(),(0,n.iD)("div",nn,[(0,n._)("div",rn,[(0,n.Wm)(d,{modelValue:o.user_input_name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.user_input_name=e),type:"text",placeholder:"Enter your name"},null,8,["modelValue"]),(0,n.Wm)(u,{class:"w-100",variant:"primary",onClick:i.EnterRoomHandle},{default:(0,n.w5)((()=>[dn])),_:1},8,["onClick"])])])):((0,n.wg)(),(0,n.iD)("div",{key:1,class:"bg-dark",id:"messages-content",style:(0,r.j5)(i.msg_container_style)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.allMsgObjList,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.time},[e.isInfoMessage?((0,n.wg)(),(0,n.iD)("div",un,(0,r.zw)(e.message),1)):((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)("rev"==e.dir?"rev-message d-flex flow-row justify-content-start":"send-message d-flex flow-row justify-content-end"),key:e.time},[(0,n._)("div",cn,[(0,n._)("div",mn,(0,r.zw)(e.from),1),"rev"==e.dir?((0,n.wg)(),(0,n.iD)("div",hn,[(0,n._)("div",pn,(0,r.zw)(e.message),1),(0,n._)("div",gn,(0,r.zw)(e.time),1)])):((0,n.wg)(),(0,n.iD)("div",wn,[(0,n._)("div",fn,(0,r.zw)(e.time),1),(0,n._)("div",_n,(0,r.zw)(e.message),1)]))])],2))])))),128))],4)),(0,n.wy)((0,n._)("div",yn,"未讀訊息>>",512),[[l.F8,o.Unread&&o.roomEntered]]),(0,n.wy)((0,n._)("div",bn,[(0,n._)("div",vn,[(0,n._)("div",null,[(0,n.Wm)(u,{id:"sendButton",variant:"danger"},{default:(0,n.w5)((()=>[Sn])),_:1})]),(0,n._)("div",xn,[(0,n.Wm)(d,{modelValue:o.messageInput,"onUpdate:modelValue":t[1]||(t[1]=e=>o.messageInput=e),onKeydown:(0,l.D2)(i.SendMessageHandle,["enter"]),type:"text"},null,8,["modelValue","onKeydown"])]),(0,n._)("div",null,[(0,n.Wm)(u,{id:"sendButton",disable:""==o.messageInput,onClick:i.SendMessageHandle},{default:(0,n.w5)((()=>[kn])),_:1},8,["disable","onClick"])])])],512),[[l.F8,o.roomEntered]])])])}a(1693);var Dn={data(){return{userNameInput:void 0,user_input_name:"",roomEntered:!1,Unread:!1,messageInput:"",ws:null,revObjList:[],sendObjList:[],allMsgObjList:[]}},computed:{msg_container_style(){return{height:window.innerHeight-100+"px"}}},methods:{EnterRoomHandle(){this.userNameInput=""==this.user_input_name?"anonymous-"+Date.now():this.user_input_name,this.ws=new WebSocket(`${D.websocket_host}/chat?name=${this.userNameInput}`),this.ws.onmessage=e=>{var t=JSON.parse(e.data);t.dir="rev",this.allMsgObjList.push(t),this.ScrollToBottom(),this.$emit("msgOnRecieved",{})},this.ws.onopen=()=>{this.roomEntered=!0}},SendMessageHandle(){if(""==this.messageInput)return;let e={message:this.messageInput,name:this.userNameInput,from:"You",time:j()(Date.now()).format("yyyy/MM/DD HH:mm:ss")};this.ws.send(this.messageInput),this.ScrollToBottom(),e.dir="send",this.allMsgObjList.push(e),this.messageInput=""},ScrollToBottom(){var e=document.getElementById("messages-content");e.scrollTop=e.scrollHeight,console.info(e.scrollTop)},ShowUnReadIndicator(){var e=document.getElementById("messages-content");e?(console.info(e),console.info(e.scrollTop,e.scrollHeight),this.Unread=e.scrollTop!=e.scrollHeight):this.Unread=!1}},mounted(){}};const Cn=(0,P.Z)(Dn,[["render",In]]);var Tn=Cn,Wn={components:{ChatingViewVue:Tn},data(){return{show_chat_room:!1,unReadMsgNum:0}},computed:{drawer_size(){return window.innerWidth<500?"100%":"50%"}},methods:{ChatIconClickHandle(){this.show_chat_room=!0,this.unReadMsgNum=0,this.$refs["chat_room"].ShowUnReadIndicator()},MsgRevHandle(){this.show_chat_room||(this.unReadMsgNum+=1)}}};const Vn=(0,P.Z)(Wn,[["render",ln]]);var Pn=Vn,Un={components:{NetworkStatusVue:O,ReleaseNote:si,NotificationIconVue:en,ChatIconVue:Pn},data(){return{seletedRouteName:"診斷頁面",showNavbar:!1,navstyle:"bg-primary",EdgeIP:"-",EdgeName:"-",isNotEntryPAGE:!1,dynamic_underline_style:{width:"3rem"},LogoText:"IDMS",breadcrumb_show:!1}},methods:{routerHandle(e){window.innerWidth<900&&this.$refs["toggle_button"].click(),console.info(e);var t="/"!=e?{ip:this.EdgeIP,edgename:this.EdgeName}:{};this.$router.push({path:e,query:t})}},computed:{mode(){return D.mode},routes(){return Go()}},mounted(){setTimeout((()=>{this.breadcrumb_show=!0}),2e3),window.addEventListener("unload",(()=>localStorage.setItem("idms-previous-route-name",this.seletedRouteName)));var e=localStorage.getItem("idms-previous-route-name");void 0!=e&&null!=e&&(this.seletedRouteName=e);let t=(0,C.yj)();(0,n.YP)((()=>t.name),((e,a)=>{this.seletedRouteName=e,this.isNotEntryPAGE=this.showNavbar=e+""!=="EntryPage",console.info(this.showNavbar,e,a),this.isNotEntryPAGE||void 0==a||(this.navstyle="true"==localStorage.getItem("entry-page-dark-mode")?"bg-dark":"bg-primary",location.reload()),this.isNotEntryPAGE?(console.info("ROUTE PARAM",t.query),this.EdgeIP=t.query.ip,void 0==t.query.edgename?xl(this.EdgeIP).then((e=>this.EdgeName=e)):this.EdgeName=t.query.edgename,this.$refs.alarm_noti_icon.WsIni(this.EdgeIP)):rl().then((e=>this.LogoText=e))}))}};const On=(0,P.Z)(Un,[["render",I]]);var Mn=On,Nn=a(9907);(0,Nn.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var zn=a(8212),jn=a(5860);const $n=(0,l.ri)(Mn);$n.use(D),$n.use(Bo),$n.use(s.ZP),$n.use(zn.Z),$n.use(jn.ZP),$n.use(o.Z,{size:"default",zIndex:3e3});for(const[En,An]of Object.entries(i))$n.component(En,An);$n.mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,o){if(!l){var i=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],o=e[u][2];for(var n=!0,r=0;r<l.length;r++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(n=!1,o<i&&(i=o));if(n){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[l,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={826:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,o,i=l[0],n=l[1],r=l[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(r)var u=r(a)}for(t&&t(l);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},l=self["webpackChunkgpm_idms"]=self["webpackChunkgpm_idms"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(2785)}));l=a.O(l)})();
//# sourceMappingURL=index.7bf3b2c6.js.map