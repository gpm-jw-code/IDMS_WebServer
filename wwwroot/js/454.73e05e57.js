"use strict";(self["webpackChunkgpm_admin"]=self["webpackChunkgpm_admin"]||[]).push([[454],{5454:function(e,l,o){o.r(l),o.d(l,{default:function(){return k}});var t=o(3396),d=o(7139),s=o(9242);const a={class:"d-flex flex-column h-100 w-100 bg-light"},n={class:"ve-threshold-table flex-fill"},m={class:"ve-threshold-all-setting d-flex flex-row bg-dark border-info mx-1 px-3 py-3"},u={class:"d-flex flex-column"},i={class:"col-md-1"},r={class:"col-md-2"},p={class:"col-md-1"},h={class:"col-md-2"},w={class:"col-md-1"},c={class:"col-md-2"},V={class:"col-md-1"},_={class:"col-md-1"},f={class:"flex-fill text-left"},g=(0,t.Uk)("設定");function T(e,l,o,T,b,W){const U=(0,t.up)("el-checkbox"),k=(0,t.up)("el-table-column"),M=(0,t.up)("el-input-number"),S=(0,t.up)("el-table"),x=(0,t.up)("b-form-input"),D=(0,t.up)("b-button"),Y=(0,t.up)("el-affix");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t._)("div",n,[(0,t.Wm)(S,{data:b.thresholdSettings,"row-key":"ModuleInfo.IP"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{label:"V",fixed:"left",width:"40"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{modelValue:e.row.selected,"onUpdate:modelValue":l=>e.row.selected=l,onChange:l=>W.SelectedHandle(e.row.ModuleInfo.IP,e.row.selected)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,t.Wm)(k,{label:"IP",prop:"ModuleInfo.IP",fixed:"left",width:"140"}),(0,t.Wm)(k,{label:"EQ Name",prop:"ModuleInfo.EqName"}),(0,t.Wm)(k,{label:"UNIT Name",prop:"ModuleInfo.UnitName"}),(0,t.Wm)(k,{class:"px-0 py-0",label:"X軸向-管制上界(UCL)",prop:"ThresX.ucl",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresX.ucl,"onUpdate:modelValue":l=>e.row.ThresX.ucl=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"X軸向-管制下界(LCL)",prop:"ThresX.lcl",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresX.lcl,"onUpdate:modelValue":l=>e.row.ThresX.lcl=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"X軸向-無動作判斷閥值",prop:"ThresX.no_motion_thres",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresX.no_motion_thres,"onUpdate:modelValue":l=>e.row.ThresX.no_motion_thres=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"X軸向-連結到診斷模組",prop:"ThresX.linkToDignoseModule"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{modelValue:e.row.ThresX.linkToDignoseModule,"onUpdate:modelValue":l=>e.row.ThresX.linkToDignoseModule=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Y軸向-管制上界(UCL)",prop:"ThresY.ucl",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresY.ucl,"onUpdate:modelValue":l=>e.row.ThresY.ucl=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Y軸向-管制下界(LCL)",prop:"ThresY.lcl",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresY.lcl,"onUpdate:modelValue":l=>e.row.ThresY.lcl=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Y軸向-無動作判斷閥值",prop:"ThresY.no_motion_thres",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresY.no_motion_thres,"onUpdate:modelValue":l=>e.row.ThresY.no_motion_thres=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Y軸向-連結到診斷模組",prop:"ThresY.linkToDignoseModule"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{modelValue:e.row.ThresY.linkToDignoseModule,"onUpdate:modelValue":l=>e.row.ThresY.linkToDignoseModule=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Z軸向-管制上界(UCL)",prop:"ThresZ.ucl",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresZ.ucl,"onUpdate:modelValue":l=>e.row.ThresZ.ucl=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Z軸向-管制下界(LCL)",prop:"ThresZ.lcl",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresZ.lcl,"onUpdate:modelValue":l=>e.row.ThresZ.lcl=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Z軸向-無動作判斷閥值",prop:"ThresZ.no_motion_thres",width:"132"},{default:(0,t.w5)((e=>[(0,t.Wm)(M,{step:"0.01",size:"small",modelValue:e.row.ThresZ.no_motion_thres,"onUpdate:modelValue":l=>e.row.ThresZ.no_motion_thres=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(k,{label:"Z軸向-連結到診斷模組",prop:"ThresZ.linkToDignoseModule"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{modelValue:e.row.ThresZ.linkToDignoseModule,"onUpdate:modelValue":l=>e.row.ThresZ.linkToDignoseModule=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])]),(0,t.wy)((0,t.Wm)(Y,{class:"w-100",position:"bottom",offset:0},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.globalSettings,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"d-flex flex-row row",key:l},[(0,t._)("span",i,(0,d.zw)(l)+"軸向-管制上界(UCL)",1),(0,t._)("div",r,[(0,t.Wm)(x,{size:"sm",type:"number",step:"0.01",modelValue:e.ucl,"onUpdate:modelValue":l=>e.ucl=l,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("span",p,(0,d.zw)(l)+"軸向-管制下界(LCL)",1),(0,t._)("div",h,[(0,t.Wm)(x,{size:"sm",type:"number",step:"0.01",modelValue:e.lcl,"onUpdate:modelValue":l=>e.lcl=l,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("span",w,(0,d.zw)(l)+"軸向-無動作判斷閥值",1),(0,t._)("div",c,[(0,t.Wm)(x,{size:"sm",type:"number",step:"0.01",modelValue:e.no_motion_thres,"onUpdate:modelValue":l=>e.no_motion_thres=l,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("span",V,(0,d.zw)(l)+"軸向-連結至診斷模組",1),(0,t._)("div",_,[(0,t.Wm)(U,{modelValue:e.linkToDignoseModule,"onUpdate:modelValue":l=>e.linkToDignoseModule=l},null,8,["modelValue","onUpdate:modelValue"])])])))),128))]),(0,t._)("div",f,[(0,t.Wm)(D,{onClick:W.SendGlobalSetting},{default:(0,t.w5)((()=>[g])),_:1},8,["onClick"])])])])),_:1},512),[[s.F8,b.show_bottom_tool]])])}var b={data(){return{edge_ip:"",ws:null,thresholdSettings:[],show_bottom_tool:!1,globalSettings:{X:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1},Y:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1},Z:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1}}}},methods:{WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?ip=ALL&method=get`),this.ws.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){this.thresholdSettings=e},SelectedHandle(e,l){let o=this.thresholdSettings.findIndex((e=>1==e.selected));this.show_bottom_tool=-1!=o},InputOnChange(e){console.info(e)},SendGlobalSetting(){let e=this.thresholdSettings.filter((e=>1==e.selected)).map((e=>e.ModuleInfo.IP));console.info(e);let l=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?method=send_json`);l.onopen=()=>{l.send(JSON.stringify({ipList:e,thresholdSetting:this.globalSettings}))},l.onmessage=e=>{var l=JSON.parse(e.data);l.data?(this.ws.close(),this.WsIni(),this.$toast.info("OK")):this.$toast.error(l.message)}}},mounted(){this.edge_ip=this.$route.params.ip,this.WsIni()},unmounted(){this.ws.close()}},W=o(89);const U=(0,W.Z)(b,[["render",T]]);var k=U}}]);
//# sourceMappingURL=454.73e05e57.js.map