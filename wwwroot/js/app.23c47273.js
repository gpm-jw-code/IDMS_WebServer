(function(){var e={6700:function(e,t,a){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=o,e.exports=l,l.id=6700},6894:function(e,t,a){"use strict";var s=a(9242),l=a(936),o=a(2152),n=a(2748),i=(a(4415),a(3396)),r=a(7139);const d={id:"breadcrumb",sticky:""},c={class:"container-fluid"},u=(0,i._)("a",{class:"navbar-brand",style:{position:"relative",left:"-30px"},href:"/"},"GPM",-1),h={class:"navbar-toggler",type:"button"},m=(0,i._)("span",{class:"navbar-toggler-icon"},null,-1),p=[m],w={key:0,class:"collapse navbar-collapse d-flex flex-row",id:"navbar"},g={class:"navbar-nav flex-fill"},f={class:"edge-info d-flex flex-row justify-cotent-end"},_={class:"name mx-2"},y={class:"ip mx-2"},v={class:"router-view-content"};function b(e,t,a,s,l,o){const n=(0,i.up)("el-radio-button"),m=(0,i.up)("el-radio-group"),b=(0,i.up)("NetworkStatusVue"),S=(0,i.up)("router-view"),I=(0,i.up)("ReleaseNote"),k=(0,i.Q2)("b-toggle");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",d,[(0,i._)("nav",{class:(0,r.C_)(["navbar navbar-expand-sm sticky",l.navstyle])},[(0,i._)("div",c,[u,(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",h,p)),[[k,"navbar"]]),l.showNavbar?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",g,[(0,i.Wm)(m,{modelValue:l.seletedRouteName,"onUpdate:modelValue":t[0]||(t[0]=e=>l.seletedRouteName=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.routes,(e=>((0,i.wg)(),(0,i.j4)(n,{class:"mx-1",key:e.path,onClick:t=>o.routerHandle(e.path),label:e.name},null,8,["onClick","label"])))),128))])),_:1},8,["modelValue"])]),(0,i._)("div",f,[(0,i._)("div",null,[(0,i._)("div",_,(0,r.zw)(l.EdgeName.toUpperCase()),1),(0,i._)("div",y,(0,r.zw)(l.EdgeIP),1)]),(0,i.Wm)(b,{class:"px-0 py-0 mx-0 my-0",ip:l.EdgeIP,toolTipPosition:"bottom"},null,8,["ip"])])])):(0,i.kq)("",!0)])],2)]),(0,i.Wm)(S,null,{default:(0,i.w5)((({Component:e})=>[(0,i._)("div",v,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e)))])])),_:1}),(0,i.Wm)(I)],64)}var S={get host(){return window.location.protocol+"//"+window.location.host},get websocket_host(){return this.host.replace("http","ws")},get idms_websocket_host(){return window.location.protocol.replace("http","ws")+"//"+window.location.hostname+":44332"},mode:"gpm"};console.info(window.location.protocol.replace("http","ws")+"//"+window.location.hostname+":44332"),console.info(S.host),console.info("websocket_host",S.websocket_host),console.info("idms_websocket_host",S.idms_websocket_host);var I=a(2483);const k={class:"component-test h-100 w-100"};function x(e,t,a,s,l,o){const n=(0,i.up)("NetworkStatusVue");return(0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("div",null,[(0,i.Wm)(n,{successColor:"green",toolTipPosition:"left"}),(0,i.Wm)(n,{ip:"192.168.0.133",successColor:"green",toolTipPosition:"left"}),(0,i.Wm)(n,{ip:"192.168.0.101",displayPingTime:"true",successColor:"green",toolTipPosition:"left"})])])}const D={class:"network-status"};function C(e,t,a,s,l,o){const n=(0,i.up)("el-button"),d=(0,i.up)("el-tooltip");return(0,i.wg)(),(0,i.iD)("div",D,[(0,i.Wm)(d,{class:"box-item",effect:"dark",content:`${l.ping} ms`,placement:a.toolTipPosition},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{onClick:o.Click,class:"my-s",size:a.size,round:"",style:(0,r.j5)([o.style]),type:l.success?"success":"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.displayPingTime?l.ping+"ms":""),1)])),_:1},8,["onClick","size","style","type"])])),_:1},8,["content","placement"])])}var T={props:{ip:{type:String,default:"127.0.0.1"},successColor:{type:String,default:"#92cf35"},failColor:{type:String,default:"rgb(211, 40, 40)"},toolTipPosition:{type:String,default:"right"},host_route:{type:String,default:`${S.websocket_host}/ping-ip`},size:{type:String,default:"small"}},data(){return{success:"unknown",ping:-1,displayPingTime:!1,websocket:null}},computed:{style(){return{backgroundColor:"unknown"==this.success?"orange":this.success?this.successColor:this.failColor,width:this.displayPingTime?"60px":"auto",boxShadow:`2px -2px 12px 0.001rem ${"unknown"==this.success?"orange":this.success?this.successColor:this.failColor}`}}},methods:{Click(){this.displayPingTime=!this.displayPingTime}},mounted(){this.websocket=new WebSocket(this.host_route+`?ip=${this.ip}`),this.websocket.onerror=()=>{},this.websocket.onmessage=e=>{var t=JSON.parse(e.data);this.success=t.Success,this.ping=t.PingTime}},unmounted(){this.websocket.onerror=null,this.websocket.onmessage=null,this.websocket.close()}},W=a(89);const P=(0,W.Z)(T,[["render",C],["__scopeId","data-v-e3fca960"]]);var V=P,M={components:{NetworkStatusVue:V}};const E=(0,W.Z)(M,[["render",x]]);var j=E;const U={class:"home"};function N(e,t,a,s,l,o){const n=(0,i.up)("ssmManager");return(0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(n)])}const O={class:"table my_table"},z=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"alway-show-col",scope:"col",width:"5%"},"#"),(0,i._)("th",{class:"alway-show-col",scope:"col"},"IP"),(0,i._)("th",{class:"alway-show-col",scope:"col"},"PORT"),(0,i._)("th",{class:"alway-show-col",scope:"col",width:"10%"},"量測範圍"),(0,i._)("th",{class:"alway-show-col",scope:"col",width:"20%"},"更新時間"),(0,i._)("th",{class:"alway-show-col",scope:"col",width:"20%"},"狀態"),(0,i._)("th",{class:"opt-region-div",scope:"col",width:"5%"}),(0,i._)("th",{class:"opt-region-div",scope:"col",width:"5%"})])],-1),A={key:0},R=(0,i._)("td",{colspan:"7",style:{color:"grey"}},"Empty",-1),$=[R];function H(e,t,a,s,l,o){const n=(0,i.up)("ManagerOperatesVue"),r=(0,i.up)("el-divider"),d=(0,i.up)("ModuleState");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onOnModuleAdd:o.ModuleAddingHandle},null,8,["onOnModuleAdd"]),(0,i.Wm)(r),(0,i._)("table",O,[z,(0,i._)("tbody",null,[0==l.ModuleList.length?((0,i.wg)(),(0,i.iD)("tr",A,$)):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(l.ModuleList,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.endPoint,moduleInfo:e,onOnModuleRemove:o.ModuleRemovedHandle},null,8,["moduleInfo","onOnModuleRemove"])))),128))])])])}var L=a(6265),Q=a.n(L);async function F(){var e=await Q().get("api/SystemSettings");return 200==e.status?e.data:{}}async function Z(e){var t=await Q().post("api/SystemSettings",e);return 200==t.status?t.data:{}}async function Y(){var e=await Q().get("api/ModuleManager/ModuleList");return 200==e.status?e.data:[]}async function B(){var e=await Q().get("api/AppState/GetAppStates");return e.data}async function q(e){var t=await Q().post("api/ModuleManager/RemoveModule",e);return t.data}async function G(e,t){var a=await Q().post("api/ModuleManager/AddModule",{ip:e,port:t});return a.data}async function K(e="127.0.0.1",t=231,a=2){var s=await Q().post("api/ModuleManager/SettingMeasureRange",{Range:a,ip:e,port:t}).catch((e=>{console.info(e)}));return s.data}async function X(e){var t=await Q().get(`api/TcpClient/KickOut/${e}`);return t.data}Q().defaults.baseURL=S.host;var J=a(6797),ee=a.n(J),te=a(2482);class ae{constructor(e,t){(0,te.Z)(this,"ip",""),(0,te.Z)(this,"port",-1),(0,te.Z)(this,"index",0),this.ip=e,this.port=t}}var se=ae,le=a(6647),oe=a(2655),ne=a(7178);const ie={class:"module-state-tr"},re={class:"pt-2"},de={class:"pt-2"},ce={key:0,class:"spinner-border",role:"status"},ue=(0,i._)("span",{class:"visually-hidden"},null,-1),he=[ue],me={class:"dropdown"},pe={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},we=["onClick"],ge={class:"spinner-border",role:"status"},fe=(0,i._)("span",{class:"visually-hidden"},null,-1),_e=[fe],ye={style:{"text-align":"center"}},ve={class:"spinner-border",role:"status"},be=(0,i._)("span",{class:"visually-hidden"},null,-1),Se=[be],Ie={class:"opt-region-div"},ke=(0,i.Uk)("More"),xe={class:"opt-region-div"},De=(0,i.Uk)("Remove"),Ce={colspan:"8"},Te={class:"row g-1"},We={class:"col-lg-6 f-table"},Pe=(0,i._)("div",{class:"title"},"特徵值",-1),Ve={class:"table"},Me=(0,i._)("tr",{class:"columns"},[(0,i._)("th",{scope:"col",class:"col-2"}),(0,i._)("th",{scope:"col",class:"col-3"},"X"),(0,i._)("th",{scope:"col",class:"col-3"},"Y"),(0,i._)("th",{scope:"col",class:"col-3"},"Z")],-1),Ee=(0,i._)("td",{class:"f-name"},"P2P",-1),je=(0,i._)("td",{class:"f-name"},"RMS",-1),Ue=(0,i._)("td",{class:"f-name"},"振動能量",-1),Ne={class:"col-lg-6"},Oe=(0,i._)("div",{class:"title"},"Raw Data",-1),ze={components:{GPMChart:le.Z},data(){return{SensingData:{AccData:{X:[],Y:[],Z:[]},FFTData:{X:[],Y:[],Z:[],FreqVec:[],Freq_Resolution:1},Features:{AccP2P:{X:-1,Y:-1,Z:-1},AccRMS:{X:-1,Y:-1,Z:-1},VibrationEnergy:{X:-1,Y:-1,Z:-1}},measureRange:"",ErrorCode:-1,RecieveTime:""},ConnectionState:"",ShowMore:!1,gRange:2,gRangeSetting:!1,connectState_ws:null,data_ws:null}},computed:{DataUpdateTime(){return ee()(this.SensingData.RecieveTime).format("yyyy-MM-DD HH:mm:ss")},toggleID(){return"toggle"+this.moduleInfo.ip.replaceAll(".","_")+this.moduleInfo.port},chart(){return this.$refs[this.moduleInfo.ip]}},props:{moduleInfo:{type:se,default:()=>new se("127.0.0.1",6969)}},methods:{WsSensingDataHandle(e){var t=JSON.parse(e);this.SensingData=JSON.parse(t.Message),this.gRange=this.SensingData.measureRange.replace("G","");var a=[{label:"X",data:this.SensingData.AccData.X,borderColor:"rgb(26, 123, 255)"},{label:"Y",data:this.SensingData.AccData.Y,borderColor:"rgb(87, 185, 120)"},{label:"Z",data:this.SensingData.AccData.Z,borderColor:"rgb(217, 94, 94)"}],s=a[0].data.length,l=[];for(let o=0;o<s;o++)l.push(o+1);this.chart.UpdateChart(l,a,!1,!1)},CreateChartingData(){},WsConnectStateDataHandle(e){var t=JSON.parse(e);this.ConnectionState=t.Message},MoreBtnClickHandle(){this.ShowMore=!this.ShowMore},async ModifyGRange(e){this.gRangeSetting=!0;var t=await K(this.moduleInfo.ip,this.moduleInfo.port,e);console.info(t),t.errorCode,setTimeout((()=>{this.gRangeSetting=!1}),500)}},mounted(){this.gRange=this.moduleInfo.measureRage,this.data_ws=new WebSocket(`${S.websocket_host}/module_data/${this.moduleInfo.endPoint}`),this.data_ws.onopen=()=>{console.info(`${this.moduleInfo.endPoint} data ws 已連接.`)},this.data_ws.onmessage=e=>{this.WsSensingDataHandle(e.data)},this.connectState_ws=new WebSocket(`${S.websocket_host}/module_state/${this.moduleInfo.endPoint}`),this.connectState_ws.onopen=()=>{console.info(`${this.moduleInfo.endPoint} state ws 已連接.`)},this.connectState_ws.onmessage=e=>{this.WsConnectStateDataHandle(e.data)}},unmounted(){this.data_ws.close(),this.connectState_ws.close()}};var Ae=Object.assign(ze,{__name:"ModuleState",emits:["OnModuleRemove"],setup(e,{emit:t}){async function a(e){oe.T.confirm(`確定要移除 ${e.endPoint}?`,"Warning",{confirmButtonText:"確定",cancelButtonText:"取消"}).then((async()=>{var a=await q(e);a&&(t("OnModuleRemove",{}),(0,ne.z8)({type:"info",message:`${e.endPoint} 刪除成功`}))}))}return(t,l)=>{const o=(0,i.up)("b-button"),n=(0,i.up)("b-collapse"),d=(0,i.Q2)("b-toggle");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("tr",ie,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("th",null,[(0,i._)("div",null,(0,r.zw)(e.moduleInfo.index),1)])),[[d,t.toggleID]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("td",null,[(0,i._)("div",re,(0,r.zw)(e.moduleInfo.ip),1)])),[[d,t.toggleID]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("td",null,[(0,i._)("div",de,(0,r.zw)(e.moduleInfo.port),1)])),[[d,t.toggleID]]),(0,i._)("td",null,[t.gRangeSetting?((0,i.wg)(),(0,i.iD)("div",ce,he)):(0,i.kq)("",!0),(0,i.Wm)(s.uT,{name:"el-zoom-in-bottom"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",me,[(0,i.Wm)(o,{class:(0,r.C_)(["dropdown-toggle measure-range-button",603==t.SensingData.ErrorCode?"disabled":""]),variant:"dark",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",size:"md"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.gRange)+"G",1)])),_:1},8,["class"]),(0,i._)("ul",pe,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([2,4,8,16],(e=>(0,i._)("li",{key:e},[(0,i._)("u",{class:"dropdown-item",onClick:a=>t.ModifyGRange(e)},(0,r.zw)(e)+"G",9,we)]))),64))])],512),[[s.F8,!(t.gRangeSetting|""==e.moduleInfo.measureRange)]])])),_:1})]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("td",null,[(0,i.wy)((0,i._)("div",ge,_e,512),[[s.F8,""==t.SensingData.RecieveTime]]),(0,i.Wm)(s.uT,{name:"el-zoom-in-bottom"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{class:"pt-2"},(0,r.zw)(t.DataUpdateTime),513),[[s.F8,""!=t.SensingData.RecieveTime]])])),_:1})])),[[d,t.toggleID]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("td",ye,[(0,i.wy)((0,i._)("div",ve,Se,512),[[s.F8,-1==t.SensingData.ErrorCode]]),(0,i.Wm)(s.uT,{name:"el-zoom-in-bottom"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{class:"connection-label",style:(0,r.j5)({backgroundColor:0==t.SensingData.ErrorCode?"seagreen":"red"})},(0,r.zw)(0==t.SensingData.ErrorCode?"CONNECTED":t.SensingData.ErrorCode),5),[[s.F8,-1!=t.SensingData.ErrorCode]])])),_:1})])),[[d,t.toggleID]]),(0,i._)("td",Ie,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(o,{size:"sm",variant:"light",squared:""},{default:(0,i.w5)((()=>[ke])),_:1})),[[d,t.toggleID]])]),(0,i._)("td",xe,[(0,i.Wm)(o,{size:"sm",variant:"danger",squared:"",onClick:l[0]||(l[0]=t=>a(e.moduleInfo))},{default:(0,i.w5)((()=>[De])),_:1})])]),(0,i._)("tr",null,[(0,i._)("td",Ce,[(0,i.Wm)(n,{ref:"collapse",class:"more-info-collapse",id:t.toggleID},{default:(0,i.w5)((()=>[(0,i._)("div",Te,[(0,i._)("div",We,[Pe,(0,i._)("table",Ve,[Me,(0,i._)("tbody",null,[(0,i._)("tr",null,[Ee,(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.AccP2P.X.toFixed(4)),1),(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.AccP2P.Y.toFixed(4)),1),(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.AccP2P.Z.toFixed(4)),1)]),(0,i._)("tr",null,[je,(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.AccRMS.X.toFixed(4)),1),(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.AccRMS.Y.toFixed(4)),1),(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.AccRMS.Z.toFixed(4)),1)]),(0,i._)("tr",null,[Ue,(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.VibrationEnergy.X.toFixed(4)),1),(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.VibrationEnergy.Y.toFixed(4)),1),(0,i._)("td",null,(0,r.zw)(t.SensingData.Features.VibrationEnergy.Z.toFixed(4)),1)])])])]),(0,i._)("div",Ne,[Oe,(0,i.Wm)(le.Z,{ref:e.moduleInfo.ip,style:{height:"250px"},id:e.moduleInfo.ip,xlabelUseTimeFormat:!1,title:"Raw Data-"+e.moduleInfo.ip,yAxisLabel:"G",xAxisLabel:"Index"},null,8,["id","title"])])])])),_:1},8,["id"])])])],64)}}});const Re=Ae;var $e=Re;const He={class:"ssm-manager-opt"},Le=(0,i.Uk)("IP"),Qe=(0,i.Uk)("Port"),Fe=(0,i.Uk)("新增"),Ze=(0,i.Uk)("PING 工具");function Ye(e,t,a,s,l,o){const n=(0,i.up)("b-input-group-text"),r=(0,i.up)("b-form-input"),d=(0,i.up)("b-button"),c=(0,i.up)("b-input-group"),u=(0,i.up)("b-card"),h=(0,i.up)("PingTool"),m=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.iD)("div",He,[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(c,null,{prepend:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[Le])),_:1}),(0,i.Wm)(r,{style:{width:"100px"},modelValue:l.ip,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ip=e),size:"md"},null,8,["modelValue"]),(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[Qe])),_:1}),(0,i.Wm)(r,{number:"",modelValue:l.port,"onUpdate:modelValue":t[1]||(t[1]=e=>l.port=e),size:"md"},null,8,["modelValue"])])),append:(0,i.w5)((()=>[(0,i.Wm)(d,{onClick:o.AddBtnHandle},{default:(0,i.w5)((()=>[Fe])),_:1},8,["onClick"]),(0,i.Wm)(d,{variant:"primary",onClick:o.PingBtnHandle},{default:(0,i.w5)((()=>[Ze])),_:1},8,["onClick"])])),_:1})])])),_:1}),(0,i.Wm)(m,{modelValue:l.showPingTool,"onUpdate:modelValue":t[2]||(t[2]=e=>l.showPingTool=e),direction:"btt",title:"Ping Tool",size:"50%"},{default:(0,i.w5)((()=>[(0,i.Wm)(h)])),_:1},8,["modelValue"])])}const Be=e=>((0,i.dD)("data-v-0fde736c"),e=e(),(0,i.Cn)(),e),qe={class:"ping-opt d-flex",style:{width:"200px"}},Ge=Be((()=>(0,i._)("div",null,"IP:",-1))),Ke={class:"msg-container"};function Xe(e,t,a,s,l,o){const n=(0,i.up)("el-input"),d=(0,i.up)("el-button"),c=(0,i.up)("el-divider");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",qe,[Ge,(0,i._)("div",null,[(0,i.Wm)(n,{modelValue:l.ip,"onUpdate:modelValue":t[0]||(t[0]=e=>l.ip=e)},null,8,["modelValue"])]),(0,i._)("div",null,[(0,i.Wm)(d,{onClick:o.PingBtnHandle,type:l.pinging?"danger":"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.pinging?"STOP":"PING"),1)])),_:1},8,["onClick","type"])])]),(0,i.Wm)(c),(0,i._)("div",Ke,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.revMsgList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},(0,r.zw)(e),1)))),128))])])}var Je={data(){return{ip:"192.168.0.1",ws:null,revMsgList:[],pinging:!1}},methods:{PingBtnHandle(){this.pinging?this.PingSTopBtnHandle():(this.revMsgList=[`Ping ${this.ip} (使用32位元組的資料):`],this.ws=new WebSocket(`${S.websocket_host}/ping/${this.ip}`),this.ws.onopen=()=>{console.info("ping ws connected"),this.pinging=!0},this.ws.onmessage=e=>{this.revMsgList.push(e.data),"IP Format Incorrect"==e.data&&(this.pinging=!1,this.ws.close())})},PingSTopBtnHandle(){this.ws.send("stop"),this.ws.close(),this.pinging=!1}}};const et=(0,W.Z)(Je,[["render",Xe],["__scopeId","data-v-0fde736c"]]);var tt=et,at={components:{PingTool:tt},data(){return{ip:"127.0.0.1",port:5e3,showPingTool:!1}},methods:{async AddBtnHandle(){await G(this.ip,this.port),this.$emit("OnModuleAdd",{}),(0,ne.z8)({showClose:!0,type:"success",message:"新增完成"})},async PingBtnHandle(){this.showPingTool=!0}}};const st=(0,W.Z)(at,[["render",Ye]]);var lt=st,ot={data(){return{ModuleList:[]}},components:{ModuleState:$e,ManagerOperatesVue:lt},computed:{TotalModuleNum(){return this.ModuleList.length}},methods:{async ModuleAddingHandle(e){console.info("??",e),this.ModuleList=await Y()},async ModuleRemovedHandle(){this.ModuleList=await Y()}},async mounted(){this.ModuleList=await Y()}};const nt=(0,W.Z)(ot,[["render",H]]);var it=nt,rt={name:"HomeView",components:{ssmManager:it}};const dt=(0,W.Z)(rt,[["render",N]]);var ct=dt;const ut={class:"admin-view fade-in"},ht={class:"row"},mt={class:"col-lg-4"},pt={class:"col-lg-4"},wt={class:"col-lg-4"},gt={class:"row"},ft={class:"col-lg-8"},_t={class:"col-lg-4"};function yt(e,t,a,s,l,o){const n=(0,i.up)("SysSettingCard"),d=(0,i.up)("PCStateCard"),c=(0,i.up)("SSMInfoCard"),u=(0,i.up)("TcpIPClientListCard"),h=(0,i.up)("SystemOperation");return(0,i.wg)(),(0,i.iD)("div",ut,[(0,i._)("p",null,"System Start Time : "+(0,r.zw)(o.AppStartTime),1),(0,i._)("div",ht,[(0,i._)("div",mt,[(0,i.Wm)(n)]),(0,i._)("div",pt,[(0,i.Wm)(d,{pcState:l.app_states.pcState},null,8,["pcState"])]),(0,i._)("div",wt,[(0,i.Wm)(c,{ssmNumber:l.app_states.ssmNumber},null,8,["ssmNumber"])])]),(0,i._)("div",gt,[(0,i._)("div",ft,[(0,i.Wm)(u,{tcpClientState:l.app_states.tcpClientState},null,8,["tcpClientState"])]),(0,i._)("div",_t,[(0,i.Wm)(h)])])])}const vt={class:"card system-setting-card",style:{width:"100%"}},bt={class:"card-body"},St={class:"d-flex"},It=(0,i._)("h5",{class:"card-title"},"SETTINGS",-1),kt={class:"d-flex justify-content-end w-100"},xt={class:"btn-group !spacing",role:"group","aria-label":"Basic example"},Dt=(0,i._)("h6",null,[(0,i._)("b",null,"TCP Connection")],-1),Ct=(0,i.Uk)("TCP Server Port"),Tt=(0,i._)("h6",null,[(0,i._)("b",null,"Devices")],-1);function Wt(e,t,a,l,o,n){const r=(0,i.up)("lock"),d=(0,i.up)("unlock"),c=(0,i.up)("el-icon"),u=(0,i.up)("el-divider"),h=(0,i.up)("el-col"),m=(0,i.up)("el-input"),p=(0,i.up)("el-row"),w=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",vt,[(0,i._)("div",bt,[(0,i._)("div",St,[It,(0,i._)("div",kt,[(0,i.wy)((0,i._)("div",xt,[(0,i._)("a",{class:"btn btn-light btn-sm",onClick:t[0]||(t[0]=(...e)=>n.ApplySettingHandle&&n.ApplySettingHandle(...e)),role:"button"},"Apply"),(0,i._)("a",{class:"btn btn-danger btn-sm",onClick:t[1]||(t[1]=(...e)=>n.CancelSettingHandle&&n.CancelSettingHandle(...e)),role:"button"},"Cancel")],512),[[s.F8,!o.settingLock]]),(0,i.Wm)(c,{class:"my-2 mx-2",onClick:t[2]||(t[2]=e=>o.settingLock=!o.settingLock)},{default:(0,i.w5)((()=>[o.settingLock?((0,i.wg)(),(0,i.j4)(r,{key:0})):((0,i.wg)(),(0,i.j4)(d,{key:1}))])),_:1})])]),(0,i.Wm)(u),Dt,(0,i.Wm)(p,{gutter:10},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{span:9},{default:(0,i.w5)((()=>[Ct])),_:1}),(0,i.Wm)(h,{span:4,class:"input-item-col"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{disabled:o.settingLock,type:"number",modelValue:o.settings.servers.tcpServerPort,"onUpdate:modelValue":t[3]||(t[3]=e=>o.settings.servers.tcpServerPort=e),min:0,style:{width:"120px"}},null,8,["disabled","modelValue"])])),_:1})])),_:1}),(0,i.Wm)(u),Tt])])),[[w,o.loading]])}var Pt={data(){return{loading:!0,settingLock:!0,settings:{tcpClient:{autoKickOutClient:!0,connectionLimits:10},servers:{tcpServerPort:0}}}},methods:{async FetchSettingFromBackend(){this.loading=!0,this.settings=await F(),this.loading=!1},async ApplySettingToBackend(){this.settings=await Z(this.settings)},CancelSettingHandle(){this.FetchSettingFromBackend(),this.settingLock=!0},async ApplySettingHandle(){await this.ApplySettingToBackend(),this.settingLock=!0}},mounted(){this.FetchSettingFromBackend()}};const Vt=(0,W.Z)(Pt,[["render",Wt]]);var Mt=Vt;const Et={class:"col-lg card",style:{width:"100%"}},jt={class:"card-body"},Ut=(0,i._)("h5",{class:"card-title"},"TCP/IP SERVER",-1),Nt={class:"row w-100 g-1 d-flex justify-content-start"},Ot={class:"col-lg-4 g-1 justify-content-center bg-light"},zt=(0,i._)("div",{class:"py-3"},[(0,i._)("u",null,[(0,i._)("b",null,"SERVER STATE")])],-1),At={class:"row"},Rt=(0,i._)("div",{class:"col-lg-6"},"HOST:",-1),$t={class:"col-lg-6"},Ht={class:"row"},Lt=(0,i._)("div",{class:"col-lg-6"},"STATUS:",-1),Qt={class:"col-lg-6"},Ft={class:"col-lg-8 bg-light"},Zt=(0,i._)("div",{class:"w-100 py-3"},[(0,i._)("u",null,[(0,i._)("b",{class:""},"CLIENTS")])],-1),Yt=(0,i.Uk)("REMOVE"),Bt={class:"bg-dark"};function qt(e,t,a,s,l,o){const n=(0,i.up)("el-divider"),d=(0,i.up)("el-tag"),c=(0,i.up)("el-table-column"),u=(0,i.up)("el-button"),h=(0,i.up)("el-table");return(0,i.wg)(),(0,i.iD)("div",Et,[(0,i._)("div",jt,[Ut,(0,i.Wm)(n),(0,i._)("div",Nt,[(0,i._)("div",Ot,[zt,(0,i._)("div",null,[(0,i._)("div",At,[Rt,(0,i._)("div",$t,(0,r.zw)(a.tcpServerState.host),1)]),(0,i._)("div",Ht,[Lt,(0,i._)("div",Qt,[(0,i.Wm)(d,{effect:"dark",type:"success",size:"large"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(a.tcpServerState.state),1)])),_:1})])])])]),(0,i._)("div",Ft,[Zt,(0,i.Wm)(h,{"row-key":"endPoint",data:a.tcpClientState,height:"300px","empty-text":"NO  CONNECTED","highlight-current-row":""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{prop:"endPoint",label:"EndPoint"}),(0,i.Wm)(c,{prop:"connectedTime",label:"Connect Time"}),(0,i.Wm)(c,{prop:"lastRequestTime",label:"Last Request Time"}),(0,i.Wm)(c,{width:"100",fixed:"right"},{default:(0,i.w5)((e=>[(0,i._)("div",null,[(0,i.Wm)(u,{type:"danger",onClick:t=>o.RemoveBtnHandle(e.row.endPoint)},{default:(0,i.w5)((()=>[Yt])),_:2},1032,["onClick"])])])),_:1}),(0,i.Wm)(c,{type:"expand",fixed:"right"},{default:(0,i.w5)((e=>[(0,i._)("div",Bt,[(0,i._)("div",null,"最近一次接收:"+(0,r.zw)(e.row.lastRequestCmd),1),(0,i._)("div",null,"最近一次回覆:"+(0,r.zw)(e.row.lastRequestCmd),1)])])),_:1})])),_:1},8,["data"])])])])])}var Gt={props:{tcpClientState:{type:Array,default(){return[]}},tcpServerState:{type:Object,default(){return{host:"0.0.0.0:00",state:"Listening"}}}},data(){return{checkEx2Selected:["A"],checkEx2Options:[{item:"A",name:"Option A"}]}},methods:{async RemoveBtnHandle(e){await X(e)},req_res_text_format(e="",t=0){return console.info(e,t),e}}};const Kt=(0,W.Z)(Gt,[["render",qt]]);var Xt=Kt;const Jt={class:"col-lg card",style:{width:"100%"}},ea={class:"card-body"},ta=(0,i._)("h5",{class:"card-title"},"PC STATES",-1),aa={class:"d-flex justify-content-center states-container"},sa=(0,i._)("div",null,[(0,i._)("u",null,"RAM")],-1),la=(0,i._)("div",null,[(0,i._)("u",null,"CPU")],-1);function oa(e,t,a,s,l,o){const n=(0,i.up)("el-divider"),r=(0,i.up)("el-progress"),d=(0,i.up)("el-col"),c=(0,i.up)("el-row");return(0,i.wg)(),(0,i.iD)("div",Jt,[(0,i._)("div",ea,[ta,(0,i.Wm)(n),(0,i._)("div",aa,[(0,i.Wm)(c,{gutter:30},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{span:12},{default:(0,i.w5)((()=>[sa,(0,i.Wm)(r,{type:"circle",percentage:a.pcState.ram,color:a.pcState.ram>75?"red":a.pcState.ram>50?"orange":"rgb(32, 160, 255)"},null,8,["percentage","color"])])),_:1}),(0,i.Wm)(d,{span:12},{default:(0,i.w5)((()=>[la,(0,i.Wm)(r,{type:"circle",percentage:a.pcState.cpu,color:a.pcState.cpu>50?"red":"rgb(32, 160, 255)"},null,8,["percentage","color"])])),_:1})])),_:1})])])])}var na={props:{pcState:{type:Object,default(){return{ram:23,cpu:20.2}}}}};const ia=(0,W.Z)(na,[["render",oa]]);var ra=ia;const da={class:"col-lg card",style:{width:"100%"}},ca={class:"card-body"},ua=(0,i._)("h5",{class:"card-title"},"SSM STATES",-1),ha={class:"justify-content-center states-container"},ma=(0,i._)("div",null,"CONNECTED NUMBER",-1),pa={id:"ssm-number"},wa={href:"/"};function ga(e,t,a,s,l,o){const n=(0,i.up)("el-divider"),r=(0,i.up)("count-to");return(0,i.wg)(),(0,i.iD)("div",da,[(0,i._)("div",ca,[ua,(0,i.Wm)(n),(0,i._)("div",ha,[ma,(0,i._)("div",pa,[(0,i._)("a",wa,[(0,i.Wm)(r,{startVal:0,endVal:a.ssmNumber,duration:1100},null,8,["endVal"])])])])])])}var fa={props:{ssmNumber:{type:Number,default:0}}};const _a=(0,W.Z)(fa,[["render",ga]]);var ya=_a;const va=e=>((0,i.dD)("data-v-178e9af4"),e=e(),(0,i.Cn)(),e),ba={class:"card",style:{width:"100%"}},Sa={class:"card-body"},Ia=va((()=>(0,i._)("h5",{class:"card-title"},"SYSTEM OPERATION",-1))),ka={class:"btn"},xa=(0,i.Uk)("Restart"),Da={class:"btn"},Ca=(0,i.Uk)("Shut Down");function Ta(e,t,a,s,l,o){const n=(0,i.up)("el-divider"),r=(0,i.up)("b-button");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ba,[(0,i._)("div",Sa,[Ia,(0,i.Wm)(n),(0,i._)("div",null,[(0,i._)("div",ka,[(0,i.Wm)(r,{"aria-disabled":"",class:"disabled w-100 my-1 bg-primary"},{default:(0,i.w5)((()=>[xa])),_:1})]),(0,i._)("div",Da,[(0,i.Wm)(r,{class:"disabled w-100 my-1 bg-danger"},{default:(0,i.w5)((()=>[Ca])),_:1})])])])])])}var Wa={components:{},data(){return{}}};const Pa=(0,W.Z)(Wa,[["render",Ta],["__scopeId","data-v-178e9af4"]]);var Va=Pa,Ma={components:{SysSettingCard:Mt,TcpIPClientListCard:Xt,SSMInfoCard:ya,PCStateCard:ra,SystemOperation:Va},data(){return{app_states:{},ws:null}},computed:{AppStartTime(){return ee()(this.app_states.startupTime).format("yyyy/MM/DD HH:mm:ss")}},methods:{async FetchAppState(){this.app_states=await B()},async WebsocketConnect(){this.ws=new WebSocket(`${S.websocket_host}/app_states`),this.ws.onopen=()=>{console.info("ws opend..")},this.ws.onclose=()=>{console.info("ws closed..")},this.ws.onmessage=e=>this.HandleWSMessage(e)},HandleWSMessage(e=WebSocket){this.app_states=JSON.parse(e.data)}},mounted(){this.FetchAppState(),this.WebsocketConnect()},unmounted(){console.info("des"),this.ws.close()}};const Ea=(0,W.Z)(Ma,[["render",yt]]);var ja=Ea;const Ua={class:"fade-in"},Na={class:"d-flex flex-row px-2 py-2 w-100"},Oa={class:"d-flex justify-content-start flex-fill w-50"},za={class:"d-flex justify-content-end w-50"},Aa=(0,i.Uk)("模型訓練"),Ra=(0,i.Uk)("??");function $a(e,t,a,l,o,n){const r=(0,i.up)("el-radio-button"),d=(0,i.up)("el-radio-group"),c=(0,i.up)("el-button"),u=(0,i.up)("el-divider"),h=(0,i.up)("DignoseDataListView"),m=(0,i.up)("DignoseDataChartView"),p=(0,i.up)("ModelTrainerVue");return(0,i.wg)(),(0,i.iD)("div",Ua,[(0,i._)("div",Na,[(0,i._)("div",Oa,[(0,i.Wm)(d,{modelValue:o.display_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.display_mode=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{size:"small",label:"LIST"}),(0,i.Wm)(r,{size:"small",label:"CHART"})])),_:1},8,["modelValue"])]),(0,i._)("div",za,[(0,i.Wm)(c,{onClick:n.Test,size:"small"},{default:(0,i.w5)((()=>[Aa])),_:1},8,["onClick"])])]),(0,i.Wm)(u),(0,i.wy)((0,i.Wm)(h,{edgeIP:o.EdgeIP},null,8,["edgeIP"]),[[s.F8,"LIST"==o.display_mode]]),(0,i.wy)((0,i.Wm)(m,{edgeIP:o.EdgeIP,pause:"LIST"==o.display_mode},{default:(0,i.w5)((()=>[Ra])),_:1},8,["edgeIP","pause"]),[[s.F8,"CHART"==o.display_mode]]),(0,i.Wm)(p,{ref:"modelTrainer"},null,512)])}const Ha={class:"d-flex flex-column"},La={class:"training-content flex-fill d-flex flex-column justify-content-start"},Qa={class:"step-content justify-content-start"},Fa=(0,i._)("h5",null,"選擇模組",-1),Za={style:{height:"120px","overflow-y":"scroll","margin-left":"0"},class:"d-flex flex-column justify-content-start border px-2"},Ya={class:"step-content d-flex flex-column justify-content-start"},Ba=(0,i._)("h5",null,"命名模型",-1),qa={class:"step-content d-flex flex-column justify-content-start"},Ga=(0,i._)("h5",null,"設定錄製時間",-1),Ka={class:"step-content-end d-flex flex-column justify-content-start"},Xa=(0,i.Uk)("START"),Ja={class:"step-content d-flex flex-column justify-content-start"},es=(0,i._)("h5",null,"訓練模組狀態",-1),ts={class:"recorder d-flex flex-row justify-content-start"},as={class:"d-flex flex-column"},ss=(0,i._)("span",null,"狀態",-1),ls={class:"d-flex flex-column"},os=(0,i._)("span",null,"時間設定",-1),ns={class:"duration-setting"},is={class:"d-flex flex-column"},rs=(0,i._)("span",null,"累計時間",-1),ds={class:"count-down px-3 py-0"};function cs(e,t,a,s,l,o){const n=(0,i.up)("el-checkbox"),d=(0,i.up)("el-checkbox-group"),c=(0,i.up)("el-input"),u=(0,i.up)("el-input-number"),h=(0,i.up)("el-divider"),m=(0,i.up)("b-button"),p=(0,i.up)("el-table-column"),w=(0,i.up)("el-table"),g=(0,i.up)("el-button"),f=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.j4)(f,{onClosed:o.CloseHandle,modelValue:l.Show,"onUpdate:modelValue":t[3]||(t[3]=e=>l.Show=e),direction:"rtl",size:"60%",title:"Model Training"},{default:(0,i.w5)((()=>[(0,i._)("div",Ha,[(0,i._)("div",La,[(0,i._)("div",Qa,[Fa,(0,i._)("div",Za,[(0,i.Wm)(d,{disabled:l.IsIDMSRecording,modelValue:l.SelectedIPList,"onUpdate:modelValue":t[0]||(t[0]=e=>l.SelectedIPList=e),onChange:o.SensorSelectsChanged},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.IPList,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"d-flex flex-column justify-content-start",key:e},[(0,i.Wm)(n,{label:e},null,8,["label"])])))),128))])),_:1},8,["disabled","modelValue","onChange"])])]),(0,i._)("div",Ya,[Ba,(0,i.Wm)(c,{disabled:l.IsIDMSRecording,autocomplete:"on",placeholder:"模型名稱",modelValue:l.ModelName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ModelName=e)},null,8,["disabled","modelValue"])]),(0,i._)("div",qa,[Ga,(0,i.Wm)(u,{disabled:l.IsIDMSRecording,min:"5",modelValue:l.RecordPeriod,"onUpdate:modelValue":t[2]||(t[2]=e=>l.RecordPeriod=e),class:"w-100"},null,8,["disabled","modelValue"])]),(0,i.Wm)(h),(0,i._)("div",Ka,[(0,i.Wm)(m,{style:{height:"4rem"},variant:"primary",disabled:!o.Start_Enable,onClick:o.SendTrainingRequest},{default:(0,i.w5)((()=>[Xa])),_:1},8,["disabled","onClick"])])]),(0,i._)("div",null,[(0,i.Wm)(w,{data:l.TrainStates,height:"180px"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{label:"IP",prop:"IP"}),(0,i.Wm)(p,{label:"請求模型名稱",prop:"ModelName"}),(0,i.Wm)(p,{label:"狀態",prop:"State"}),(0,i.Wm)(p,{label:"錄製時間",prop:"RecordPeriod"}),(0,i.Wm)(p,{label:"Remain Time",prop:"RemainTime"}),(0,i.Wm)(p,{label:"Message",prop:"Message"})])),_:1},8,["data"])]),(0,i._)("div",Ja,[es,(0,i._)("div",ts,[(0,i._)("div",as,[ss,(0,i.Wm)(g,{effect:"dark",type:l.IsIDMSRecording?"danger":"info",size:"normal"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.IsIDMSRecording?"訓練中":"IDLE"),1)])),_:1},8,["type"])]),(0,i._)("div",ls,[os,(0,i._)("div",ns,(0,r.zw)(l.IDMSRecordPeriod)+" 秒",1)]),(0,i._)("div",is,[rs,(0,i._)("div",ds,(0,r.zw)(l.CountDown),1)])])])])])),_:1},8,["onClosed","modelValue"])}const us=S.idms_websocket_host;async function hs(e){var t=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,a)=>{var s=new WebSocket(`${t}/ModuleInfoGet`);s.onopen=()=>s.send("GetInfos"),s.onmessage=t=>{s.close(),e(JSON.parse(t.data))},s.onerror=e=>a(e)}))}async function ms(e){return await new Promise(((t,a)=>{var s=void 0==e?us:`ws://${e}:44332`;console.info("GetDignoseDataListWsInstance",e);var l=new WebSocket(`${s}/Dignose?type=list`);l.onopen=()=>t(l),l.onerror=e=>a(e)}))}async function ps(e,t,a="HS"){var s=void 0==e?us:`ws://${e}:44332`;return console.info("GetTrendchartWsInstance",e),await new Promise(((e,l)=>{var o=new WebSocket(`${s}/Dignose?type=chart&number=90&ip=${t}&featureType=${a}`);o.onopen=()=>e(o),o.onerror=()=>l(null)}))}async function ws(e,t="ip"){var a=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,s)=>{var l=new WebSocket(`${a}/Diagnose/ModelInfo?StatesMonitor=FALSE`);l.onopen=()=>{l.send(`GIVEMEINFO,${t}`)},l.onmessage=t=>{const a=JSON.parse(t.data);var s=a.EQ,o=a.UNIT,n=a.modelData;l.close(),e({EQ:s,UNIT:o,modelData:n})},l.onerror=e=>{s(e)}}))}async function gs(e,t){var a=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,s)=>{var l=new WebSocket(`${a}/Settings?Get=DignoseThresholds&IP=${t}`);l.onmessage=t=>{var a=JSON.parse(t.data);l.close(),e(a)},l.onerror=e=>s(e)}))}async function fs(e,t,a){var s=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,l)=>{var o=new WebSocket(`${s}/Settings?IP=${t}&DignoseWarningThres=${a}`);o.onmessage=t=>{o.close(),e(JSON.parse(t.data))},o.onerror=e=>l(e)}))}async function _s(e,t,a){var s=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,l)=>{var o=new WebSocket(`${s}/Settings?IP=${t}&DignoseAlarmThres=${a}`);o.onmessage=t=>{o.close(),e(JSON.parse(t.data))},o.onerror=e=>l(e)}))}async function ys(e,t,a,s){var l=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,o)=>{var n=new WebSocket(`${l}/Diagnose/ModelInfo`);n.onopen=()=>{n.send(JSON.stringify({Action:s?"Enable":"Disable",IP:t,Model_Name:a}))},n.onmessage=t=>{n.close(),e(JSON.parse(t.data))},n.onerror=e=>o(e)}))}async function vs(e,t,a){var s=void 0==e?us:`ws://${e}:44332`;return await new Promise(((e,l)=>{var o=new WebSocket(`${s}/Diagnose/ModelInfo`);o.onopen=()=>{o.send(JSON.stringify({Action:"Delete",IP:t,Model_Name:a}))},o.onmessage=t=>{o.close(),e(JSON.parse(t.data))},o.onerror=e=>l(e)}))}var bs={data(){return{Show:!1,IPList:[],SelectedIPList:[],ModelName:"",RecordPeriod:10,websocket:null,TrainStates:[],edgeIP:"",IsIDMSRecording:!1,CountDown:"00:00:00",IDMSRecordPeriod:10}},components:{},computed:{Start_Enable(){return!this.IsIDMSRecording&&0!==this.SelectedIPList.length&&""!==this.ModelName&&0!==this.RecordPeriod},TrainingReqObj(){return{IPList:this.SelectedIPList,ModelName:this.ModelName,RecordPeriod:this.RecordPeriod}}},methods:{ModuleChangeHandle(e){console.info("hi",e)},ShowUp(e){this.Show=!0,setTimeout((async()=>{this.IPList=[];let t=await hs(e);t.forEach((e=>{this.IPList.push(e.IP)})),this.edgeIP=e,this.WebsocketConnect()}),100)},CloseHandle(){null!=this.websocket&&this.websocket.close()},WebsocketConnect(){this.websocket=new WebSocket(`ws://${this.edgeIP}:44332/Model_Training`),this.websocket.onopen=()=>{this.$toast.info("Connected"),this.websocket.send("ModuleUpdate-"+JSON.stringify(this.SelectedIPList))},this.websocket.onmessage=e=>this.TrainingStatusHandle(JSON.parse(e.data)),this.websocket.onerror=e=>{console.error(e),this.$toast.error("發生了一些錯誤(連線異常)",{duration:2500,position:"top"})}},SensorSelectsChanged(){this.websocket.send("ModuleUpdate-"+JSON.stringify(this.SelectedIPList))},SendTrainingRequest(){this.websocket.send(JSON.stringify(this.TrainingReqObj)),this.$toast.info("模型訓練請求已送出!")},TrainingStatusHandle(e){this.IsIDMSRecording=e.isRecoding,this.TrainStates=e.trainStates,this.CountDown=e.recorderCountDownText,this.IDMSRecordPeriod=e.RecordPeriod}},mounted(){},beforeMount(){null!=this.websocket&&this.websocket.close()}};const Ss=(0,W.Z)(bs,[["render",cs]]);var Is=Ss;const ks={class:"dignose-list-view px-2"},xs={class:"py-1"},Ds={class:"d-flex flex-row"},Cs={class:"fade-in row dignose-detail-info d-flex flex-row"},Ts={class:"col-md-9 row g-0 flex-fill"},Ws={class:"d-flex col-md-3"},Ps=(0,i._)("div",{class:"item-name"},"當前模型",-1),Vs={class:""},Ms={class:"d-flex col-md-3"},Es=(0,i._)("div",{class:"item-name warning-threshold-lab"},"Warning Threshold",-1),js={class:"d-flex col-md-3"},Us=(0,i._)("div",{class:"item-name alarm-threshold-lab"},"Alarm Threshold",-1),Ns={class:"row col-md-2 dig-actions"},Os=(0,i.Uk)("模型列表 "),zs=(0,i.Uk)("Raw Data "),As=(0,i.Uk)("即時圖表 "),Rs={class:"row"},$s={class:"col-lg-1"},Hs={class:"d-flex type-button-container"},Ls={class:"col-lg-11","element-loading-background":"rgba(122, 122, 122, 0.8)"};function Qs(e,t,a,l,o,n){const d=(0,i.up)("CaretRight"),c=(0,i.up)("el-icon"),u=(0,i.up)("el-table-column"),h=(0,i.up)("el-tag"),m=(0,i.up)("Search"),p=(0,i.up)("el-input"),w=(0,i.up)("el-button"),g=(0,i.up)("el-input-number"),f=(0,i.up)("List"),_=(0,i.up)("TrendCharts"),y=(0,i.up)("el-table"),v=(0,i.up)("ArrowDownBold"),b=(0,i.up)("ArrowUpBold"),S=(0,i.up)("b-button"),I=(0,i.up)("GPMChartVue"),k=(0,i.up)("ModelListView"),x=(0,i.up)("RawDataSideShowVue"),D=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",ks,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(y,{"default-sort":{prop:"EqName",order:"ascending"},height:n.table_height,data:n.DignoseDatasToShow,"highlight-current-row":"",onRowClick:n.TableRowClickHandle,onExpandChange:n.ExpandHandle,onRowDblclick:n.RowDoubleClickHandle,"row-class-name":n.tableRowClassName,"row-key":"IP",ref:"table"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{fixed:"left",width:"40"},{default:(0,i.w5)((e=>[(0,i._)("div",xs,[(0,i.wy)((0,i.Wm)(c,{size:20,color:"rgb(64, 158, 255)"},{default:(0,i.w5)((()=>[(0,i.Wm)(d)])),_:2},1536),[[s.F8,e.row.IP==o.selectedDiagnoseData.IP]])])])),_:1}),(0,i.Wm)(u,{sortable:"",fixed:"left",prop:"IP",label:"IP",width:"140"}),(0,i.Wm)(u,{sortable:"",prop:"EqName",label:"EQ Name"}),(0,i.Wm)(u,{sortable:"",prop:"UnitName",label:"Unit Name"}),(0,i.Wm)(u,{sortable:"",prop:"HealthScore",label:"Health Score"}),(0,i.Wm)(u,{sortable:"",prop:"AlertIndex",label:"Alert Index"}),(0,i.Wm)(u,{sortable:"",label:"模組狀態"},{default:(0,i.w5)((e=>[(0,i.Wm)(h,{effect:"dark",size:"small",style:{width:"70px"},type:e.row.ModuleAbnormal?"danger":"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.row.ModuleAbnormal?"異常":"正常"),1)])),_:2},1032,["type"])])),_:1}),(0,i.Wm)(u,{type:"expand",fixed:"right",width:"283px"},{header:(0,i.w5)((()=>[(0,i._)("div",Ds,[(0,i.Wm)(p,{size:"small",modelValue:o.search_str,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search_str=e),placeholder:"輸入內容查詢...",clearable:""},{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m)])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{size:"small",onClick:n.TableExpandHandle},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(this.expandAll?"全部收合":"全部展開"),1)])),_:1},8,["onClick"])])])),default:(0,i.w5)((t=>[(0,i._)("div",Cs,[(0,i._)("div",Ts,[(0,i._)("div",Ws,[Ps,(0,i._)("div",Vs,(0,r.zw)(t.row.DignoseDetailData.currentModelName),1)]),(0,i._)("div",Ms,[Es,(0,i._)("div",null,[(0,i.Wm)(g,{max:100,min:0,step:.1,size:"small",modelValue:n.GetTreshodlVal(t.row).warningThreshold,"onUpdate:modelValue":e=>n.GetTreshodlVal(t.row).warningThreshold=e,onChange:e=>n.SetWarningThreshold(t.row.IP)},null,8,["step","modelValue","onUpdate:modelValue","onChange"])])]),(0,i._)("div",js,[Us,(0,i._)("div",null,[(0,i.Wm)(g,{max:100,min:0,step:.1,size:"small",modelValue:n.GetTreshodlVal(t.row).alarmThreshold,"onUpdate:modelValue":e=>n.GetTreshodlVal(t.row).alarmThreshold=e,onChange:e=>n.SetAlarmThreshold(t.row.IP)},null,8,["step","modelValue","onUpdate:modelValue","onChange"])])])]),(0,i._)("div",Ns,[(0,i.Wm)(w,{class:"col-sm-3",onClick:e=>n.ShowModelList(t.row.IP)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f)])),_:1}),Os])),_:2},1032,["onClick"]),(0,i.Wm)(w,{class:"col-sm-3",onClick:s=>e.$refs.rawDataView.ShowRaw(a.edgeIP,t.row.IP)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_)])),_:1}),zs])),_:2},1032,["onClick"])])])])),_:1})])),_:1},8,["height","data","onRowClick","onExpandChange","onRowDblclick","row-class-name"])),[[D,o.loading]]),(0,i._)("div",{class:(0,r.C_)(["show-chart-control d-flex px-0 w-100",["showing-down-arrow","fixed-in-bottom"]])},[(0,i.Wm)(S,{class:"btn-share-chart-show",variant:o.share_chart_show?"light":"primary",onClick:t[1]||(t[1]=e=>o.share_chart_show=!o.share_chart_show)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"mx-2"},{default:(0,i.w5)((()=>[o.share_chart_show?((0,i.wg)(),(0,i.j4)(v,{key:0})):((0,i.wg)(),(0,i.j4)(b,{key:1}))])),_:1}),As])),_:1},8,["variant"])]),(0,i.Wm)(s.uT,{name:"el-zoom-in-bottom"},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"share-chart-container fixed-in-bottom",style:(0,r.j5)(o.current_share_chart_style)},[(0,i._)("div",Rs,[(0,i._)("div",$s,[(0,i._)("div",Hs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.display_modes,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"py-1 bt-container",key:e.value},[(0,i.Wm)(S,{size:"sm",class:"w-100",onClick:t=>n.ChangeChartDisplayTypeHandle(e.value),variant:o.chart_display_mode==e.value?"primary":"light"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.label),1)])),_:2},1032,["onClick","variant"])])))),128))])]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Ls,[((0,i.wg)(),(0,i.j4)(I,{class:"share-chart my-2",chart_id:"share-chart",key:o.selectedDiagnoseData.IP+o.chart_display_mode,title:n.ChartTitle,yAxisLabel:n.ylabel,ref:"trendChart"},null,8,["title","yAxisLabel"]))])),[[D,o.chart_loading]])])],4)),[[s.F8,o.share_chart_show],[D,o.loading]])])),_:1}),(0,i.Wm)(k,{ref:"modelListView"},null,512),(0,i.Wm)(x,{ref:"rawDataView",ExistModuleList:o.DignoseDatas},null,8,["ExistModuleList"])])}a(6699),a(1703);const Fs=[{label:"Health Score",value:"HS"},{label:"Alert Index(day)",value:"AID"},{label:"Alert Index(Hour)",value:"AIH"}],Zs={class:"d-flex"},Ys={class:"d-flex justify-content-start"},Bs=(0,i.Uk)("重新整理"),qs={class:"d-flex justify-content-flex-end ip-select"},Gs=(0,i.Uk)("刪除");function Ks(e,t,a,s,l,o){const n=(0,i.up)("el-button"),d=(0,i.up)("el-option"),c=(0,i.up)("el-select"),u=(0,i.up)("el-table-column"),h=(0,i.up)("el-tag"),m=(0,i.up)("el-table"),p=(0,i.up)("el-drawer"),w=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.j4)(p,{modelValue:l.show,"onUpdate:modelValue":t[3]||(t[3]=e=>l.show=e),direction:"rtl",size:"70%",title:`模型列表 : ${l.EQ}/${l.UNIT}(${l.IP})`},{default:(0,i.w5)((()=>[(0,i._)("div",Zs,[(0,i._)("div",Ys,[(0,i.Wm)(n,{dark:"",onClick:t[0]||(t[0]=e=>o.Fetch())},{default:(0,i.w5)((()=>[Bs])),_:1})]),(0,i._)("div",qs,[(0,i.Wm)(c,{modelValue:l.IP,"onUpdate:modelValue":t[1]||(t[1]=e=>l.IP=e),onChange:t[2]||(t[2]=e=>o.Fetch())},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.module_infos,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.IP,label:`${e.EQ}/${e.UNIT}(${e.IP})`,value:e.IP},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{data:l.modelData},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{prop:"Recipe_ID",label:"模型名稱",fixed:"left",width:"160px",sortable:""}),(0,i.Wm)(u,{prop:"Model_Start_Time",label:"開始時間",sortable:""}),(0,i.Wm)(u,{prop:"Model_End_Time",label:"結束時間"}),(0,i.Wm)(u,{prop:"Comment",label:"Comment"}),(0,i.Wm)(u,{prop:"Enabled",label:"狀態",sortable:""},{default:(0,i.w5)((e=>[(0,i.Wm)(h,{effect:"dark",style:{width:"70px"},type:e.row.Enabled?"success":"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.row.Enabled?"啟用":"停用"),1)])),_:2},1032,["type"])])),_:1}),(0,i.Wm)(u,{label:"操作",fixed:"right",width:"160px"},{default:(0,i.w5)((e=>[(0,i.Wm)(n,{type:e.row.Enabled?"danger":"success",plain:"",onClick:t=>o.ModelEnableHandle(e.row.Recipe_ID,!e.row.Enabled)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.row.Enabled?"停用":"啟用"),1)])),_:2},1032,["type","onClick"]),(0,i.Wm)(n,{type:"danger",plain:"",onClick:t=>o.ModelDeleteHandle(e.row.Recipe_ID)},{default:(0,i.w5)((()=>[Gs])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[w,l.loading]])])),_:1},8,["modelValue","title"])}var Xs={data(){return{show:!1,IP:"",EQ:"",UNIT:"",modelData:[],loading:!1,module_infos:[],edgeIP:"12.2.2.2"}},methods:{ShowModelList(e,t){this.show=!0,this.edgeIP=e,this.IP=t,this.UpdateModuleInfos(e),this.Fetch()},async UpdateModuleInfos(e){this.edgeIP=e,this.module_infos=await hs(this.edgeIP)},async Fetch(){this.loading=!0;var e=await ws(this.edgeIP,this.IP);console.info("Fetch Models",e),this.EQ=e.EQ,this.UNIT=e.UNIT,this.modelData=e.modelData,this.loading=!1},async ModelDeleteHandle(e=""){var t=await vs(this.edgeIP,this.IP,e);t.success&&this.Fetch()},async ModelEnableHandle(e="",t=!1){var a=await ys(this.edgeIP,this.IP,e,t);a.success&&this.Fetch()}},mounted(){}};const Js=(0,W.Z)(Xs,[["render",Ks]]);var el=Js;const tl={class:"message d-flex flex-row w-100 px-1 mx-0 my-0 bg-light"},al={class:"flex-fill d-flex flex-row justify-content-end"},sl=(0,i.Uk)("暫停"),ll=(0,i.Uk)("繼續"),ol={class:"row g-0 h-100 w-100 mx-0 my-0 pb-5 bg-light"},nl={class:"col-md-6 h-100"},il={class:"raw-data-viewer"},rl=(0,i.Uk)("G Value "),dl={class:"col-md-6 h-100"},cl={class:"raw-data-viewer"},ul=(0,i.Uk)("FFT ");function hl(e,t,a,s,l,o){const n=(0,i.up)("el-tag"),d=(0,i.up)("el-option"),c=(0,i.up)("el-select"),u=(0,i.up)("b-button"),h=(0,i.up)("TrendCharts"),m=(0,i.up)("el-icon"),p=(0,i.up)("GPMChartVue"),w=(0,i.up)("el-drawer"),g=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.j4)(w,{modelValue:l.ShowDrawer,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ShowDrawer=e),direction:"btt",size:"70%",title:o.Title,onClose:o.CloseHandle},{default:(0,i.w5)((()=>[(0,i._)("div",tl,[(0,i.Wm)(n,{effect:"dark",type:l.connected?"success":"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.connected?"已連線":"已斷線"),1)])),_:1},8,["type"]),(0,i._)("div",null,[(0,i.Wm)(c,{size:"small",modelValue:l.SensorIP,"onUpdate:modelValue":t[0]||(t[0]=e=>l.SensorIP=e),onChange:o.ChangeIPHandle},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.ExistModuleList,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.IP,value:e.IP,label:`${e.EqName}-${e.UnitName}(${e.IP})`},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,i._)("div",al,[l.pause?((0,i.wg)(),(0,i.j4)(u,{key:1,size:"sm",pill:"",class:"bg-success",onClick:t[2]||(t[2]=e=>l.pause=!1)},{default:(0,i.w5)((()=>[ll])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:0,size:"sm",pill:"",onClick:t[1]||(t[1]=e=>l.pause=!0)},{default:(0,i.w5)((()=>[sl])),_:1}))])]),(0,i._)("div",ol,[(0,i._)("div",nl,[(0,i._)("span",il,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h)])),_:1}),rl]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(p,{ref:"Raw_Data_Chart",class:"h-100",chart_id:"raw_data_chart-1",title:o.Title,key:l.SensorIP,yAxisLabel:"G",xlabelUseTimeFormat:!1},null,8,["title"])),[[g,!l.data_in]])]),(0,i._)("div",dl,[(0,i._)("span",cl,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h)])),_:1}),ul]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(p,{ref:"Raw_Data_Chart_FFT",class:"h-100",chart_id:"raw_data_chart-fft",title:o.Title,key:l.SensorIP,yAxisLabel:"Mag",xAxisLabel:"Freq(Hz)",xlabelUseTimeFormat:!1},null,8,["title"])),[[g,!l.data_in]])])])])),_:1},8,["modelValue","title","onClose"])}var ml={components:{GPMChartVue:le.Z},props:{ExistModuleList:{type:Array,default(){return[{IP:"",EqName:"",UnitName:""}]}}},data(){return{ShowDrawer:!1,SensorIP:"",ws:null,mockTimer:null,connected:!1,pause:!1,data_in:!1,edgeIP:"123.123.213.213"}},methods:{ChangeIPHandle(){this.data_in=!1,this.ws.onopen=null,this.ws.onclose=null,this.ws.onmessage=null,this.ws.close(),this.WebsocketConnect(this.edgeIP)},CloseHandle(){console.info("drawer close"),this.data_in=!1;try{clearInterval(this.mockTimer),this.ws.close()}catch(e){console.info("drawer close",e)}},async ShowRaw(e,t){this.edgeIP=e,this.SensorIP=t,this.ShowDrawer=!0;while(!await this.WebsocketConnect(e))setTimeout((()=>{}),100)},async WebsocketConnect(e){return await new Promise((t=>{this.ws=new WebSocket(`ws://${e}:44332/RawG?IP=${this.SensorIP}`),this.ws.onopen=()=>{this.connected=!0,t(!0)},this.ws.onmessage=e=>this.DataHandle(e.data),this.ws.onclose=()=>{this.connected=!1,t(!1)}}))},Reconnect(){},DataHandle(e){if(this.data_in=!0,!this.pause&&e){var t=JSON.parse(e);this.$refs.Raw_Data_Chart&&this.$refs.Raw_Data_Chart.UpdateChart(t[0],"second"),this.$refs.Raw_Data_Chart_FFT.UpdateChart(t[1])}},MockFetchFakeData(){console.info("production")}},computed:{HOST(){return S.idms_websocket_host+"/RawG"},Title(){if(0==this.ExistModuleList.length)return"";var e=this.ExistModuleList.find((e=>e.IP==this.SensorIP));return e?`${e.EqName}-${e.UnitName}(${e.IP})`:""}}};const pl=(0,W.Z)(ml,[["render",hl]]);var wl=pl;class gl{constructor(){(0,te.Z)(this,"warningThreshold",69),(0,te.Z)(this,"alarmThreshold",87)}}var fl={components:{GPMChartVue:le.Z,ModelListView:el,RawDataSideShowVue:wl},data(){return{ws:{type:WebSocket},share_chart_show:!1,trendchart_ws:null,loading:!0,chart_loading:!1,expandAll:!1,display_modes:Fs,DignoseDatas:[],chart_display_mode:"HS",search_str:"",selectedDiagnoseData:{IP:"???"},renderingDiagnoseData:[],ThresholdSettings:{ip:new gl},current_share_chart_style:{backgroundColor:"#313131",border:"1px solid black"},share_chart_styles:{normal:{backgroundColor:"#313131",border:"1px solid black"},warning:{backgroundColor:"#e5bc41",border:"1px solid white"},danger:{backgroundColor:"rgb(217, 94, 94)",border:"1px solid white"}}}},methods:{ChangeChartDisplayTypeHandle(e){this.chart_display_mode=e,this.RTChartWebsocketIni(this.selectedDiagnoseData.IP)},RowDoubleClickHandle(e,t,a){this.$refs.table.toggleRowExpansion(e,!0)},TableExpandHandle(){this.expandAll=!this.expandAll,this.DignoseDatas.forEach((e=>{this.$refs.table.toggleRowExpansion(e,this.expandAll)}))},tableRowClassName({row:e}){return e.DignoseDetailData.dignoseResult},HideAllExpand(){this.DignoseDatas.forEach((e=>{this.$refs.table.toggleRowExpansion(e,!1)}))},async TableRowClickHandle(e){console.log(e),this.HideAllExpand(),this.$refs.table.toggleRowExpansion(e,!0),this.selectedDiagnoseData.IP!=e.IP&&(this.chart_loading=!0,null!=this.trendchart_ws&&(this.trendchart_ws.onmessage=null),setTimeout((()=>{console.info("to create ws",e.IP),this.RTChartWebsocketIni(e.IP)}),200)),this.selectedDiagnoseData=e;var t=await gs(this.edgeIP,this.selectedDiagnoseData.IP);t.success&&(this.ThresholdSettings[this.selectedDiagnoseData.IP]=t.data)},async RTChartWebsocketIni(e){null!=this.trendchart_ws&&(this.trendchart_ws.onmessage=null,this.trendchart_ws.close()),this.trendchart_ws=await ps(this.edgeIP,e,this.chart_display_mode),this.chart_loading=null==this.trendchart_ws,null!=this.trendchart_ws?this.trendchart_ws.onmessage=e=>{var t=JSON.parse(e.data);this.RenderTrendChart(t[0])}:await this.RTChartWebsocketIni(e)},RenderTrendChart(e){try{this.renderingDiagnoseData=e;var t="HS"==this.chart_display_mode?"second":"AID"==this.chart_display_mode?"day":"hour";if(this.$refs.trendChart)this.$refs.trendChart.UpdateChart(e,t)}catch(a){console.info(a)}},GetTreshodlVal(e){return void 0==this.ThresholdSettings[e.IP]?new gl:this.ThresholdSettings[e.IP]},async ExpandHandle(e,t=[]){if(0!=t.length){var a=e.IP,s=await gs(this.edgeIP,a);s.success&&(this.ThresholdSettings[a]=s.data)}},async SetWarningThreshold(e){await fs(this.edgeIP,e,this.ThresholdSettings[e].warningThreshold)},async SetAlarmThreshold(e){await _s(this.edgeIP,e,this.ThresholdSettings[e].alarmThreshold)},ShowModelList(e){this.$refs.modelListView.UpdateModuleInfos(this.edgeIP),this.$refs.modelListView.ShowModelList(this.edgeIP,e)}},computed:{DignoseDatasToShow(){if(""==this.search_str)return this.DignoseDatas;var e=[],t=this.search_str.toUpperCase();return this.DignoseDatas.forEach((a=>{a.IP.includes(t)|a.UnitName.toUpperCase().includes(t)|a.EqName.toUpperCase().includes(t)&&e.push(a)})),e},ChartTitle(){return this.selectedDiagnoseData.EqName?`${this.DisplayModeName}: ${this.selectedDiagnoseData.EqName}-${this.selectedDiagnoseData.UnitName} (${this.selectedDiagnoseData.IP})`:"點選表格以顯示趨勢圖表"},DisplayModeName(){return"HS"==this.chart_display_mode?"健康分數趨勢":"AIH"==this.chart_display_mode?"劣化指標(小時)":"AID"==this.chart_display_mode?"劣化指標(天)":""},ylabel(){return"HS"==this.chart_display_mode?"Score":"AID"==this.chart_display_mode|"AIH"==this.chart_display_mode?"Index":""},table_height(){return console.info(window.innerHeight),this.share_chart_show?.45*window.innerHeight:window.innerHeight-220}},props:{edgeIP:{type:String,default:"127.0.0.1"}},watch:{edgeIP:{handle:function(e,t){console.info(e,t)},deep:!0,immediate:!0}},async mounted(){console.info("s",this.edgeIP),this.ws=await ms(this.edgeIP),console.info("s",this.ws),this.ws.onmessage=e=>{this.loading=!1,this.DignoseDatas=JSON.parse(e.data)}},unmounted(){this.ws.close()}};const _l=(0,W.Z)(fl,[["render",Qs]]);var yl=_l;const vl=e=>((0,i.dD)("data-v-fafe0358"),e=e(),(0,i.Cn)(),e),bl={id:"dignose-chart-view"},Sl={class:"charting-options py-1 px-1 mx-2 d-flex"},Il={class:"d-flex justify-content-start w-100"},kl={class:"d-flex justify-content-end w-70"},xl=vl((()=>(0,i._)("div",{style:{width:"300px","font-size":"12px"}},"Column Number",-1))),Dl={class:"row g-0",id:"chccccc"},Cl={key:0,class:"empty-result"},Tl=["id","onClick"],Wl=vl((()=>(0,i._)("span",null,"看看其他的 :",-1)));function Pl(e,t,a,l,o,n){const d=(0,i.up)("el-backtop"),c=(0,i.up)("el-radio-button"),u=(0,i.up)("el-radio-group"),h=(0,i.up)("el-option"),m=(0,i.up)("el-select"),p=(0,i.up)("Search"),w=(0,i.up)("el-icon"),g=(0,i.up)("el-input"),f=((0,i.up)("Lock"),(0,i.up)("Unlock"),(0,i.up)("el-input-number"),(0,i.up)("el-empty")),_=(0,i.up)("ZoomIn"),y=(0,i.up)("GPMChart"),v=(0,i.up)("el-drawer"),b=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",bl,[(0,i.Wm)(d,{right:30,bottom:50}),(0,i._)("div",Sl,[(0,i._)("div",Il,[(0,i.Wm)(u,{modelValue:o.display_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.display_mode=e),onChange:n.FeatureTypeChangeHandle},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.display_modes,(e=>((0,i.wg)(),(0,i.j4)(c,{size:"small",key:e.value,label:e.label},null,8,["label"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,i._)("div",kl,[xl,(0,i.Wm)(m,{size:"small",modelValue:o.ColsNumber,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ColsNumber=e),onChange:n.RenderCharts},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3],(e=>(0,i.Wm)(h,{key:e,value:e,label:e},null,8,["value","label"]))),64))])),_:1},8,["modelValue","onChange"]),(0,i.Wm)(g,{size:"small",modelValue:o.search_str,"onUpdate:modelValue":t[2]||(t[2]=e=>o.search_str=e),placeholder:"輸入內容查詢...",clearable:""},{prepend:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p)])),_:1})])),_:1},8,["modelValue"])]),(0,i.kq)("",!0)]),(0,i._)("div",Dl,[0==n.DignoseDatas_Show.length?((0,i.wg)(),(0,i.iD)("div",Cl,[(0,i.Wm)(f,{description:"未包含任何圖表項目","image-size":200})])):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(n.DignoseDatas_Show,(e=>((0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)([`col-md-${n.colsNumReuslt}`,"charting-region"]),key:e.IP},[(0,i._)("span",{class:"zoom-icon",id:e.IP,onClick:t=>n.ZoomClickHandle(e.IP)},[(0,i.Wm)(w,{size:20},{default:(0,i.w5)((()=>[(0,i.Wm)(_)])),_:1})],8,Tl),(0,i.wy)((0,i._)("span",{class:"value-show"},(0,r.zw)(void 0==e.datasets?-1:e.datasets[0].data[e.datasets[0].data.length-1]),513),[[s.F8,"HS"==n.featureType]]),((0,i.wg)(),(0,i.j4)(y,{ref_for:!0,ref:"health-chart-"+e.IP,class:"chart-h",chart_id:e.IP+"-HealthScore",title:`${e.EqName}-${e.UnitName}(${e.IP})`,yAxisLabel:n.ylabel,key:n.ylabel+o.ColsNumber},null,8,["chart_id","title","yAxisLabel"]))],2)))),128))]),(0,i.Wm)(v,{modelValue:o.zooming,"onUpdate:modelValue":t[6]||(t[6]=e=>o.zooming=e),direction:"btt",size:"90%"},{default:(0,i.w5)((()=>[Wl,(0,i.Wm)(m,{modelValue:o.zoomingIP,"onUpdate:modelValue":t[5]||(t[5]=e=>o.zoomingIP=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.DignoseDatas_Show,(e=>((0,i.wg)(),(0,i.j4)(h,{key:e.IP,value:e.IP,label:`${e.EqName}-${e.UnitName}(${e.IP})`},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),((0,i.wg)(),(0,i.j4)(y,{ref:"zoom-chart",class:"chart-zoom",chart_id:"zoom-chart",title:`${o.zoom_data.EqName}-${o.zoom_data.UnitName}(${o.zoom_data.IP})`,yAxisLabel:n.ylabel,key:o.zoom_data.IP},null,8,["title","yAxisLabel"]))])),_:1},8,["modelValue"])])),[[b,n.LOADING]])}var Vl={props:{pause:{type:Boolean,default:!0},edgeIP:{type:String,default:"127.0.0.1"}},data(){return{ws:null,loading:!0,DignoseDatas:[],zoom_data:{EqName:"",UnitName:"",IP:""},MaxHSDisplayNum:50,settinglock:!0,display_mode:"Health Score",display_modes:Fs,search_str:"",ColsNumber:2,zooming:!1,zoomingIP:""}},computed:{DignoseDatas_Show(){if(""==this.search_str)return this.DignoseDatas;var e=this.search_str.toUpperCase(),t=[];return this.DignoseDatas.forEach((a=>{a.IP.toUpperCase().includes(e)|a.EqName.toUpperCase().includes(e)|a.UnitName.toUpperCase().includes(e)|(a.EqName+"-"+a.UnitName).toUpperCase().includes(e)&&t.push(a)})),t},ylabel(){return"Health Score"==this.display_mode?"Score":"Alert Index(day)"==this.display_mode|"Alert Index(Hour)"==this.display_mode?"Index":""},colsNumReuslt(){return 12/this.ColsNumber},selected_display_mode_value(){return this.display_modes.find((e=>e.label==this.display_mode)).value},featureType(){var e="Health Score"==this.display_mode?"HS":"Alert Index(day)"==this.display_mode?"AID":"AIH";return e},LOADING(){return this.loading}},methods:{visibilityChanged(e,t){console.log(e,t)},ZoomClickHandle(e){this.zooming=!0,this.zoom_data=this.DignoseDatas.find((t=>t.IP==e)),setTimeout((()=>{this.$refs["zoom-chart"].UpdateChart(this.zoom_data)}),200),this.zoomingIP=e},FeatureTypeChangeHandle(){this.ws&&this.ws.close()},async RenderCharts(){this.pause||this.DignoseDatas.forEach((e=>{new Promise((t=>{var a="Health Score"==this.display_mode?"second":"Alert Index(day)"==this.display_mode?"day":"hour",s=this.$refs[`health-chart-${e.IP}`];s&&s[0]&&s[0].UpdateChart(e,a),this.zooming&&e.IP==this.zoomingIP&&(this.zoom_data=e,this.$refs["zoom-chart"].UpdateChart(e,a)),t()}))}))},WsConnect(){this.ws&&this.ws.close(),this.ws=new WebSocket(`ws://${this.edgeIP}:44332/Dignose?type=chart&number=${this.MaxHSDisplayNum}&featureType=${this.featureType}`),this.ws.onopen=()=>{this.loading=!1},this.ws.onmessage=e=>{this.loading=!1,this.DignoseDatas=JSON.parse(e.data),this.RenderCharts()},this.ws.onclose=()=>{console.info("ws close"),this.loading=!0,this.ws.onmessage=null,this.WsConnect()}},HSDisplayNumChangedHandel(){console.info(this.MaxHSDisplayNum),this.ws.onmessage=null,this.ws.close(),this.WsConnect()}},components:{GPMChart:le.Z},mounted(){this.WsConnect()},unmounted(){this.ws.close()}};const Ml=(0,W.Z)(Vl,[["render",Pl],["__scopeId","data-v-fafe0358"]]);var El=Ml,jl={data(){return{display_mode:"LIST",EdgeIP:"127.0.0.1"}},components:{DignoseDataListView:yl,DignoseDataChartView:El,ModelTrainerVue:Is},methods:{Test(){this.$refs.modelTrainer.ShowUp(this.EdgeIP)}},mounted(){},created(){console.info("fff",this.$route.params.ip),this.EdgeIP=this.$route.params.ip,localStorage.setItem("edgeip",this.EdgeIP)}};const Ul=(0,W.Z)(jl,[["render",$a]]);var Nl=Ul;const Ol=e=>((0,i.dD)("data-v-3d4abff3"),e=e(),(0,i.Cn)(),e),zl={class:"fade-in"},Al={class:"px-2 py-2 w-100 d-flex flex-row justify-content-start"},Rl={key:0,class:"w-100 d-flex flex-column justify-content-center"},$l=Ol((()=>(0,i._)("h3",null,"Network State",-1))),Hl={class:"w-100 ping-container"},Ll=["href","textContent"],Ql={class:"my-3"},Fl={key:1},Zl=Ol((()=>(0,i._)("h3",null,"Module State",-1))),Yl=["href"];function Bl(e,t,a,l,o,n){const d=(0,i.up)("el-radio-button"),c=(0,i.up)("el-radio-group"),u=(0,i.up)("el-divider"),h=(0,i.up)("NetworkStatusVue"),m=(0,i.up)("WarningFilled"),p=(0,i.up)("el-icon"),w=(0,i.up)("el-table-column"),g=(0,i.up)("el-tag"),f=(0,i.up)("el-table");return(0,i.wg)(),(0,i.iD)("div",zl,[(0,i._)("div",Al,[(0,i.Wm)(c,{modelValue:o.mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.mode=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{size:"small",label:"Network"}),(0,i.Wm)(d,{size:"small",label:"Module"})])),_:1},8,["modelValue"])]),(0,i.Wm)(u),"Network"==o.mode?((0,i.wg)(),(0,i.iD)("div",Rl,[$l,(0,i.Wm)(u),(0,i._)("div",Hl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.ModuleStatesData,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"module-ping mx-1 my-1",key:e.IP},[(0,i._)("a",{href:"http://"+e.IP,textContent:(0,r.zw)(e.IP)},null,8,Ll),(0,i._)("div",null,(0,r.zw)(e.EqName),1),(0,i._)("div",null,(0,r.zw)(e.UnitName),1),(0,i._)("div",Ql,[(0,i.Wm)(h,{size:"large",ip:e.IP},null,8,["ip"])])])))),128))])])):(0,i.kq)("",!0),"Module"==o.mode?((0,i.wg)(),(0,i.iD)("div",Fl,[Zl,(0,i.Wm)(u),(0,i.Wm)(f,{stripe:"",data:o.ModuleStatesData,"row-key":"IP"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{width:"44",fixed:"left"},{default:(0,i.w5)((e=>[(0,i.wy)((0,i.Wm)(p,{color:"gold",size:30},{default:(0,i.w5)((()=>[(0,i.Wm)(m)])),_:2},1536),[[s.F8,(!e.row.ControllerAbnormal&&e.row.SensorAbnormal)|(e.row.ControllerAbnormal&&!e.row.SensorAbnormal)]]),(0,i.wy)((0,i.Wm)(p,{color:"red",size:30},{default:(0,i.w5)((()=>[(0,i.Wm)(m)])),_:2},1536),[[s.F8,e.row.ControllerAbnormal&&e.row.SensorAbnormal]])])),_:1}),(0,i.Wm)(w,{prop:"IP",label:"IP",sortable:"",fixed:"left"},{default:(0,i.w5)((e=>[(0,i._)("a",{href:"http://"+e.row.IP,target:"popup"},(0,r.zw)(e.row.IP),9,Yl)])),_:1}),(0,i.Wm)(w,{prop:"EqName",label:"EQ Name",sortable:""}),(0,i.Wm)(w,{prop:"UnitName",label:"UNIT Name",sortable:""}),(0,i.Wm)(w,{prop:"ControllerAbnormal",label:"控制器狀態"},{default:(0,i.w5)((e=>[(0,i.Wm)(g,{style:{width:"100px"},type:e.row.ControllerAbnormal?"danger":"success","disable-transitions":"",effect:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.row.ControllerAbnormal?"異常":"正常"),1)])),_:2},1032,["type"])])),_:1}),(0,i.Wm)(w,{prop:"SensorAbnormal",label:"感測器狀態"},{default:(0,i.w5)((e=>[(0,i.Wm)(g,{style:{width:"100px"},type:e.row.SensorAbnormal?"danger":"success","disable-transitions":"",effect:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.row.SensorAbnormal?"異常":"正常"),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data"])])):(0,i.kq)("",!0)])}var ql={components:{NetworkStatusVue:V},data(){return{mode:"Module",ModuleStatesData:[],ws:null,EdgeIP:"127.0.0.1"}},mounted(){this.WebSocketInitial()},methods:{WebSocketInitial(){this.ws=new WebSocket(`ws://${this.EdgeIP}:44332/ModuleStates`),this.ws.onmessage=e=>{this.ModuleStatesData=JSON.parse(e.data)},this.ws.onclose=()=>{this.WebSocketInitial()}}},created(){console.info("fssssff",this.$route.params.ip),this.EdgeIP=this.$route.params.ip}};const Gl=(0,W.Z)(ql,[["render",Bl],["__scopeId","data-v-3d4abff3"]]);var Kl=Gl;const Xl={class:"h-100 fade-in"},Jl={class:"d-flex flex-column",style:{height:"100%"}},eo={class:"options"},to={class:"d-flex flex-row row settings"},ao={class:"col-lg-2 d-flex"},so=(0,i._)("b",null,"EQ",-1),lo={class:"col-lg-2 d-flex"},oo=(0,i._)("b",null,"UNIT",-1),no={class:"d-flex"},io=["textContent"],ro={class:"w-100",style:{"text-align":"right"}},co={class:"col-lg-2 d-flex"},uo=(0,i._)("b",null,"查詢項目",-1),ho={class:"col-lg-2 d-flex"},mo=(0,i._)("b",null,"類型",-1),po={key:0,class:"col-lg-2 d-flex"},wo=(0,i._)("b",null,"事件?",-1),go={key:1,class:"col-lg-2 flex-fill"},fo={class:"col-lg-2"},_o=(0,i.Uk)("清除"),yo={class:"d-flex flex-row row settings"},vo={class:"col-lg-4 d-flex"},bo=(0,i._)("b",null,"開始時間",-1),So={class:"col-lg-4 d-flex"},Io=(0,i._)("b",null,"結束時間",-1),ko=(0,i._)("div",{class:"col-lg-2 flex-fill"},null,-1),xo={class:"col-lg-2"},Do=(0,i.Uk)("查詢"),Co={class:"px-1 py-0"},To={class:"result-content d-flex flex-column flex-fill w-100 h-100",style:{position:"relative"}},Wo={class:"result d-flex flex-column flex-fill w-100 my-1","element-loading-text":"數據載入中...若響應速度過慢,可以試試將查詢時間區間縮短。","element-loading-background":"rgba(122, 122, 122, 0.8)"},Po={class:"d-flex result-message font-red"},Vo={class:"w-100 h-100 bg-light",style:{position:"absolute","z-index":"3000"}},Mo={class:"info-footer d-flex flex-row shadow-sm px-2",style:{height:"25px"}},Eo={class:"flex-fill text-left",style:{"font-size":"9px"}},jo={style:{"font-size":"16px"}};function Uo(e,t,a,l,o,n){const d=(0,i.up)("el-option"),c=(0,i.up)("el-select"),u=(0,i.up)("b-button"),h=(0,i.up)("el-date-picker"),m=(0,i.up)("el-tab-pane"),p=(0,i.up)("el-tabs"),w=(0,i.up)("GPMPreviewChart"),g=(0,i.up)("GPMChart"),f=(0,i.up)("EventQueryResultView"),_=(0,i.up)("setting"),y=(0,i.up)("el-icon"),v=(0,i.up)("DatabaseSetting"),b=(0,i.up)("el-drawer"),S=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",Xl,[(0,i._)("div",Jl,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",eo,[(0,i._)("div",to,[(0,i._)("div",ao,[so,(0,i.Wm)(c,{class:"w-100",modelValue:o.QueryOptions.SelectedEQ,"onUpdate:modelValue":t[0]||(t[0]=e=>o.QueryOptions.SelectedEQ=e),onChange:t[1]||(t[1]=e=>o.QueryOptions.SelectedUNIT="")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.EQList,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,i._)("div",lo,[oo,(0,i.Wm)(c,{class:"w-100",modelValue:o.QueryOptions.SelectedUNIT,"onUpdate:modelValue":t[2]||(t[2]=e=>o.QueryOptions.SelectedUNIT=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.UNITS_IN_EQ,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.IP,label:`${e.UNIT}(${e.IP})`,value:e.IP},{default:(0,i.w5)((()=>[(0,i._)("div",no,[(0,i._)("div",{textContent:(0,r.zw)(e.UNIT),style:{color:"black"}},null,8,io),(0,i._)("div",ro,[(0,i._)("u",null,(0,r.zw)(e.IP),1)])])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,i._)("div",co,[uo,(0,i.Wm)(c,{class:"w-100",modelValue:o.QueryOptions.SelectedQueryItem,"onUpdate:modelValue":t[3]||(t[3]=e=>o.QueryOptions.SelectedQueryItem=e),onChange:n.QueryItemChangeHandle},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.QueryItems,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.label,label:e.label,value:e.label},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,i._)("div",ho,[mo,(0,i.Wm)(c,{class:"w-100",modelValue:o.selectedTabpage,"onUpdate:modelValue":t[4]||(t[4]=e=>o.selectedTabpage=e),onChange:t[5]||(t[5]=e=>o.QueryOptions.SelectedEvent="")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.TypeItems,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),"eventTabpage"==o.selectedTabpage?((0,i.wg)(),(0,i.iD)("div",po,[wo,(0,i.Wm)(c,{class:"w-100",modelValue:o.QueryOptions.SelectedEvent,"onUpdate:modelValue":t[6]||(t[6]=e=>o.QueryOptions.SelectedEvent=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.EventQueryOptions,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):(0,i.kq)("",!0),"eventTabpage"!=o.selectedTabpage?((0,i.wg)(),(0,i.iD)("div",go)):(0,i.kq)("",!0),(0,i._)("div",fo,[(0,i.Wm)(u,{class:"w-100 bg-danger"},{default:(0,i.w5)((()=>[_o])),_:1})])]),(0,i._)("div",yo,[(0,i._)("div",vo,[bo,(0,i.Wm)(h,{class:"w-100",style:{width:"203px"},modelValue:o.QueryOptions.TimeRange[0],"onUpdate:modelValue":t[7]||(t[7]=e=>o.QueryOptions.TimeRange[0]=e),type:"datetime"},null,8,["modelValue"])]),(0,i._)("div",So,[Io,(0,i.Wm)(h,{class:"w-100",style:{width:"203px"},modelValue:o.QueryOptions.TimeRange[1],"onUpdate:modelValue":t[8]||(t[8]=e=>o.QueryOptions.TimeRange[1]=e),type:"datetime"},null,8,["modelValue"])]),ko,(0,i._)("div",xo,[(0,i.Wm)(u,{class:"w-100 bg-primary",onClick:n.QueryHandle},{default:(0,i.w5)((()=>[Do])),_:1},8,["onClick"])])])])),[[S,!o.ready]]),(0,i._)("div",Co,[(0,i.Wm)(p,{type:"card",class:"flex-fill",modelValue:o.selectedTabpage,"onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedTabpage=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.TypeItems,(e=>((0,i.wg)(),(0,i.j4)(m,{key:e.name,label:e.label,name:e.name,class:"d-flex flex-column"},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])]),(0,i._)("div",To,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Wo,[(0,i._)("div",Po,(0,r.zw)(o.ServerResponseData.message),1),(0,i.Wm)(w,{ref:"preview_chart",title:"Preview",yAxisLabel:n.Ylabel,xAxisLabel:"",onDateTimeIntervalOnchanged:n.GetSliceDataHandle},null,8,["yAxisLabel","onDateTimeIntervalOnchanged"]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(g,{"element-loading-text":"數據載入中...若響應速度過慢,可以試試調整窗大小。","element-loading-background":"rgba(122, 122, 122, 0.8)",class:"query-chart flex-fill",chart_id:"query-chart",ref:"query_chart",title:`${o.QueryOptions.SelectedQueryItem}:${o.QueryOptions.SelectedEQ}/${o.QueryOptions.SelectedUNIT}`,key:o.chart_key,yAxisLabel:n.Ylabel},null,8,["title","yAxisLabel"])),[[S,o.chart_loading]])])),[[s.F8,"dataTabpage"==o.selectedTabpage],[S,o.loading]]),(0,i.wy)((0,i._)("div",Vo,[(0,i.Wm)(f,{ref:"Event_QueryHelper",queryItem:o.QueryOptions.SelectedQueryItem,eventItem:o.QueryOptions.SelectedEvent,ip:o.QueryOptions.SelectedUNIT,from:n.StartTime,to:n.EndTime},null,8,["queryItem","eventItem","ip","from","to"])],512),[[s.F8,"eventTabpage"==o.selectedTabpage]])]),(0,i._)("div",Mo,[(0,i._)("div",Eo,(0,r.zw)(o.ServerResponseData.QueryID),1),(0,i._)("div",jo,[(0,i.Wm)(y,{style:{cursor:"pointer"},onClick:t[10]||(t[10]=e=>o.showSettingPnl=!o.showSettingPnl)},{default:(0,i.w5)((()=>[(0,i.Wm)(_)])),_:1})])])]),(0,i.Wm)(b,{modelValue:o.showSettingPnl,"onUpdate:modelValue":t[11]||(t[11]=e=>o.showSettingPnl=e),title:"SETTING",size:n.IsMobileScreen?"100%":"50%"},{default:(0,i.w5)((()=>[(0,i.Wm)(v)])),_:1},8,["modelValue","size"])])}const No={class:"d-flex"},Oo={id:"right-bound",class:"bound-opt b-r h-100"},zo=["id"];function Ao(e,t,a,l,o,n){const d=(0,i.up)("el-button"),c=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"gpm-preview-chart",style:(0,r.j5)(o.chart_style)},[(0,i.wy)((0,i._)("div",null,[(0,i._)("div",No,[(0,i.Wm)(d,{plain:"",type:o.isAdjustWindowSizeMode?"danger":"info",size:"small",onClick:t[0]||(t[0]=e=>{o.isAdjustWindowSizeMode=!o.isAdjustWindowSizeMode,o.isRightBoundClickDown=!1})},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(o.isAdjustWindowSizeMode?"結束調整":"調整窗大小"),1)])),_:1},8,["type"])]),(0,i._)("div",{class:"preview-region",id:"preview-region",style:(0,r.j5)(n.previewChartStyle)},[(0,i._)("div",{class:"d-flex preview h-100",id:"time-window",style:(0,r.j5)(o.time_window_style)},[(0,i.wy)((0,i._)("div",Oo,null,512),[[s.F8,o.isAdjustWindowSizeMode]])],4),(0,i._)("canvas",{class:"preview",id:"preview_chart_"+a.chart_id},null,8,zo)],4)],512),[[s.F8,o.PreviewShow]])],4)),[[c,o.loading]])}var Ro=a(4531),$o=a.n(Ro),Ho={props:{chart_id:{type:String,default:"preview-chart"},title:{type:String,default:"Title"},xAxisLabel:{type:String,default:"時間"},yAxisLabel:{type:String,default:"YLabel"},xlabelUseTimeFormat:{type:Boolean,default:!0}},data(){return{loading:!1,Rendering:!1,PreviewShow:!0,chart_style:{backgroundColor:"#202020",border:"1px solid grey",margin:"3px",borderRadius:"4px"},preview_chartInstance:{data:{labels:[],datasets:[]},update:()=>{}},options:{responsive:!0,maintainAspectRatio:!1,lineTension:0,tooltips:{mode:"index",intersect:!0},layout:{padding:{top:1}},title:{display:!0,text:this.title,fontSize:14,fontColor:"white"},scales:{yAxes:[{gridLines:{color:"#313131"},ticks:{beginAtZero:!0,padding:20,fontColor:"white",autoskip:!0,maxTicksLimit:10,min:0,max:100},scaleLabel:{display:!0,labelString:this.yAxisLabel,fontSize:16,fontColor:"white"}}],xAxes:[{type:"time",time:{unit:"hour",displayFormats:{day:"YYYY-MM-DD HH:mm:ss",hour:"YYYY-MM-DD HH:mm:ss"}},gridLines:{color:"#313131"},ticks:{autoskip:!0,autoSkipPadding:33,maxRotation:0,minRotation:0,fontColor:"white"},scaleLabel:{display:!0,labelString:this.xAxisLabel,fontSize:16,fontColor:"white"},getValueForPixel(){}}]},annotation:{drawTime:"afterDraw",annotations:[{type:"line",id:"line",mode:"horizontal",scaleID:"y-axis-0",value:2,borderWidth:2,borderColor:"red"}]},legend:{display:!1}},xlabels:[],datasets:[],isDark:!0,currentTheme:"dark",colors:["blue","green","red","orange","pink","grey","black","seagreen"],time_window_style:{visibility:"visible",width:"100px",left:"100px",backgroundColor:"white"},time_window_left_property:100,time_window_width:100,ori_time_window_width:100,lastOffsetOFTimeWindow:0,isTimeWindowClickDown:!1,isRightBoundClickDown:!1,isAdjustWindowSizeMode:!1,bound_ori_mouse_x:-1,previewData:null}},methods:{ThemeChange(){this.currentTheme="dark"==this.currentTheme?"light":"dark",this.chart_style.backgroundColor="dark"==this.currentTheme?"#202020":"white",this.chart_style.border="dark"==this.currentTheme?"1px solid grey":"1px solid white",this.isDark="dark"==this.currentTheme,this.chartInstance.options.title.fontColor=this.chartInstance.options.scales.xAxes[0].ticks.fontColor=this.chartInstance.options.scales.xAxes[0].scaleLabel.fontColor=this.chartInstance.options.scales.yAxes[0].ticks.fontColor=this.chartInstance.options.scales.yAxes[0].scaleLabel.fontColor="dark"==this.currentTheme?"white":"black",this.chartInstance.update()},ChartInit(){this.xlabelUseTimeFormat||(this.options.scales.xAxes[0].type="category");const e=document.getElementById("preview_chart_"+this.chart_id);this.preview_chartInstance=new($o())(e,{type:"line",data:{labels:[],datasets:[]},options:this.options}),this.preview_chartInstance.options.animation=!1},PreviewChartEventRegist(){this.TimeWindowDom.addEventListener("mousedown",(e=>this.TimeWindowMouseDown(e))),this.TimeWindowDom.addEventListener("mouseup",(e=>this.TimeWindowMouseUp(e))),this.TimeWindowDom.addEventListener("mousemove",(e=>this.TimeWindowMouseMove(e))),document.getElementById("preview_chart_"+this.chart_id).addEventListener("mouseup",(e=>this.TimeWindowMouseUp(e))),document.getElementById("preview_chart_"+this.chart_id).addEventListener("mousemove",(e=>this.TimeWindowMouseMove(e))),document.getElementById("preview_chart_"+this.chart_id).addEventListener("mousedown",(e=>{if(!this.isAdjustWindowSizeMode){var t=this.preview_chartInstance.scales["x-axis-0"].left;this.time_window_left_property=e.x-50<=t?t:e.x-25-50,this.time_window_style.left=this.time_window_left_property+"px"}})),document.getElementById("preview-region").addEventListener("mousemove",(e=>{if(this.isRightBoundClickDown){console.log("adjust width",e);var t=e.x-this.bound_ori_mouse_x;this.time_window_width=this.ori_time_window_width+t,this.time_window_style.width=this.time_window_width+"px"}})),document.getElementById("preview-region").addEventListener("mouseup",(()=>{this.isRightBoundClickDown=!1})),document.getElementById("preview-region").addEventListener("mousedown",(e=>{this.ori_time_window_width=this.time_window_width,this.bound_ori_mouse_x=e.x})),document.getElementById("right-bound").addEventListener("mousedown",(()=>{this.isRightBoundClickDown=!0})),document.getElementById("right-bound").addEventListener("mouseup",(()=>this.isRightBoundClickDown=!1)),document.getElementById("right-bound").addEventListener("mousemove",(e=>{this.isRightBoundClickDown&&console.log("adjust width",e)}))},async UpdatePreviewChart(e){this.time_window_style.visibility="visible",this.previewData=e,this.PreviewChartEventRegist(),console.info("開始渲染");var t=e.datasets[0].data;-1==e.ymax?this.preview_chartInstance.options.scales.yAxes[0].ticks.max=Math.max.apply(null,t):this.preview_chartInstance.options.scales.yAxes[0].ticks.max=e.ymax,-1==e.ymin?this.preview_chartInstance.options.scales.yAxes[0].ticks.min=Math.min.apply(null,t):this.preview_chartInstance.options.scales.yAxes[0].ticks.min=e.min,this.preview_chartInstance.data.labels=e.labels,this.preview_chartInstance.data.datasets=e.datasets,this.preview_chartInstance.update(),console.info("結束渲染")},ShowPreviewChart(){this.PreviewShow=!0},HidePreviewChart(){this.PreviewShow=!1},Clear(){this.preview_chartInstance.data.datasets=[],this.preview_chartInstance.data.labels=[],this.preview_chartInstance.update(),this.previewData=null},async RenderData(e,t){await new Promise(((a,s)=>{try{this.chartInstance.data.datasets=t,this.chartInstance.data.labels=e,this.chartInstance.update(),console.info("結束渲染"),a()}catch(l){console.error(l),this.ChartInit(),s(l)}}))},TimeWindowMouseDown(e){this.isAdjustWindowSizeMode||(this.isTimeWindowClickDown=!0,this.lastOffsetOFTimeWindow=e.offsetX,this.time_window_style.backgroundColor="red")},TimeWindowMouseUp(){if(this.isTimeWindowClickDown=!1,this.time_window_style.backgroundColor="white",!this.isAdjustWindowSizeMode){var e=ee()(this.preview_chartInstance.scales["x-axis-0"].getValueForPixel(this.time_window_left_property).toString()).format("yyyy/MM/DD HH:mm:ss"),t=ee()(this.preview_chartInstance.scales["x-axis-0"].getValueForPixel(this.time_window_left_property+this.time_window_width).toString()).format("yyyy/MM/DD HH:mm:ss");this.$emit("DateTimeIntervalOnchanged",{from:e,to:t})}},TimeWindowMouseMove(e){if(!this.isAdjustWindowSizeMode&&this.isTimeWindowClickDown){var t=this.preview_chartInstance.scales["x-axis-0"].left;this.time_window_left_property=e.x<=t?t:e.x-25,this.time_window_style.left=this.time_window_left_property+"px"}}},computed:{TimeWindowDom(){return document.getElementById("time-window")},previewChartStyle(){return window.screen.width>560?"height:180px":"height:120px"}},mounted(){this.ChartInit()},created(){}};const Lo=(0,W.Z)(Ho,[["render",Ao]]);var Qo=Lo;const Fo={id:"database-setting",class:"d-flex flex-column w-100 h-100 mx-0 my-0 px-0"},Zo=(0,i._)("div",{class:"w-100"},null,-1),Yo={class:"w-100 flex-fill"},Bo=(0,i._)("h5",null,"IDMS DATABASE",-1),qo={class:"d-flex flex-row"},Go=(0,i._)("div",{class:"property-name"},"IDMS Database",-1),Ko=(0,i._)("h5",null,"DB BASIC",-1),Xo={class:"d-flex flex-row"},Jo=(0,i._)("div",{class:"property-name"},"HOST",-1),en={class:"d-flex flex-row"},tn=(0,i._)("div",{class:"property-name"},"PORT",-1),an={class:"d-flex flex-row"},sn=(0,i._)("div",{class:"property-name"},"User Name",-1),ln={class:"d-flex flex-row"},on=(0,i._)("div",{class:"property-name"},"Password",-1),nn=(0,i._)("h5",null,"連線測試",-1),rn={class:"d-flex"},dn=(0,i.Uk)("TEST"),cn=(0,i._)("h5",null,"Colors",-1),un={class:"property-name"},hn=(0,i._)("h5",null,"Axes",-1),mn={class:"d-flex w-100"},pn=["textContent"],wn=(0,i._)("div",{class:"mx-2"},"最大值",-1),gn=(0,i._)("div",{class:"mx-2"},"最小值",-1),fn=(0,i._)("div",{class:"w-100 bg-dark",style:{height:"1px"}},null,-1);function _n(e,t,a,s,l,o){const n=(0,i.up)("el-option"),d=(0,i.up)("el-select"),c=(0,i.up)("el-divider"),u=(0,i.up)("el-input"),h=(0,i.up)("b-button"),m=(0,i.up)("el-tab-pane"),p=(0,i.up)("el-color-picker"),w=(0,i.up)("el-input-number"),g=(0,i.up)("el-tabs");return(0,i.wg)(),(0,i.iD)("div",Fo,[Zo,(0,i._)("div",Yo,[(0,i.Wm)(g,{modelValue:l.tab,"onUpdate:modelValue":t[5]||(t[5]=e=>l.tab=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{label:"Database",name:"Database"},{default:(0,i.w5)((()=>[Bo,(0,i._)("div",qo,[Go,(0,i.Wm)(d,{class:"w-100",modelValue:l.IDMSDBNAME,"onUpdate:modelValue":t[0]||(t[0]=e=>l.IDMSDBNAME=e)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.DataBaseList,(e=>((0,i.wg)(),(0,i.j4)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,i.Wm)(c),Ko,(0,i._)("div",Xo,[Jo,(0,i.Wm)(u,{class:"w-100",modelValue:l.Host,"onUpdate:modelValue":t[1]||(t[1]=e=>l.Host=e)},null,8,["modelValue"])]),(0,i._)("div",en,[tn,(0,i.Wm)(u,{class:"w-100",modelValue:l.Port,"onUpdate:modelValue":t[2]||(t[2]=e=>l.Port=e)},null,8,["modelValue"])]),(0,i._)("div",an,[sn,(0,i.Wm)(u,{class:"w-100",modelValue:l.UserName,"onUpdate:modelValue":t[3]||(t[3]=e=>l.UserName=e)},null,8,["modelValue"])]),(0,i._)("div",ln,[on,(0,i.Wm)(u,{"show-password":"",class:"w-100",modelValue:l.Password,"onUpdate:modelValue":t[4]||(t[4]=e=>l.Password=e)},null,8,["modelValue"])]),(0,i.Wm)(c),nn,(0,i._)("div",rn,[(0,i.Wm)(h,{variant:"light"},{default:(0,i.w5)((()=>[dn])),_:1})])])),_:1}),(0,i.Wm)(m,{label:"圖表選項",name:"Charting"},{default:(0,i.w5)((()=>[cn,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.Properties,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"d-flex flex-row",key:e.label},[(0,i._)("div",un,(0,r.zw)(e.label),1),(0,i.Wm)(p,{"show-alpha":"",modelValue:e.charting.color,"onUpdate:modelValue":t=>e.charting.color=t},null,8,["modelValue","onUpdate:modelValue"])])))),128)),(0,i.Wm)(c),hn,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.Properties,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"d-flex flex-row mb-2",key:e.label},[(0,i._)("div",mn,[(0,i._)("div",{class:"property-name",textContent:(0,r.zw)(e.label)},null,8,pn),wn,(0,i.Wm)(w,{size:"small",precision:"2",modelValue:e.Axes.y.max,"onUpdate:modelValue":t=>e.Axes.y.max=t},null,8,["modelValue","onUpdate:modelValue"]),gn,(0,i.Wm)(w,{size:"small",precision:"2",modelValue:e.Axes.y.min,"onUpdate:modelValue":t=>e.Axes.y.min=t},null,8,["modelValue","onUpdate:modelValue"])])])))),128))])),_:1})])),_:1},8,["modelValue"])]),fn])}async function yn(){return await En("/api/Version/WebsiteVersion")}async function vn(){return await En("/api/DB/GetEdgeInformation")}async function bn(){return await En("/api/PostgrelDB/Databases")}async function Sn(){return await En("/api/Query/ModuleInfos")}async function In(e,t,a,s){return await En(`/api/DB/VibrationEnergy?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function kn(e,t,a,s){return await En(`/api/DB/HealthScore?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function xn(e,t,a,s){return await En(`/api/DB/AlertIndex?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function Dn(e,t,a,s){return await En(`/api/DB/vibration_raw_data?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function Cn(e,t,a,s,l){return await En(`/api/DB/vibration_raw_data_with_QueryID?edgename=${e}&ip=${t}&from=${a}&to=${s}&queryID=${l}`)}async function Tn(e,t,a,s){return await En(`/api/DB/Physical_quantity?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function Wn(e,t,a,s){return await En(`/api/DB/SideBandSeverity?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function Pn(e,t,a,s){return await En(`/api/DB/Frequency_doublingSeverity?edgename=${e}&ip=${t}&from=${a}&to=${s}`)}async function Vn(e,t,a){return await En(`/api/DB/GetSplice?queryID=${e}&from=${t}&to=${a}`)}Q().defaults.baseURL=S.host;const Mn={async HealthScoreOutOfThreshold(e,t,a,s,l=1){return await En(`/api/DB/DignoseOutOfThreshold?edgename=${e}&ip=${t}&from=${a}&to=${s}&page=${l}`)},async SideBandSeverityOutOfThres(e,t,a,s,l=1){return await En(`/api/DB/SideBandSeverityOutOfThres?edgename=${e}&ip=${t}&from=${a}&to=${s}&page=${l}`)}};async function En(e=""){return new Promise((t=>{Q().get(e).catch((e=>{console.info(e),t({message:e.message})})).then((e=>{t(e.data)}))}))}class jn{constructor(e){(0,te.Z)(this,"label",""),(0,te.Z)(this,"charting",{color:"rgba(0, 38, 255, 1)"}),(0,te.Z)(this,"Axes",{y:{max:-1,min:-1},x:{max:-1,min:-1}}),this.label=e}}var Un={data(){return{IDMSDBNAME:"",Host:"127.0.0.1",Port:"5432",UserName:"postgres",Password:"changeme",DataBaseList:[],tab:"Charting",Properties:[new jn("Health Score"),new jn("Health Score(WMA)"),new jn("Alert Index"),new jn("振動能量"),new jn("Raw Data")],max_label:"最大值",min_label:"最大值"}},mounted(){setTimeout((async()=>{this.DataBaseList=await bn()}),12)}};const Nn=(0,W.Z)(Un,[["render",_n]]);var On=Nn;function zn(e,t,a,s,l,o){const n=(0,i.up)("el-pagination"),r=(0,i.up)("EventTableVue"),d=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{layout:"prev, pager, next",modelValue:l.page,"onUpdate:modelValue":t[0]||(t[0]=e=>l.page=e),background:"",total:l.totalNum,"page-size":15,onCurrentChange:o.ChangePage},null,8,["modelValue","total","onCurrentChange"]),(0,i.Wm)(r,{data:l.dataRet,columns:l.columns},null,8,["data","columns"])])),[[d,l.loading]])}const An={key:1};function Rn(e,t,a,s,l,o){const n=(0,i.up)("el-table-column"),d=(0,i.up)("el-tag"),c=(0,i.up)("el-table");return(0,i.wg)(),(0,i.j4)(c,{data:a.data,stripe:""},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{label:"Time",sortable:"",fixed:"left",prop:"TimeStamp",formatter:o.TimeFormat},null,8,["formatter"]),(0,i.Wm)(n,{label:"IP",prop:"SensorIP"}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.columns,(e=>((0,i.wg)(),(0,i.j4)(n,{key:e.prop,label:e.label,prop:e.prop},{default:(0,i.w5)((t=>["boolean"==e.type?((0,i.wg)(),(0,i.j4)(d,{key:0,effect:"dark",type:t.row[e.prop]?"danger":"info"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.row[e.prop]?"V":"X"),1)])),_:2},1032,["type"])):((0,i.wg)(),(0,i.iD)("div",An,(0,r.zw)(t.row[e.prop]),1))])),_:2},1032,["label","prop"])))),128))])),_:1},8,["data"])}var $n={props:{data:{type:Object,default(){return{SensorIP:"",TimeStamp:"",ModelName:"",OutOfAlarmThreshold:!1,OutOfWarningThreshold:!1}}},columns:{type:Array,default(){return[{label:"IP",prop:"SensorIP"}]}}},methods:{TimeFormat(e,t,a,s){return a.replace("T"," ")},FormatHandle(e,t){return"<el-tag>{{row[prop]}}</el-tag>"}}};const Hn=(0,W.Z)($n,[["render",Rn]]);var Ln=Hn,Qn={components:{EventTableVue:Ln},props:{ip:{type:String,default:"123"},from:{type:Date,default:Date.now},to:{type:Date,default:Date.now},queryItem:{type:String,default:""},eventItem:{type:String,default:""}},data(){return{loading:!1,dataRet:null,totalNum:1,page:1,columns:[{label:"IP",prop:"SensorIP"}]}},methods:{QueryHandle(e=1){1==e&&(this.totalNum=0,this.page=1,this.dataRet=[]),this.loading=!0,console.log(this.queryItem,this.eventItem),"Health Score"==this.queryItem&&"Out Of Threshold"==this.eventItem&&Mn.HealthScoreOutOfThreshold(this.ip,this.from,this.to,e).then((e=>{this.RenderTable(e)})).catch((e=>{console.info("八逼Q")})),"Sideband Severity"==this.queryItem&&"Out Of Threshold"==this.eventItem&&Mn.SideBandSeverityOutOfThres(this.ip,this.from,this.to,e).then((e=>{this.RenderTable(e)})),setTimeout((()=>{this.loading=!1}),200)},ChangePage(e){console.info(e),this.QueryHandle(e)},RenderTable(e){this.columns=e.ElTableColumns,console.log(e),e.message?console.info("八逼Q了"):0!=e.TotalNum?(this.totalNum=e.TotalNum,this.page=e.Page,this.dataRet=e.Data):(this.totalNum=0,this.page=1,this.dataRet=[])}}};const Fn=(0,W.Z)(Qn,[["render",zn]]);var Zn=Fn,Yn={components:{GPMChart:le.Z,GPMPreviewChart:Qo,DatabaseSetting:On,EventQueryResultView:Zn},data(){return{edge_ip:"",edge_name:"",ready:!1,selectedTabpage:"dataTabpage",TypeItems:[{name:"dataTabpage",label:"數據"},{name:"eventTabpage",label:"事件"}],DatabaseList:[],ModuleList:[],QueryOptions:{SelectedEQ:"",SelectedUNIT:"",SelectedQueryItem:"",SelectedEvent:"",TimeRange:[]},QueryItems:[{label:"Health Score",eventOptions:["Out Of Threshold"]},{label:"Raw Data",eventOptions:[]},{label:"Alert Index",eventOptions:[]},{label:"振動能量",eventOptions:[]},{label:"Physical Quanity",eventOptions:[]},{label:"Sideband Severity",eventOptions:["Out Of Threshold"]},{label:"FrequencyDoubling Severity",eventOptions:[]}],loading:!1,chart_loading:!1,showSettingPnl:!1,chart_key:"",ServerResponseData:{count:0,dbConnected:!0,message:"",timeList:[],valueList:[],QueryID:"-"}}},computed:{EQList(){var e=[];return this.ModuleList.forEach((t=>{e.includes(t.EQ)||e.push(t.EQ)})),e},UNITS_IN_EQ(){return this.ModuleList.filter((e=>e.EQ==this.QueryOptions.SelectedEQ))},StartTime(){return ee()(this.QueryOptions.TimeRange[0]).format("yyyy/MM/DD HH:mm:ss")},EndTime(){return ee()(this.QueryOptions.TimeRange[1]).format("yyyy/MM/DD HH:mm:ss")},Ylabel(){return"Raw Data"==this.QueryOptions.SelectedQueryItem?"G":"Health Score"==this.QueryOptions.SelectedQueryItem?"Score":"Alert Index"==this.QueryOptions.SelectedQueryItem?"Index":""},IsMobileScreen(){return window.screen.width<600},EventQueryOptions(){return this.QueryItems.find((e=>e.label==this.QueryOptions.SelectedQueryItem)).eventOptions}},methods:{async FetchModuleList(){this.ModuleList=await hs(this.edge_ip).catch((async e=>{console.info("IDMS websocket連接失敗,從資料庫調取模組資訊",e);var t=await Sn();return t})),this.ready=!0,console.info(this.ModuleList)},QueryItemChangeHandle(e){"Raw Data"==e&&alert("資料量龐大會有點慢")},async QueryHandle(){this.SaveQueryOptionsToLocalStorage(),"dataTabpage"==this.selectedTabpage?(this.loading=!0,new Promise((()=>{this.$refs.query_chart.Clear(),"Health Score"==this.QueryOptions.SelectedQueryItem?kn(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):"Alert Index"==this.QueryOptions.SelectedQueryItem?xn(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):"振動能量"==this.QueryOptions.SelectedQueryItem?In(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):"Raw Data"==this.QueryOptions.SelectedQueryItem?Dn(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):"Physical Quanity"==this.QueryOptions.SelectedQueryItem?Tn(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):"Sideband Severity"==this.QueryOptions.SelectedQueryItem?Wn(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):"FrequencyDoubling Severity"==this.QueryOptions.SelectedQueryItem?Pn(this.edge_name,this.QueryOptions.SelectedUNIT,this.StartTime,this.EndTime).then((e=>{this.RenderChart(e)})):this.loading=!1}))):this.$refs.Event_QueryHelper.QueryHandle()},SaveQueryOptionsToLocalStorage(){var e=localStorage.getItem("query-options-by-edge"),t={};e?(t=JSON.parse(e),t[this.edge_name]=this.QueryOptions):t[this.edge_name]=this.QueryOptions,localStorage.setItem("query-options-by-edge",JSON.stringify(t))},ReadQueryOptionsFromLocalStorage(){var e=localStorage.getItem("query-options-by-edge");if(e){var t=JSON.parse(e),a=t[this.edge_name];a?this.QueryOptions=a:(this.QueryOptions.SelectedEQ="",this.QueryOptions.SelectedUNIT="")}},async RenderChart(e){this.$toast.success("Done",{position:"top-right",duration:1e3}),this.ServerResponseData=e,e.isPreview?this.RenderPreviewChart(e):(this.$refs.preview_chart.HidePreviewChart(),this.RenderFullChart(e)),this.loading=!1},async GetSliceDataHandle(e={}){this.chart_loading=!0;var t={};t="Raw Data"==this.QueryOptions.SelectedQueryItem?await Cn(this.edge_name,this.QueryOptions.SelectedUNIT,e.from,e.to,"givemedetail"):await Vn(this.ServerResponseData.QueryID,e.from,e.to),await this.RenderFullChart(t),this.chart_loading=!1},async RenderFullChart(e,t=!1){await new Promise((a=>{this.$refs.query_chart.UpdateChart(e,t),a()}))},async RenderPreviewChart(e){await new Promise((t=>{this.$refs.preview_chart.UpdatePreviewChart(e),this.$refs.preview_chart.ShowPreviewChart(),t()}))}},async mounted(){var e=localStorage.getItem("edgeip"),t=localStorage.getItem("edgename");console.log(e,t),this.edge_ip=e,this.edge_name=t,this.FetchModuleList().then((()=>{this.ReadQueryOptionsFromLocalStorage()})),this.DatabaseList=await bn()}};const Bn=(0,W.Z)(Yn,[["render",Uo]]);var qn=Bn;const Gn={class:"w-100 d-flex flex-row justify-content-end"},Kn={class:"w-100 row g-0 mx-0 my-0"};function Xn(e,t,a,l,o,n){const d=(0,i.up)("el-switch"),c=(0,i.up)("LandingViewVue"),u=(0,i.up)("el-table-column"),h=(0,i.up)("el-table"),m=(0,i.up)("EdgeStatusVue"),p=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["h-100 fade-in",n.ColorMode])},[(0,i._)("div",Gn,[(0,i.Wm)(d,{modelValue:o.dark_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.dark_mode=e),"active-text":"Dark","active-color":"grey","inactive-text":"Light","inactive-color":"rgb(13, 110, 253)",onChange:n.SaveDarkModeToLocal},null,8,["modelValue","onChange"])]),(0,i.Wm)(c),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(h,{data:o.Edges},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Edge 名稱",prop:"Name"}),(0,i.Wm)(u,{label:"Edge IP",prop:"EdgeIP"}),(0,i.Wm)(u,{label:"Edge IDMS 狀態",prop:"EdgeIP"}),(0,i.Wm)(u,{label:"Edge IP",prop:"EdgeIP"})])),_:1},8,["data"])],512),[[s.F8,"list"==o.display_mode]]),(0,i.wy)((0,i._)("div",Kn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.Edges,(e=>((0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["edge-container px-1 py-1 my-1",[1==o.Edges.length?" col-md-12":" col-md-6",n.ColorMode]]),key:e.EdgeIP},[(0,i.Wm)(m,{ColorMode:n.ColorMode,EdgeProp:e},null,8,["ColorMode","EdgeProp"])],2)))),128))],512),[[s.F8,"dashboard"==o.display_mode]])],2)),[[p,o.loading]])}const Jn={class:"fade-out fade-in h-100 w-100 bg-dark landing-view",sticky:""},ei=(0,i._)("div",{class:"gpm-text w-100"},"GPM",-1),ti=[ei];function ai(e,t,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",Jn,ti)}var si={data(){return{show:!0}},mounted(){document.getElementById("breadcrumb").style["visibility"]="hidden",setTimeout((()=>{this.show=!1,document.getElementById("breadcrumb").style["visibility"]="visible"}),1e3)}};const li=(0,W.Z)(si,[["render",ai]]);var oi=li;const ni={class:"edge-status mx-1 my-1 d-flex flex-column h-100"},ii={class:"title d-flex flex-column px-1"},ri={class:"flex-fill d-flex flex-row justify-content-end"},di=(0,i._)("span",{class:"network-status-label py-1"},"網路狀態",-1),ci={class:"show-types"},ui={class:"d-flex flex-row justify-content-center flex-fill"},hi={key:0,class:"d-flex flex-row justify-content-center"},mi={class:"value-num-div"},pi=(0,i._)("div",null,"感測器數量",-1),wi={class:"value-num connected-num"},gi=(0,i._)("div",{class:"shadow"},null,-1),fi={class:"value-num-div"},_i=(0,i._)("div",{class:""},"IDMS",-1),yi=(0,i._)("div",{class:"shadow"},null,-1),vi={key:1,class:"d-flex flex-row justify-content-center"},bi={class:"value-num-div"},Si=(0,i._)("div",null,"CPU",-1),Ii={class:"value-num connected-num"},ki=(0,i._)("div",{class:"shadow"},null,-1),xi={class:"value-num-div"},Di=(0,i._)("div",{class:""},"RAM",-1),Ci=(0,i._)("div",{class:"shadow"},null,-1),Ti={class:"my-2"},Wi={class:"d-flex flex-row"},Pi=(0,i.Uk)("Enter");function Vi(e,t,a,s,l,o){const n=(0,i.up)("NetworkStatusVue"),d=(0,i.up)("el-divider"),c=(0,i.up)("el-radio-button"),u=(0,i.up)("el-radio-group"),h=(0,i.up)("count-to"),m=(0,i.up)("el-progress"),p=(0,i.up)("b-button"),w=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",ni,[(0,i._)("div",{class:"d-flex flex-row",style:(0,r.j5)(o.TitleColor)},[(0,i._)("div",ii,[(0,i._)("h3",null,(0,r.zw)(a.EdgeProp.Name.toUpperCase()),1),(0,i._)("span",null,(0,r.zw)(a.EdgeProp.EdgeIP),1)]),(0,i._)("div",ri,[di,(0,i.Wm)(n,{ip:a.EdgeProp.EdgeIP,toolTipPosition:"bottom"},null,8,["ip"])])],4),(0,i.Wm)(d),(0,i._)("div",ci,[(0,i.Wm)(u,{modelValue:l.DisplayMode,"onUpdate:modelValue":t[0]||(t[0]=e=>l.DisplayMode=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{label:"Overview"}),(0,i.Wm)(c,{label:"Performance"})])),_:1},8,["modelValue"])]),(0,i._)("div",ui,["Overview"==l.DisplayMode?((0,i.wg)(),(0,i.iD)("div",hi,[(0,i._)("div",null,[(0,i.Wm)(m,{type:"circle",percentage:100,width:l.circleWidth,status:"primary"},{default:(0,i.w5)((()=>[(0,i._)("div",mi,[pi,(0,i._)("div",wi,[(0,i.Wm)(h,{startVal:0,endVal:l.edgeStatusFromIDMS.OnlineSensorNum,duration:2100},null,8,["endVal"])])])])),_:1},8,["width"]),gi]),(0,i._)("div",null,[(0,i.Wm)(m,{type:"circle",percentage:100,width:l.circleWidth,status:l.IDMSAlive?"success":"exception"},{default:(0,i.w5)((()=>[(0,i._)("div",fi,[_i,(0,i._)("div",{class:(0,r.C_)(["value-num",l.IDMSAlive?"Online":"Offline"])},(0,r.zw)(l.IDMSAlive?"ONLINE":"OFFLINE"),3)])])),_:1},8,["width","status"]),yi])])):((0,i.wg)(),(0,i.iD)("div",vi,[(0,i._)("div",null,[(0,i.Wm)(m,{type:"circle",percentage:l.PerformanceData.cpu,width:l.circleWidth,status:"primary"},{default:(0,i.w5)((()=>[(0,i._)("div",bi,[Si,(0,i._)("div",Ii,[(0,i.Wm)(h,{startVal:0,endVal:l.PerformanceData.cpu,duration:2100},null,8,["endVal"])])])])),_:1},8,["percentage","width"]),ki]),(0,i._)("div",null,[(0,i.Wm)(m,{type:"circle",percentage:l.PerformanceData.ram,width:l.circleWidth,status:l.IDMSAlive?"success":"exception"},{default:(0,i.w5)((()=>[(0,i._)("div",xi,[Di,(0,i._)("div",{class:(0,r.C_)(["value-num",l.IDMSAlive?"Online":"Offline"])},(0,r.zw)(l.PerformanceData.ram),3)])])),_:1},8,["percentage","width","status"]),Ci])]))]),(0,i._)("div",Ti,[(0,i._)("div",Wi,[(0,i.Wm)(p,{class:(0,r.C_)([o.EnterButtonColorMode,"flex-fill"]),onClick:o.EnterEdgeHandle},{default:(0,i.w5)((()=>[Pi])),_:1},8,["class","onClick"])])])])),[[w,l.loading]])}async function Mi(e){var t=await Q().get(`http://${e}:81/api/Performance`);return t.data}var Ei={components:{NetworkStatusVue:V},props:{EdgeProp:{type:Object,default(){return{Name:"Line-2",EdgeIP:"127.0.0.1",SensorNum:10,Status:"Offline"}}},ColorMode:{type:String,default:"bg-dark"}},computed:{TitleColor(){return{color:"bg-dark"==this.ColorMode?"#939393":"black"}},EnterButtonColorMode(){return"bg-dark"==this.ColorMode?"bg-dark":"bg-primary"}},data(){return{DisplayMode:"Overview",performance:!1,loading:!0,edgeStatusWebsocket:null,circleWidth:160,edgeStatusFromIDMS:{OnlineSensorNum:-1},IDMSAlive:!1,PerformanceData:{cpu:0,ram:0},PerformanceDataTimer:null}},methods:{EnterEdgeHandle(){localStorage.setItem("edgeip",this.EdgeProp.EdgeIP),localStorage.setItem("edgename",this.EdgeProp.Name.toLowerCase()),this.$router.push(`/EdgeMain/${this.EdgeProp.EdgeIP}`)},WebsocketIni(){try{this.edgeStatusWebsocket=new WebSocket(`ws://${this.EdgeProp.EdgeIP}:44332/EdgeStatus`),this.edgeStatusWebsocket.onmessage=e=>{this.edgeStatusFromIDMS=JSON.parse(e.data),this.IDMSAlive=!0,this.loading=!1},this.edgeStatusWebsocket.onclose=()=>{this.WebsocketClear(),this.WebsocketIni(),this.IDMSAlive=!1,this.loading=!1},this.edgeStatusWebsocket.onerror=e=>{this.WebsocketClear(),this.WebsocketIni(),this.IDMSAlive=!1,this.loading=!1}}catch(e){this.IDMSAlive=!1,this.loading=!1}},WebsocketClear(){null!=this.edgeStatusWebsocket&&(this.edgeStatusWebsocket.onclose=null,this.edgeStatusWebsocket.onerror=null,this.edgeStatusWebsocket.close(),this.edgeStatusWebsocket=null)}},mounted(){this.PerformanceDataTimer=setInterval((()=>Mi(this.EdgeProp.EdgeIP).then((e=>this.PerformanceData=e))),1e3),this.WebsocketIni()},unmounted(){clearInterval(this.PerformanceDataTimer),this.WebsocketClear()}};const ji=(0,W.Z)(Ei,[["render",Vi]]);var Ui=ji,Ni={components:{EdgeStatusVue:Ui,LandingViewVue:oi},mounted(){console.info("mounted ebtg"),this.dark_mode="true"==localStorage.getItem("entry-page-dark-mode"),this.Initialize()},methods:{Initialize(){this.Edges=[],setTimeout((async()=>{this.Edges=await vn(),this.loading=!1}),100)},SaveDarkModeToLocal(){localStorage.setItem("entry-page-dark-mode",this.dark_mode)}},computed:{ColorMode(){return this.dark_mode?"bg-dark":"bg-light"}},data(){return{dark_mode:!0,display_mode:"dashboard",loading:!0,Edges:[]}}};const Oi=(0,W.Z)(Ni,[["render",Xn]]);var zi=Oi,Ai=a(2391),Ri=a(5454),$i=[{path:"/",name:"SSM",component:ct},{path:"/admin",name:"ADMIN",component:ja}],Hi=[{path:"/",name:"EntryPage",component:zi,children:[{path:"",name:"Dashboard",component:Promise.resolve().then(a.bind(a,2391))},{path:"ThresholdSetting",name:"ThresholdSetting",component:Promise.resolve().then(a.bind(a,5454))}]},{path:"/EdgeMain/:ip",name:"診斷頁面",component:Nl},{path:"/VibrationEnergy/:ip",name:"振動能量",component:a.e(33).then(a.bind(a,5033)),children:[{path:"Dashboard",name:"Dashboard",component:Ai["default"]},{path:"ThresholdSetting",name:"ThresholdSetting",component:Ri["default"]}]},{path:"/EdgeMain/modulestates/:ip",name:"感測器狀態",component:Kl},{path:"/idms/query",name:"Query",component:qn}],Li=[{path:"/ComponentTest",name:"ct",component:j},{path:"/",name:"EntryPage",component:zi},{path:"/SSM",name:"SSM",component:ct},{path:"/admin",name:"ADMIN",component:ja},{path:"/EdgeMain",name:"診斷頁面",component:Nl,children:[{path:"/modulestates",name:"感測器狀態",component:Kl}]},{path:"/idms/module-states",name:"感測器狀態",component:Kl},{path:"/idms/query",name:"Query",component:qn}];const Qi="dev"==S.mode?Li:"gmm"==S.mode?$i:Hi,Fi=(0,I.p7)({history:(0,I.PO)(),routes:Qi});function Zi(){return Qi}var Yi=Fi;const Bi={class:"w-100 d-flex flex-column release-content"},qi={class:""};function Gi(e,t,a,s,l,o){const n=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.j4)(n,{modelValue:l.show,"onUpdate:modelValue":t[0]||(t[0]=e=>l.show=e),direction:"btt",size:"30%"},{default:(0,i.w5)((()=>[(0,i._)("div",Bi,[(0,i._)("div",null,[(0,i._)("h3",qi,(0,r.zw)(l.website_ver)+" 版本說明",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.releaseList,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"note",key:t},"["+(0,r.zw)(t+1)+"] "+(0,r.zw)(e),1)))),128))])])),_:1},8,["modelValue"])}var Ki={data(){return{show:!1,website_ver:"",releaseList:["支援多模組遠端訓練"]}},mounted(){setTimeout((async()=>{var e=localStorage.getItem("idms_website_version");yn().then((t=>{this.website_ver=t,this.show=e!=this.website_ver,localStorage.setItem("idms_website_version",this.website_ver)})).catch((e=>{console.info("無法fetch網頁版本資訊")}))}),3e3)}};const Xi=(0,W.Z)(Ki,[["render",Gi]]);var Ji=Xi,er={components:{NetworkStatusVue:V,ReleaseNote:Ji},data(){return{seletedRouteName:"診斷頁面",showNavbar:!1,navstyle:"bg-dark",breadcrumbItems:[{text:"SSM",href:"/"},{text:"Log",href:"/log"},{text:"Library"}],EdgeIP:"-",EdgeName:"-"}},methods:{routerHandle(e){this.EdgeIP=localStorage.getItem("edgeip"),console.info(e),this.$router.push(`${e.replace(":ip",this.EdgeIP)}`)}},computed:{mode(){return S.mode},routes(){return Zi()}},mounted(){let e=(0,I.yj)();(0,i.YP)((()=>e.path),((e,t)=>{console.info("route changed",e,t);var a=this.showNavbar=e+""!=="/";a||void 0==t||(this.navstyle="true"==localStorage.getItem("entry-page-dark-mode")?"bg-dark":"bg-primary",location.reload())})),(0,i.YP)((()=>e.name),((e,t)=>{this.EdgeIP=localStorage.getItem("edgeip"),this.EdgeName=localStorage.getItem("edgename"),console.info(this.EdgeIP,this.EdgeName)})),(0,i.YP)((()=>e.name),((e,t)=>{this.seletedRouteName=e}))}};const tr=(0,W.Z)(er,[["render",b]]);var ar=tr,sr=a(9907);(0,sr.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var lr=a(8212),or=a(5860);const nr=(0,s.ri)(ar);nr.use(S),nr.use(Yi),nr.use(l.ZP),nr.use(lr.Z),nr.use(or.ZP),nr.use(o.Z,{size:"default",zIndex:3e3});for(const[ir,rr]of Object.entries(n))nr.component(ir,rr);nr.mount("#app")},6647:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var s=a(3396),l=a(7139);const o=["id"],n=["id"];function i(e,t,a,i,r,d){const c=(0,s.Q2)("loading");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{ref:"gpm-chart-"+a.chart_id,class:"gpm-chart",style:(0,l.j5)(r.chart_style),id:d.id},[(0,s._)("canvas",{class:"h-100",onClick:t[0]||(t[0]=(...e)=>d.ClickChartHandel&&d.ClickChartHandel(...e)),id:a.chart_id},null,8,n)],12,o)),[[c,r.loading||r.outOfViewPort]])}var r=a(4531),d=a.n(r),c={components:{},props:{chart_id:{type:String,default:"dchart"},title:{type:String,default:"Title"},xAxisLabel:{type:String,default:"時間"},yAxisLabel:{type:String,default:"YLabel"},xlabelUseTimeFormat:{type:Boolean,default:!0}},data(){return{loading:!1,Rendering:!1,chart_style:{backgroundColor:"#202020",border:"1px solid grey",margin:"3px",borderRadius:"4px"},chartInstance:{data:{labels:[],datasets:[]},update:()=>{}},options:{responsive:!0,maintainAspectRatio:!1,lineTension:0,tooltips:{mode:"index",intersect:!0},layout:{padding:{bottom:10,top:10}},title:{display:!0,text:this.title,fontSize:14,fontColor:"white"},scales:{yAxes:[{gridLines:{color:"#313131"},ticks:{beginAtZero:!0,padding:20,fontColor:"white",autoskip:!0,maxTicksLimit:10,min:0,max:100},scaleLabel:{display:!0,labelString:this.yAxisLabel,fontSize:16,fontColor:"white"}}],xAxes:[{type:"time",time:{unit:"second",displayFormats:{day:"YYYY-MM-DD",hour:"YYYY-MM-DD HH",second:"YY/MM/DD HH:mm:ss"}},gridLines:{color:"#313131"},ticks:{autoskip:!0,autoSkipPadding:33,maxRotation:0,minRotation:0,fontColor:"white"},scaleLabel:{display:!0,labelString:this.xAxisLabel,fontSize:16,fontColor:"white"},getValueForPixel(){}}]},annotation:{drawTime:"afterDraw",annotations:[{type:"line",id:"line",mode:"horizontal",scaleID:"y-axis-0",value:2,borderWidth:2,borderColor:"red"}]},legend:{display:!0}},xlabels:[],datasets:[],datasetsVisible:[],isDark:!0,currentTheme:"dark",colors:["blue","green","red","orange","pink","grey","black","seagreen"],outOfViewPort:!1}},methods:{IsOutOfViewPort(){var e=document.querySelector(`#${this.id}`);if(!e)return!1;var t=e.getBoundingClientRect();return t.bottom>window.innerHeight||t.top<0},test(){this.chartInstance.setDatasetVisibility(1,!1),this.chartInstance.update()},ThemeChange(){this.currentTheme="dark"==this.currentTheme?"light":"dark",this.chart_style.backgroundColor="dark"==this.currentTheme?"#202020":"white",this.chart_style.border="dark"==this.currentTheme?"1px solid grey":"1px solid white",this.isDark="dark"==this.currentTheme,this.chartInstance.options.title.fontColor=this.chartInstance.options.scales.xAxes[0].ticks.fontColor=this.chartInstance.options.scales.xAxes[0].scaleLabel.fontColor=this.chartInstance.options.scales.yAxes[0].ticks.fontColor=this.chartInstance.options.scales.yAxes[0].scaleLabel.fontColor="dark"==this.currentTheme?"white":"black",this.chartInstance.update()},ClickChartHandel(){},ChartInit(){this.xlabelUseTimeFormat||(this.options.scales.xAxes[0].type="category");const e=document.getElementById(this.chart_id);this.chartInstance=new(d())(e,{type:"line",data:{labels:[],datasets:[]},options:this.options}),this.outOfViewPort=this.IsOutOfViewPort(),window.addEventListener("scroll",(()=>{this.outOfViewPort=this.IsOutOfViewPort()})),this.chartInstance.options.animation=!1},async UpdateChart(e,t="second",a=!1){if(this.IsOutOfViewPort())console.log("no render");else try{a&&(this.loading=!0),await this.RenderData(e,t),setTimeout((()=>{this.loading=!1}),100)}catch(s){return"err"}},FeedData(e=[],t=[{label:"",data:-1,borderColor:"blue",borderWidth:1}]){0!=t.length&&void 0!=e&&(this.xlabels.push(e),t.forEach((e=>{var t=this.datasets.find((t=>t.label==e.label));t?t.data.push(e.data):this.datasets.push({label:e.label,data:[e.data],backgroundColor:"",borderColor:e.borderColor?e.borderColor:"blue",borderWidth:e.borderWidth?e.borderWidth:1,fill:!1,pointStyle:"none",pointRadius:0,lineTension:0})})),this.DataFIFO(),this.RenderData())},Clear(){this.datasetsVisible=[],this.chartInstance.data.datasets=[],this.chartInstance.data.labels=[],this.chartInstance.update()},async RenderData(e,t="second"){await new Promise(((a,s)=>{try{var l=e.datasets[0].data;-1==e.ymax?this.chartInstance.options.scales.yAxes[0].ticks.max=Math.max.apply(null,l):this.chartInstance.options.scales.yAxes[0].ticks.max=e.ymax,-1==e.ymin?this.chartInstance.options.scales.yAxes[0].ticks.min=Math.min.apply(null,l):this.chartInstance.options.scales.yAxes[0].ticks.min=e.ymin,this.chartInstance.options.scales.xAxes[0].time.unit=t,this.chartInstance.data.datasets=e.datasets,this.chartInstance.data.labels=e.labels,this.chartInstance.update(),a()}catch(o){s(o)}}))},DataFIFO(){this.xlabels.length>50&&(this.xlabels.splice(0,1),this.datasets.forEach((e=>{e.data.splice(0,1)})))}},computed:{id(){return"gc"+this.chart_id.replaceAll(".","").replace("-","")},currentDataSet(){var e=[];return this.chartInstance.data.datasets.forEach((t=>{e.push(t.data)})),{labels:this.chartInstance.data.labels,datas:e}},TimeWindowDom(){return document.getElementById("time-window")}},mounted(){this.ChartInit()},created(){}},u=a(89);const h=(0,u.Z)(c,[["render",i]]);var m=h},2391:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return J}});var s=a(3396);const l={class:"fade-in bg-light"},o={class:"row g-1"};function n(e,t,a,n,i,r){const d=(0,s.up)("status-card-vue");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",o,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.veData,((e,t)=>((0,s.wg)(),(0,s.j4)(d,{edge_ip:i.edge_ip,class:"col-md-4",key:t,ip:t,veData:e},null,8,["edge_ip","ip","veData"])))),128))])])}var i=a(7139);const r={class:"ve-module-status d-flex flex-column px-1 py-1"},d={class:"bg-dark"},c={class:"info d-flex flex-row px-2 py-2"},u={class:"flex-fill d-flex justify-content-start"},h=(0,s._)("span",null,"EQ :",-1),m=(0,s._)("span",null,"UNIT :",-1),p={class:""},w={class:"d-flex flex-row justify-content-center py-2"},g={class:"ve-value"},f=(0,s.Uk)("ENTER");function _(e,t,a,l,o,n){const _=(0,s.up)("CircleCheck"),y=(0,s.up)("Warning"),v=(0,s.up)("el-icon"),b=(0,s.up)("CircleCheckFilled"),S=(0,s.up)("WarningFilled"),I=(0,s.up)("b-button"),k=(0,s.up)("DetailViewVue");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",d,[(0,s._)("div",c,[(0,s._)("div",u,[h,(0,s._)("span",null,(0,i.zw)(a.veData.EqName),1),m,(0,s._)("span",null,(0,i.zw)(a.veData.UnitName),1)]),(0,s._)("div",p,[(0,s._)("span",null,(0,i.zw)(a.ip),1),(0,s.Wm)(v,{size:"18px"},{default:(0,s.w5)((()=>[o.Connected?((0,s.wg)(),(0,s.j4)(_,{key:0})):((0,s.wg)(),(0,s.j4)(y,{key:1}))])),_:1})])]),(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.veData.AxisStatus,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"axis-status",key:t},[(0,s._)("span",null,(0,i.zw)(t),1),(0,s._)("div",{class:(0,i.C_)(["icon",e.IsOutOfSPC?"ve-warning":"ve-normal"])},[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[e.IsOutOfSPC?((0,s.wg)(),(0,s.j4)(S,{key:1})):((0,s.wg)(),(0,s.j4)(b,{key:0}))])),_:2},1024),(0,s._)("span",g,(0,i.zw)(e.veValue.toFixed(3)),1)],2)])))),128))]),(0,s._)("div",null,[(0,s.Wm)(I,{onClick:n.EnterHandle,class:"w-100",variant:"dark"},{default:(0,s.w5)((()=>[f])),_:1},8,["onClick"])]),(0,s.Wm)(k,{ref:"detail_view",edge_ip:a.edge_ip,ip:a.ip},null,8,["edge_ip","ip"])])])}var y=a(9242);const v=["id"],b={class:"flex-fill"},S={class:"h-100 w-100"},I={class:"axis-title d-flex justify-content-start w-100 px-3"},k={class:"content d-flex flex-row justify-content-start h-100 row"},x={class:"flex-fill"},D={class:"threshold-setting w-100"},C={class:"d-flex flex-row"},T={key:0},W=(0,s._)("span",null,"UCL",-1),P=["value"],V=(0,s._)("span",null,"LCL",-1),M=["value"],E={key:1,class:"setting-mode"},j=(0,s._)("span",null,"UCL",-1),U=["value","onChange","onKeyup"],N=(0,s._)("span",null,"LCL",-1),O=["value","onChange","onKeyup"],z=(0,s.Uk)("Unlock"),A=(0,s.Uk)("儲存"),R=(0,s.Uk)("取消"),$={class:"charting flex-fill col-md-6"};function H(e,t,a,l,o,n){const r=(0,s.up)("el-button"),d=(0,s.up)("GPMChart"),c=(0,s.up)("el-drawer"),u=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.j4)(c,{direction:"btt",size:"92%",modelValue:o.show,"onUpdate:modelValue":t[1]||(t[1]=e=>o.show=e),onClosed:n.CloseHandle,"show-close":!1},{header:(0,s.w5)((({titleId:e})=>[(0,s._)("div",{id:e,class:"ve-detail-title d-flex flex-row"},[(0,s._)("div",b,(0,i.zw)(`振動能量-${o.veData.EqName}/${o.veData.UnitName}(${a.ip})`),1),(0,s.Wm)(r,{size:"large",plain:"",icon:"close",circle:"",onClick:t[0]||(t[0]=e=>o.show=!1)})],8,v)])),default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.veData.AxisStatus,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"axis-infos d-flex flex-column",key:t},[(0,s._)("div",I,(0,i.zw)(t)+" 軸向",1),(0,s._)("div",k,[(0,s._)("div",{class:"value-display d-flex flex-column col-md-3 bg-dark",style:(0,i.j5)({color:e.IsOutOfSPC?"red":"rgb(0, 255, 0)"})},[(0,s._)("div",x,(0,i.zw)(e.veValue.toFixed(3)),1),(0,s._)("div",D,[(0,s._)("div",C,[o.ThresholdSettinglock[t]?((0,s.wg)(),(0,s.iD)("div",T,[W,(0,s._)("input",{disabled:"",value:e.ucl,type:"number",step:"0.01"},null,8,P),V,(0,s._)("input",{disabled:"",value:e.lcl,type:"number",step:"0.01"},null,8,M)])):(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",E,[j,(0,s._)("input",{class:"setting-input",value:o.ThresholdSetting[t].ucl,type:"number",step:"0.01",onChange:e=>{o.ThresholdSetting[t].ucl=e.target.value},onKeyup:e=>{o.ThresholdSetting[t].ucl=e.target.value}},null,40,U),N,(0,s._)("input",{class:"setting-input",value:o.ThresholdSetting[t].lcl,type:"number",step:"0.01",onChange:e=>{o.ThresholdSetting[t].lcl=e.target.value},onKeyup:e=>{o.ThresholdSetting[t].lcl=e.target.value}},null,40,O)])),[[u,o.ThresholdSetting[t].loading]]),(0,s.wy)((0,s.Wm)(r,{size:"small",onClick:e=>n.UnlockClickHandle(t)},{default:(0,s.w5)((()=>[z])),_:2},1032,["onClick"]),[[y.F8,o.ThresholdSettinglock[t]]]),(0,s.wy)((0,s.Wm)(r,{size:"small",onClick:e=>n.SettingThersHoldHandle(t)},{default:(0,s.w5)((()=>[A])),_:2},1032,["onClick"]),[[y.F8,!o.ThresholdSettinglock[t]]]),(0,s.wy)((0,s.Wm)(r,{size:"small",onClick:e=>o.ThresholdSettinglock[t]=!0},{default:(0,s.w5)((()=>[R])),_:2},1032,["onClick"]),[[y.F8,!o.ThresholdSettinglock[t]]])])])],4),(0,s._)("div",$,[(0,s.Wm)(d,{class:"vechart",ref_for:!0,ref:n.chart_id+"_"+t,chart_id:n.chart_id+"_"+t,title:`[${t}]軸向振動能量趨勢圖`,yAxisLabel:"振動能量(G)"},null,8,["chart_id","title"])])])])))),128))])),[[u,!o.wsDataRecieved]])])),_:1},8,["modelValue","onClosed"])}var L=a(6647),Q={components:{GPMChart:L.Z},props:{ip:{type:String,default:"123.213.213.23"},edge_ip:{type:String,default:"123.213.213.23"}},computed:{chart_id(){return this.ip+"_ve_detail_chart"}},data(){return{show:!1,wsDataRecieved:!1,ws:null,veData:{IP:"",EqName:"",UnitName:"",AxisStatus:{X:{status:"normal",veValue:0},Y:{status:"warning",veValue:0},Z:{status:"danger",veValue:0}}},ThresholdSettinglock:{X:!0,Y:!0,Z:!0},ThresholdSetting:{X:{ucl:1,lcl:1,loading:!1},Y:{ucl:1,lcl:1,loading:!1},Z:{ucl:1,lcl:1,loading:!1}}}},methods:{Show(){this.show=!0,this.WsIni()},UnlockClickHandle(e){let t=this.veData.AxisStatus[e].ucl,a=this.veData.AxisStatus[e].lcl;this.ThresholdSetting[e].ucl=t,this.ThresholdSetting[e].lcl=a,this.ThresholdSettinglock[e]=!1},SettingThersHoldHandle(e){this.ThresholdSetting[e].loading=!0,setTimeout((()=>{let t=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?ip=${this.ip}&axis=${e}&ucl=${this.ThresholdSetting[e].ucl}&lcl=${this.ThresholdSetting[e].lcl}`);t.onmessage=a=>{var s=JSON.parse(a.data);t.onmessage=null,t.close(),setTimeout((()=>{s.data?this.$toast.info(`${this.ip} ${e}軸閥值設定完成`):this.$toast.error(`${this.ip} ${e}軸閥值設定失敗!\r\n${s.message}`),this.ThresholdSettinglock[e]=!0,this.ThresholdSetting[e].loading=!1}),500)},t.onerror=t=>{this.$toast.error(`${this.ip} ${e}軸閥值設定失敗!\r\n${t.message}`),console.info("設定VE閥值時發生websocket error",t)}}),50)},WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy?ip=${this.ip}&type=charting`),this.ws.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){if(this.wsDataRecieved=!0,this.veData=e,this.show)try{this.$refs[this.chart_id+"_X"][0].UpdateChart(this.veData.AxisStatus.X.charting),this.$refs[this.chart_id+"_Y"][0].UpdateChart(this.veData.AxisStatus.Y.charting),this.$refs[this.chart_id+"_Z"][0].UpdateChart(this.veData.AxisStatus.Z.charting)}catch(t){console.error(t)}},CloseHandle(){null!=this.ws&&(this.ws.onmessage=null,this.ws.close()),this.wsDataRecieved=!1}},mounted(){}},F=a(89);const Z=(0,F.Z)(Q,[["render",H]]);var Y=Z,B={components:{DetailViewVue:Y},props:{edge_ip:{type:String,default:"127.0.0.1"},ip:{type:String,default:"123.213.213.23"},veData:{type:Object,default(){return{IP:"",EqName:"",UnitName:"",AxisStatus:{X:{status:"normal"},Y:{status:"warning"},Z:{status:"danger"}}}}}},data(){return{Connected:!0}},methods:{EnterHandle(){this.$refs["detail_view"].Show()}}};const q=(0,F.Z)(B,[["render",_]]);var G=q,K={components:{StatusCardVue:G},data(){return{edge_ip:"",ws:null,wsConnecting:!1,veData:{}}},methods:{MessageDataHandle(e){this.veData=e},WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy`),this.ws.onmessage=e=>this.MessageDataHandle(JSON.parse(e.data)),this.ws.onclose=()=>this.WsRetry()},WsRetry(){this.wsConnecting=!0,this.WsDestory(),this.WsIni()},WsDestory(){null!=this.ws&&(this.ws.onmessage=null,this.ws.onclose=null)}},mounted(){this.WsIni()},created(){this.edge_ip=this.$route.params.ip},unmounted(){this.WsDestory()}};const X=(0,F.Z)(K,[["render",n]]);var J=X},5454:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(3396),l=a(7139),o=a(9242);const n={class:"d-flex flex-column h-100 w-100 bg-light"},i={class:"ve-threshold-table flex-fill"},r={class:"ve-threshold-all-setting d-flex flex-row bg-dark border-info mx-1 px-3 py-3"},d={class:"d-flex flex-column"},c={class:"col-md-1"},u={class:"col-md-2"},h={class:"col-md-1"},m={class:"col-md-2"},p={class:"col-md-1"},w={class:"col-md-2"},g={class:"col-md-1"},f={class:"col-md-1"},_={class:"flex-fill text-left"},y=(0,s.Uk)("設定");function v(e,t,a,v,b,S){const I=(0,s.up)("el-checkbox"),k=(0,s.up)("el-table-column"),x=(0,s.up)("el-input-number"),D=(0,s.up)("el-table"),C=(0,s.up)("b-form-input"),T=(0,s.up)("b-button"),W=(0,s.up)("el-affix");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",i,[(0,s.Wm)(D,{data:b.thresholdSettings,"row-key":"ModuleInfo.IP"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{label:"V",fixed:"left",width:"40"},{default:(0,s.w5)((e=>[(0,s.Wm)(I,{modelValue:e.row.selected,"onUpdate:modelValue":t=>e.row.selected=t,onChange:t=>S.SelectedHandle(e.row.ModuleInfo.IP,e.row.selected)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,s.Wm)(k,{label:"IP",prop:"ModuleInfo.IP",fixed:"left",width:"140"}),(0,s.Wm)(k,{label:"EQ Name",prop:"ModuleInfo.EqName"}),(0,s.Wm)(k,{label:"UNIT Name",prop:"ModuleInfo.UnitName"}),(0,s.Wm)(k,{class:"px-0 py-0",label:"X軸向-管制上界(UCL)",prop:"ThresX.ucl",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresX.ucl,"onUpdate:modelValue":t=>e.row.ThresX.ucl=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"X軸向-管制下界(LCL)",prop:"ThresX.lcl",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresX.lcl,"onUpdate:modelValue":t=>e.row.ThresX.lcl=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"X軸向-無動作判斷閥值",prop:"ThresX.no_motion_thres",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresX.no_motion_thres,"onUpdate:modelValue":t=>e.row.ThresX.no_motion_thres=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"X軸向-連結到診斷模組",prop:"ThresX.linkToDignoseModule"},{default:(0,s.w5)((e=>[(0,s.Wm)(I,{modelValue:e.row.ThresX.linkToDignoseModule,"onUpdate:modelValue":t=>e.row.ThresX.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Y軸向-管制上界(UCL)",prop:"ThresY.ucl",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresY.ucl,"onUpdate:modelValue":t=>e.row.ThresY.ucl=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Y軸向-管制下界(LCL)",prop:"ThresY.lcl",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresY.lcl,"onUpdate:modelValue":t=>e.row.ThresY.lcl=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Y軸向-無動作判斷閥值",prop:"ThresY.no_motion_thres",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresY.no_motion_thres,"onUpdate:modelValue":t=>e.row.ThresY.no_motion_thres=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Y軸向-連結到診斷模組",prop:"ThresY.linkToDignoseModule"},{default:(0,s.w5)((e=>[(0,s.Wm)(I,{modelValue:e.row.ThresY.linkToDignoseModule,"onUpdate:modelValue":t=>e.row.ThresY.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Z軸向-管制上界(UCL)",prop:"ThresZ.ucl",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresZ.ucl,"onUpdate:modelValue":t=>e.row.ThresZ.ucl=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Z軸向-管制下界(LCL)",prop:"ThresZ.lcl",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresZ.lcl,"onUpdate:modelValue":t=>e.row.ThresZ.lcl=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Z軸向-無動作判斷閥值",prop:"ThresZ.no_motion_thres",width:"132"},{default:(0,s.w5)((e=>[(0,s.Wm)(x,{step:"0.01",size:"small",modelValue:e.row.ThresZ.no_motion_thres,"onUpdate:modelValue":t=>e.row.ThresZ.no_motion_thres=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,s.Wm)(k,{label:"Z軸向-連結到診斷模組",prop:"ThresZ.linkToDignoseModule"},{default:(0,s.w5)((e=>[(0,s.Wm)(I,{modelValue:e.row.ThresZ.linkToDignoseModule,"onUpdate:modelValue":t=>e.row.ThresZ.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])]),(0,s.wy)((0,s.Wm)(W,{class:"w-100",position:"bottom",offset:0},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.globalSettings,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"d-flex flex-row row",key:t},[(0,s._)("span",c,(0,l.zw)(t)+"軸向-管制上界(UCL)",1),(0,s._)("div",u,[(0,s.Wm)(C,{size:"sm",type:"number",step:"0.01",modelValue:e.ucl,"onUpdate:modelValue":t=>e.ucl=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("span",h,(0,l.zw)(t)+"軸向-管制下界(LCL)",1),(0,s._)("div",m,[(0,s.Wm)(C,{size:"sm",type:"number",step:"0.01",modelValue:e.lcl,"onUpdate:modelValue":t=>e.lcl=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("span",p,(0,l.zw)(t)+"軸向-無動作判斷閥值",1),(0,s._)("div",w,[(0,s.Wm)(C,{size:"sm",type:"number",step:"0.01",modelValue:e.no_motion_thres,"onUpdate:modelValue":t=>e.no_motion_thres=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("span",g,(0,l.zw)(t)+"軸向-連結至診斷模組",1),(0,s._)("div",f,[(0,s.Wm)(I,{modelValue:e.linkToDignoseModule,"onUpdate:modelValue":t=>e.linkToDignoseModule=t},null,8,["modelValue","onUpdate:modelValue"])])])))),128))]),(0,s._)("div",_,[(0,s.Wm)(T,{onClick:S.SendGlobalSetting},{default:(0,s.w5)((()=>[y])),_:1},8,["onClick"])])])])),_:1},512),[[o.F8,b.show_bottom_tool]])])}var b={data(){return{edge_ip:"",ws:null,thresholdSettings:[],show_bottom_tool:!1,globalSettings:{X:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1},Y:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1},Z:{ucl:-1,lcl:-1,no_motion_thres:-1,linkToDignoseModule:!1}}}},methods:{WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?ip=ALL&method=get`),this.ws.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){this.thresholdSettings=e},SelectedHandle(e,t){let a=this.thresholdSettings.findIndex((e=>1==e.selected));this.show_bottom_tool=-1!=a},InputOnChange(e){console.info(e)},SendGlobalSetting(){let e=this.thresholdSettings.filter((e=>1==e.selected)).map((e=>e.ModuleInfo.IP));console.info(e);let t=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy/ThresholdSetting?method=send_json`);t.onopen=()=>{t.send(JSON.stringify({ipList:e,thresholdSetting:this.globalSettings}))},t.onmessage=e=>{var t=JSON.parse(e.data);t.data?(this.ws.close(),this.WsIni(),this.$toast.info("OK")):this.$toast.error(t.message)}}},mounted(){this.edge_ip=this.$route.params.ip,this.WsIni()},unmounted(){this.ws.close()}},S=a(89);const I=(0,S.Z)(b,[["render",v]]);var k=I}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,o){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],l=e[c][1],o=e[c][2];for(var i=!0,r=0;r<s.length;r++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+".d34bdd45.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="gpm-admin:";a.l=function(s,l,o,n){if(e[s])e[s].push(l);else{var i,r;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+o){i=u;break}}i||(r=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+o),i.src=s),e[s]=[l];var h=function(t,a){i.onerror=i.onload=null,clearTimeout(m);var l=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),r&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,s){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)s.push(l[2]);else{var o=new Promise((function(a,s){l=e[t]=[a,s]}));s.push(l[2]=o);var n=a.p+a.u(t),i=new Error,r=function(s){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",i.name="ChunkLoadError",i.type=o,i.request=n,l[1](i)}};a.l(n,r,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,o,n=s[0],i=s[1],r=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(r)var c=r(a)}for(t&&t(s);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunkgpm_admin"]=self["webpackChunkgpm_admin"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6894)}));s=a.O(s)})();
//# sourceMappingURL=app.23c47273.js.map