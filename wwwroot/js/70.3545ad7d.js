"use strict";(self["webpackChunkgpm_admin"]=self["webpackChunkgpm_admin"]||[]).push([[70],{2070:function(e,t,s){s.r(t),s.d(t,{default:function(){return q}});var l=s(3396);const a={class:"fade-in bg-light"},i={class:"row g-3"};function n(e,t,s,n,d,o){const r=(0,l.up)("status-card-vue");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.veData,((e,t)=>((0,l.wg)(),(0,l.j4)(r,{edge_ip:d.edge_ip,class:"col-md-4",key:t,ip:t,veData:e},null,8,["edge_ip","ip","veData"])))),128))])])}var d=s(7139);const o={class:"ve-module-status bg-dark d-flex flex-column"},r={class:"info d-flex flex-row px-2 py-2"},c={class:"flex-fill d-flex justify-content-start"},u=(0,l._)("span",null,"EQ :",-1),h=(0,l._)("span",null,"UNIT :",-1),p={class:""},w={class:"d-flex flex-row justify-content-center py-2"},g={class:"ve-value"},_=(0,l.Uk)("ENTER");function f(e,t,s,a,i,n){const f=(0,l.up)("CircleCheck"),v=(0,l.up)("Warning"),m=(0,l.up)("el-icon"),k=(0,l.up)("CircleCheckFilled"),x=(0,l.up)("WarningFilled"),y=(0,l.up)("b-button"),C=(0,l.up)("DetailViewVue");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",r,[(0,l._)("div",c,[u,(0,l._)("span",null,(0,d.zw)(s.veData.EqName),1),h,(0,l._)("span",null,(0,d.zw)(s.veData.UnitName),1)]),(0,l._)("div",p,[(0,l._)("span",null,(0,d.zw)(s.ip),1),(0,l.Wm)(m,{size:"18px"},{default:(0,l.w5)((()=>[i.Connected?((0,l.wg)(),(0,l.j4)(f,{key:0})):((0,l.wg)(),(0,l.j4)(v,{key:1}))])),_:1})])]),(0,l._)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.veData.AxisStatus,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"axis-status",key:t},[(0,l._)("span",null,(0,d.zw)(t),1),(0,l._)("div",{class:(0,d.C_)(["icon",e.IsOutOfSPC?"ve-warning":"ve-normal"])},[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[e.IsOutOfSPC?((0,l.wg)(),(0,l.j4)(x,{key:1})):((0,l.wg)(),(0,l.j4)(k,{key:0}))])),_:2},1024),(0,l._)("span",g,(0,d.zw)(e.veValue.toFixed(3)),1)],2)])))),128))]),(0,l._)("div",null,[(0,l.Wm)(y,{onClick:n.EnterHandle,class:"w-100",variant:"dark"},{default:(0,l.w5)((()=>[_])),_:1},8,["onClick"])]),(0,l.Wm)(C,{ref:"detail_view",edge_ip:s.edge_ip,ip:s.ip},null,8,["edge_ip","ip"])])}var v=s(9242);const m=["id"],k={class:"flex-fill"},x={class:"axis-title d-flex justify-content-start w-100 px-3"},y={class:"content d-flex flex-row justify-content-start h-100 row"},C={class:"flex-fill"},D={class:"threshold-setting w-100"},S={class:"d-flex flex-row"},W=(0,l._)("span",null,"UCL",-1),b=["disabled","value"],U=(0,l._)("span",null,"LCL",-1),V=["disabled","onUpdate:modelValue"],z=(0,l.Uk)("Unlock"),I=(0,l.Uk)("儲存"),j=(0,l.Uk)("取消"),N={class:"charting flex-fill col-md-6"};function T(e,t,s,a,i,n){const o=(0,l.up)("el-button"),r=(0,l.up)("GPMChart"),c=(0,l.up)("el-drawer");return(0,l.wg)(),(0,l.j4)(c,{direction:"btt",size:"92%",modelValue:i.show,"onUpdate:modelValue":t[1]||(t[1]=e=>i.show=e),onClosed:n.CloseHandle,"show-close":!1},{header:(0,l.w5)((({titleId:e})=>[(0,l._)("div",{id:e,class:"ve-detail-title d-flex flex-row"},[(0,l._)("div",k,(0,d.zw)(`振動能量-${i.veData.EqName}/${i.veData.UnitName}(${i.veData.IP})`),1),(0,l.Wm)(o,{size:"large",plain:"",icon:"close",circle:"",onClick:t[0]||(t[0]=e=>i.show=!1)})],8,m)])),default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.veData.AxisStatus,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"axis-infos d-flex flex-column",key:t},[(0,l._)("div",x,(0,d.zw)(t)+" 軸向",1),(0,l._)("div",y,[(0,l._)("div",{class:"value-display d-flex flex-column col-md-4 bg-dark",style:(0,d.j5)({color:e.IsOutOfSPC?"red":"rgb(0, 255, 0)"})},[(0,l._)("div",C,(0,d.zw)(e.veValue.toFixed(3)),1),(0,l._)("div",D,[(0,l._)("div",S,[W,(0,l._)("input",{disabled:i.ThresholdSettinglock[t],value:e.ucl,type:"number",step:"0.01"},null,8,b),U,(0,l.wy)((0,l._)("input",{disabled:i.ThresholdSettinglock[t],"onUpdate:modelValue":t=>e.lcl=t,type:"number",step:"0.01"},null,8,V),[[v.nr,e.lcl]]),(0,l.wy)((0,l.Wm)(o,{size:"small",onClick:e=>i.ThresholdSettinglock[t]=!1},{default:(0,l.w5)((()=>[z])),_:2},1032,["onClick"]),[[v.F8,i.ThresholdSettinglock[t]]]),(0,l.wy)((0,l.Wm)(o,{size:"small",onClick:e=>i.ThresholdSettinglock[t]=!0},{default:(0,l.w5)((()=>[I])),_:2},1032,["onClick"]),[[v.F8,!i.ThresholdSettinglock[t]]]),(0,l.wy)((0,l.Wm)(o,{size:"small",onClick:e=>i.ThresholdSettinglock[t]=!0},{default:(0,l.w5)((()=>[j])),_:2},1032,["onClick"]),[[v.F8,!i.ThresholdSettinglock[t]]])])])],4),(0,l._)("div",N,[(0,l.Wm)(r,{class:"vechart",ref_for:!0,ref:n.chart_id+"_"+t,chart_id:n.chart_id+"_"+t,title:`[${t}]軸向振動能量趨勢圖`,yAxisLabel:"振動能量(G)"},null,8,["chart_id","title"])])])])))),128))])),_:1},8,["modelValue","onClosed"])}var $=s(6647),E={components:{GPMChart:$.Z},props:{ip:{type:String,default:"123.213.213.23"},edge_ip:{type:String,default:"123.213.213.23"}},computed:{chart_id(){return this.ip+"_ve_detail_chart"}},data(){return{show:!1,ws:null,veData:{IP:"",EqName:"",UnitName:"",AxisStatus:{X:{status:"normal",veValue:0},Y:{status:"warning",veValue:0},Z:{status:"danger",veValue:0}}},ThresholdSettinglock:{X:!0,Y:!0,Z:!0},ThresholdSetting:{X:{ucl:1,lcl:1},Y:{ucl:1,lcl:1},Z:{ucl:1,lcl:1}}}},methods:{Show(){this.show=!0,this.WsIni()},WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy?ip=${this.ip}&type=charting`),this.ws.onmessage=e=>this.WsDataHandle(JSON.parse(e.data))},WsDataHandle(e){if(this.veData=e,this.show)try{this.$refs[this.chart_id+"_X"][0].UpdateChart(this.veData.AxisStatus.X.charting),this.$refs[this.chart_id+"_Y"][0].UpdateChart(this.veData.AxisStatus.Y.charting),this.$refs[this.chart_id+"_Z"][0].UpdateChart(this.veData.AxisStatus.Z.charting)}catch(t){console.error(t)}},CloseHandle(){null!=this.ws&&(this.ws.onmessage=null,this.ws.close())}},mounted(){}},H=s(89);const Z=(0,H.Z)(E,[["render",T]]);var O=Z,Y={components:{DetailViewVue:O},props:{edge_ip:{type:String,default:"127.0.0.1"},ip:{type:String,default:"123.213.213.23"},veData:{type:Object,default(){return{IP:"",EqName:"",UnitName:"",AxisStatus:{X:{status:"normal"},Y:{status:"warning"},Z:{status:"danger"}}}}}},data(){return{Connected:!0}},methods:{EnterHandle(){this.$refs["detail_view"].Show()}}};const A=(0,H.Z)(Y,[["render",f]]);var P=A,F={components:{StatusCardVue:P},data(){return{edge_ip:"",ws:null,wsConnecting:!1,veData:{}}},methods:{MessageDataHandle(e){this.veData=e},WsIni(){this.ws=new WebSocket(`ws://${this.edge_ip}:44332/VibrationEnergy`),this.ws.onmessage=e=>this.MessageDataHandle(JSON.parse(e.data)),this.ws.onclose=()=>this.WsRetry()},WsRetry(){this.wsConnecting=!0,this.WsDestory(),this.WsIni()},WsDestory(){null!=this.ws&&(this.ws.onmessage=null,this.ws.onclose=null)}},mounted(){this.WsIni()},created(){this.edge_ip=this.$route.params.ip}};const X=(0,H.Z)(F,[["render",n]]);var q=X}}]);
//# sourceMappingURL=70.3545ad7d.js.map