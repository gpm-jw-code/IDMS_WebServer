(function(){var e={6700:function(e,t,s){var n={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function o(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=6700},5231:function(e,t,s){"use strict";var n=s(9242),o=s(936),a=s(2152),r=s(2748),l=(s(4415),s(2483)),i=s(3396),d=s(7139);const u={class:"view"},c=(0,i._)("h4",null,"Edge 狀態",-1);function m(e,t,s,n,o,a){const r=(0,i.up)("el-table-column"),l=(0,i.up)("el-tag"),m=(0,i.up)("el-table");return(0,i.wg)(),(0,i.iD)("div",u,[c,(0,i.Wm)(m,{"row-class-name":"tableRow","row-style":o.rowStyle,"cell-style":o.rowStyle,"header-cell-style":o.headerStyle,onExpandChange:a.ExpandHandle,data:o.EdgesInfo,size:"large","row-key":"IP",height:"300",style:{width:"100%","background-color":"#1e1e1e"},"highlight-current-row":""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{sortable:"",fixed:"left",label:"IP",prop:"EdgeIP"}),(0,i.Wm)(r,{sortable:"",fixed:"left",label:"名稱",prop:"Name"}),(0,i.Wm)(r,{sortable:"",label:"已連接模組數",prop:"SensorNum"}),(0,i.Wm)(r,{sortable:"",label:"資料庫使用",prop:"DbDickUsage"}),(0,i.Wm)(r,{sortable:"",label:"更新時間",prop:"HSCharingDataUpdateTime"},{default:(0,i.w5)((e=>[(0,i.Uk)((0,d.zw)(a.GetTime(e.row.EdgeIP,e.column.property)),1)])),_:1}),(0,i.Wm)(r,{sortable:"",label:"更新時間",prop:"DignoseDataUpdateTime"},{default:(0,i.w5)((e=>[(0,i.Uk)((0,d.zw)(a.GetTime(e.row.EdgeIP,e.column.property)),1)])),_:1}),(0,i.Wm)(r,{sortable:"",label:"更新時間",prop:"AIHCharingDataUpdateTime"},{default:(0,i.w5)((e=>[(0,i.Uk)((0,d.zw)(a.GetTime(e.row.EdgeIP,e.column.property)),1)])),_:1}),(0,i.Wm)(r,{sortable:"",label:"更新時間",prop:"AIDCharingDataUpdateTime"},{default:(0,i.w5)((e=>[(0,i.Uk)((0,d.zw)(a.GetTime(e.row.EdgeIP,e.column.property)),1)])),_:1}),(0,i.Wm)(r,{sortable:"",label:"更新時間",prop:"VEWithChartingUpdataTime"},{default:(0,i.w5)((e=>[(0,i.Uk)((0,d.zw)(a.GetTime(e.row.EdgeIP,e.column.property)),1)])),_:1}),(0,i.Wm)(r,{sortable:"",label:"更新時間",prop:"VEWithoutChartingUpdataTime"},{default:(0,i.w5)((e=>[(0,i.Uk)((0,d.zw)(a.GetTime(e.row.EdgeIP,e.column.property)),1)])),_:1}),(0,i.Wm)(r,{sortable:"",fixed:"right",label:"狀態",prop:"Status"},{default:(0,i.w5)((e=>[(0,i.Wm)(l,{effect:"dark",type:"Offline"==e.row.Status?"danger":"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(e.row.Status),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["row-style","cell-style","header-cell-style","onExpandChange","data"])])}var h=s(6265),p=s.n(h),g={get host(){return window.location.protocol+"//"+window.location.host},get websocket_host(){return this.host.replace("http","ws")},get idms_websocket_host(){return window.location.protocol.replace("http","ws")+"//"+window.location.hostname+":44332"},mode:"gpm"};async function j(){return await w("/api/DB/GetEdgeInformation")}console.info(window.location.protocol.replace("http","ws")+"//"+window.location.hostname+":44332"),console.info(g.host),console.info("websocket_host",g.websocket_host),console.info("idms_websocket_host",g.idms_websocket_host),p().defaults.baseURL=g.host;async function f(e=!1){return await w("/api/edge/EdgesWSDataState")}async function w(e=""){return new Promise((t=>{p().get(e,{headers:{Authorization:"Bearer thisis_thoken"}}).catch((e=>{console.info(e),t({message:e.message})})).then((e=>{t(e.data)}))}))}var b=s(6797),v=s.n(b),_={data(){return{count:0,EdgesInfo:[],EdgeWSDataRevState:{},rowStyle:{backgroundColor:"black",color:"white"},headerStyle:{backgroundColor:"rgb(38, 38, 38)",color:"white"}}},mounted(){setInterval((async()=>{this.EdgesInfo=await j(),this.EdgeWSDataRevState=await f(),this.count+=1}),1e3)},methods:{ExpandHandle(e,t=[]){t.length},GetTime(e,t){var s=this.EdgeWSDataRevState[e];return void 0==s?"??":v()(s[t]).format("HH:mm:ss")}},created(){}},y=s(89);const k=(0,y.Z)(_,[["render",m]]);var z=k;const x=[{path:"/",name:"Overview",component:z}],I=(0,l.p7)({history:(0,l.r5)(),routes:x});var D=I,S=s(8212),W=s(5860);const E=e=>((0,i.dD)("data-v-13b31b0a"),e=e(),(0,i.Cn)(),e),O={id:"admin"},C={id:"breadcrumb",sticky:""},U={class:"navbar navbar-expand-lg bg-dark"},M=E((()=>(0,i._)("a",{class:"navbar-brand"},[(0,i._)("span",{style:{"font-size":"30px"}},"GPM"),(0,i._)("span",{class:"mx-3",style:{"font-size":"20px"}},"ADMIN")],-1))),T={class:"navbar-toggler bg-light",ref:"toggle_button"},H=E((()=>(0,i._)("i",{class:"bi bi-list"},null,-1))),R=[H],V={class:"collapse navbar-collapse",id:"navbarNav"},N={class:"navbar-nav"},P=E((()=>(0,i._)("li",{class:"nav-item"},[(0,i._)("a",{href:"/",class:"nav-link"},"IDMS")],-1))),L={class:"nav-item"},B=(0,i.Uk)("OV"),G={class:"nav-item"},Z=(0,i.Uk)("OV"),A={class:"router-view-content"};function F(e,t,s,n,o,a){const r=(0,i.up)("router-link"),l=(0,i.up)("router-view"),d=(0,i.up)("ChatIconVue"),u=(0,i.Q2)("b-toggle");return(0,i.wg)(),(0,i.iD)("div",O,[(0,i._)("div",C,[(0,i._)("nav",U,[M,(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",T,R)),[[u,void 0,void 0,{navbarNav:!0}]]),(0,i._)("div",V,[(0,i._)("ul",N,[P,(0,i._)("li",L,[(0,i._)("a",null,[(0,i.Wm)(r,{class:"nav-link",to:"/"},{default:(0,i.w5)((()=>[B])),_:1})])]),(0,i._)("li",G,[(0,i._)("a",null,[(0,i.Wm)(r,{class:"nav-link",to:"/2"},{default:(0,i.w5)((()=>[Z])),_:1})])])])])])]),(0,i.Wm)(l,null,{default:(0,i.w5)((({Component:e})=>[(0,i._)("div",A,[((0,i.wg)(),(0,i.j4)(i.Ob,null,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e)))],1024))])])),_:1}),(0,i.Wm)(d)])}const $={class:"chat-icon"},q={style:{position:"absolute",right:"12px",left:"12px",top:"53px"}};function K(e,t,s,n,o,a){const r=(0,i.up)("ChatSquare"),l=(0,i.up)("el-icon"),d=(0,i.up)("el-button"),u=(0,i.up)("el-badge"),c=(0,i.up)("ChatingViewVue"),m=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.iD)("div",$,[(0,i.Wm)(u,{value:o.unReadMsgNum,hidden:0==o.unReadMsgNum},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{size:"large",circle:"",onClick:a.ChatIconClickHandle},{default:(0,i.w5)((()=>[(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["value","hidden"]),(0,i.Wm)(m,{direction:"rtl",size:a.drawer_size,modelValue:o.show_chat_room,"onUpdate:modelValue":t[0]||(t[0]=e=>o.show_chat_room=e),title:"Chat Room"},{default:(0,i.w5)((()=>[(0,i._)("div",q,[(0,i.Wm)(c,{ref:"chat_room",onMsgOnRecieved:a.MsgRevHandle},null,8,["onMsgOnRecieved"])])])),_:1},8,["size","modelValue"])])}const Y={class:"d-flex flex-column h-100 padding"},J={class:"bg-light"},Q={key:0,class:"flex-fill"},X={class:"input-info"},ee=(0,i.Uk)("Enter"),te={key:0,class:"system-message"},se={class:"d-flex flex-column"},ne={class:"sender w-100"},oe={key:0,class:"d-flex flex-row"},ae={class:"msg"},re={class:"time"},le={key:1,class:"d-flex flex-row"},ie={class:"time"},de={class:"msg"},ue={style:{height:"50px",bottom:"50px","background-color":"black",opacity:".6"}},ce={class:"bg-light padding w-100",style:{height:"50px",bottom:"0"}},me={class:"d-flex flex-row"},he=(0,i.Uk)("離開"),pe={class:"flex-fill"},ge=(0,i.Uk)("Send");function je(e,t,s,o,a,r){const l=(0,i.up)("b-form-input"),u=(0,i.up)("b-button");return(0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",J,[void 0==a.userNameInput?((0,i.wg)(),(0,i.iD)("div",Q,[(0,i._)("div",X,[(0,i.Wm)(l,{modelValue:a.user_input_name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.user_input_name=e),type:"text",placeholder:"Enter your name"},null,8,["modelValue"]),(0,i.Wm)(u,{class:"w-100",variant:"primary",onClick:r.EnterRoomHandle},{default:(0,i.w5)((()=>[ee])),_:1},8,["onClick"])])])):((0,i.wg)(),(0,i.iD)("div",{key:1,class:"bg-dark",id:"messages-content",style:(0,d.j5)(r.msg_container_style)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.allMsgObjList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.time},[e.isInfoMessage?((0,i.wg)(),(0,i.iD)("div",te,(0,d.zw)(e.message),1)):((0,i.wg)(),(0,i.iD)("div",{class:(0,d.C_)("rev"==e.dir?"rev-message d-flex flow-row justify-content-start":"send-message d-flex flow-row justify-content-end"),key:e.time},[(0,i._)("div",se,[(0,i._)("div",ne,(0,d.zw)(e.from),1),"rev"==e.dir?((0,i.wg)(),(0,i.iD)("div",oe,[(0,i._)("div",ae,(0,d.zw)(e.message),1),(0,i._)("div",re,(0,d.zw)(e.time),1)])):((0,i.wg)(),(0,i.iD)("div",le,[(0,i._)("div",ie,(0,d.zw)(e.time),1),(0,i._)("div",de,(0,d.zw)(e.message),1)]))])],2))])))),128))],4)),(0,i.wy)((0,i._)("div",ue,"未讀訊息>>",512),[[n.F8,a.Unread&&a.roomEntered]]),(0,i.wy)((0,i._)("div",ce,[(0,i._)("div",me,[(0,i._)("div",null,[(0,i.Wm)(u,{id:"sendButton",variant:"danger"},{default:(0,i.w5)((()=>[he])),_:1})]),(0,i._)("div",pe,[(0,i.Wm)(l,{modelValue:a.messageInput,"onUpdate:modelValue":t[1]||(t[1]=e=>a.messageInput=e),onKeydown:(0,n.D2)(r.SendMessageHandle,["enter"]),type:"text"},null,8,["modelValue","onKeydown"])]),(0,i._)("div",null,[(0,i.Wm)(u,{id:"sendButton",disable:""==a.messageInput,onClick:r.SendMessageHandle},{default:(0,i.w5)((()=>[ge])),_:1},8,["disable","onClick"])])])],512),[[n.F8,a.roomEntered]])])])}s(1693);var fe={data(){return{userNameInput:void 0,user_input_name:"",roomEntered:!1,Unread:!1,messageInput:"",ws:null,revObjList:[],sendObjList:[],allMsgObjList:[]}},computed:{msg_container_style(){return{height:window.innerHeight-100+"px"}}},methods:{EnterRoomHandle(){this.userNameInput=""==this.user_input_name?"anonymous-"+Date.now():this.user_input_name,this.ws=new WebSocket(`${g.websocket_host}/chat?name=${this.userNameInput}`),this.ws.onmessage=e=>{var t=JSON.parse(e.data);t.dir="rev",this.allMsgObjList.push(t),this.ScrollToBottom(),this.$emit("msgOnRecieved",{})},this.ws.onopen=()=>{this.roomEntered=!0}},SendMessageHandle(){if(""==this.messageInput)return;let e={message:this.messageInput,name:this.userNameInput,from:"You",time:v()(Date.now()).format("yyyy/MM/DD HH:mm:ss")};this.ws.send(this.messageInput),this.ScrollToBottom(),e.dir="send",this.allMsgObjList.push(e),this.messageInput=""},ScrollToBottom(){var e=document.getElementById("messages-content");e.scrollTop=e.scrollHeight,console.info(e.scrollTop)},ShowUnReadIndicator(){var e=document.getElementById("messages-content");e?(console.info(e),console.info(e.scrollTop,e.scrollHeight),this.Unread=e.scrollTop!=e.scrollHeight):this.Unread=!1}},mounted(){}};const we=(0,y.Z)(fe,[["render",je]]);var be=we,ve={components:{ChatingViewVue:be},data(){return{show_chat_room:!1,unReadMsgNum:0}},computed:{drawer_size(){return window.innerWidth<500?"100%":"50%"}},methods:{ChatIconClickHandle(){this.show_chat_room=!0,this.unReadMsgNum=0,this.$refs["chat_room"].ShowUnReadIndicator()},MsgRevHandle(){this.show_chat_room||(this.unReadMsgNum+=1)}}};const _e=(0,y.Z)(ve,[["render",K]]);var ye=_e,ke={components:{ChatIconVue:ye},data(){return{}},methods:{},computed:{},mounted(){}};const ze=(0,y.Z)(ke,[["render",F],["__scopeId","data-v-13b31b0a"]]);var xe=ze;const Ie=(0,n.ri)(xe);Ie.use(D),Ie.use(o.ZP),Ie.use(S.Z),Ie.use(W.ZP),Ie.use(a.Z,{size:"default",zIndex:3e3});for(const[De,Se]of Object.entries(r))Ie.component(De,Se);Ie.mount("#admin")}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){var e=[];s.O=function(t,n,o,a){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],a=e[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&a||r>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[i])}))?n.splice(i--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={672:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,r=n[0],l=n[1],i=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(i)var u=i(s)}for(t&&t(n);d<r.length;d++)a=r[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=self["webpackChunkgpm_idms"]=self["webpackChunkgpm_idms"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(5231)}));n=s.O(n)})();
//# sourceMappingURL=Admin.b7714525.js.map